var d0=Object.defineProperty,h0=Object.defineProperties;var f0=Object.getOwnPropertyDescriptors;var Hy=Object.getOwnPropertySymbols;var p0=Object.prototype.hasOwnProperty,g0=Object.prototype.propertyIsEnumerable;var qy=(t,e,n)=>e in t?d0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C=(t,e)=>{for(var n in e||={})p0.call(e,n)&&qy(t,n,e[n]);if(Hy)for(var n of Hy(e))g0.call(e,n)&&qy(t,n,e[n]);return t},se=(t,e)=>h0(t,f0(e));var g=(t,e)=>()=>(t&&(e=t(t=0)),e);var m0=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});function $e(t){let e=zy;return zy=t,e}function y0(t){if(!(ql(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Bl)){if(!t.producerMustRecompute(t)&&!$l(t)){t.dirty=!1,t.lastCleanEpoch=Bl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Bl}}function Ky(t){return t&&(t.nextProducerIndex=0),$e(t)}function Qy(t,e){if($e(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ql(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Hl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function $l(t){ua(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(y0(n),r!==n.version))return!0}return!1}function Yy(t){if(ua(t),ql(t))for(let e=0;e<t.producerNode.length;e++)Hl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Hl(t,e){if(v0(t),ua(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Hl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ua(i),i.producerIndexOfThis[r]=e}}function ql(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ua(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function v0(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function _0(){throw new Error}function Zy(t){I0=t}var zy,Bl,Gy,Wy,I0,Jy=g(()=>{"use strict";zy=null,Bl=1,Gy=Symbol("SIGNAL");Wy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};I0=_0});function x(t){return typeof t=="function"}var we=g(()=>{"use strict"});function Or(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var la=g(()=>{"use strict"});var da,Xy=g(()=>{"use strict";la();da=Or(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n})});function Ln(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ha=g(()=>{"use strict"});function fa(t){return t instanceof le||t&&"closed"in t&&x(t.remove)&&x(t.add)&&x(t.unsubscribe)}function ev(t){x(t)?t():t.unsubscribe()}var le,zl,Vn=g(()=>{"use strict";we();Xy();ha();le=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(x(r))try{r()}catch(s){e=s instanceof da?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{ev(s)}catch(o){e=e??[],o instanceof da?e=[...e,...o.errors]:e.push(o)}}if(e)throw new da(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ev(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ln(n,e)}remove(e){let{_finalizers:n}=this;n&&Ln(n,e),e instanceof t&&e._removeParent(this)}};le.EMPTY=(()=>{let t=new le;return t.closed=!0,t})();zl=le.EMPTY});var pt,ts=g(()=>{"use strict";pt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}});var kr,Gl=g(()=>{"use strict";kr={setTimeout(t,e,...n){let{delegate:r}=kr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=kr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0}});function pa(t){kr.setTimeout(()=>{let{onUnhandledError:e}=pt;if(e)e(t);else throw t})}var Wl=g(()=>{"use strict";ts();Gl()});function ns(){}var Kl=g(()=>{"use strict"});function nv(t){return Ql("E",void 0,t)}function rv(t){return Ql("N",t,void 0)}function Ql(t,e,n){return{kind:t,value:e,error:n}}var tv,iv=g(()=>{"use strict";tv=Ql("C",void 0,void 0)});function Fr(t){if(pt.useDeprecatedSynchronousErrorHandling){let e=!Un;if(e&&(Un={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Un;if(Un=null,n)throw r}}else t()}function sv(t){pt.useDeprecatedSynchronousErrorHandling&&Un&&(Un.errorThrown=!0,Un.error=t)}var Un,ga=g(()=>{"use strict";ts();Un=null});function Yl(t,e){return w0.call(t,e)}function ma(t){pt.useDeprecatedSynchronousErrorHandling?sv(t):pa(t)}function E0(t){throw t}function Zl(t,e){let{onStoppedNotification:n}=pt;n&&kr.setTimeout(()=>n(t,e))}var jn,w0,Jl,Lr,D0,Xl=g(()=>{"use strict";we();Vn();ts();Wl();Kl();iv();Gl();ga();jn=class extends le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fa(e)&&e.add(this)):this.destination=D0}static create(e,n,r){return new Lr(e,n,r)}next(e){this.isStopped?Zl(rv(e),this):this._next(e)}error(e){this.isStopped?Zl(nv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zl(tv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},w0=Function.prototype.bind;Jl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ma(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ma(r)}else ma(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ma(n)}}},Lr=class extends jn{constructor(e,n,r){super();let i;if(x(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&pt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Yl(e.next,s),error:e.error&&Yl(e.error,s),complete:e.complete&&Yl(e.complete,s)}):i=e}this.destination=new Jl(i)}};D0={closed:!0,next:ns,error:E0,complete:ns}});var Vr,ya=g(()=>{"use strict";Vr=typeof Symbol=="function"&&Symbol.observable||"@@observable"});function Ze(t){return t}var Bn=g(()=>{"use strict"});function va(...t){return ed(t)}function ed(t){return t.length===0?Ze:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var td=g(()=>{"use strict";Bn()});function ov(t){var e;return(e=t??pt.Promise)!==null&&e!==void 0?e:Promise}function T0(t){return t&&x(t.next)&&x(t.error)&&x(t.complete)}function C0(t){return t&&t instanceof jn||T0(t)&&fa(t)}var q,Je=g(()=>{"use strict";Xl();Vn();ya();td();ts();we();ga();q=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=C0(n)?n:new Lr(n,r,i);return Fr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ov(r),new r((i,s)=>{let o=new Lr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Vr](){return this}pipe(...n){return ed(n)(this)}toPromise(n){return n=ov(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})()});function nd(t){return x(t?.lift)}function z(t){return e=>{if(nd(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var Ee=g(()=>{"use strict";we()});function G(t,e,n,r,i){return new rd(t,e,n,r,i)}var rd,Ae=g(()=>{"use strict";Xl();rd=class extends jn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}}});function Ur(){return z((t,e)=>{let n=null;t._refCount++;let r=G(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var id=g(()=>{"use strict";Ee();Ae()});var jr,av=g(()=>{"use strict";Je();Vn();id();Ae();Ee();jr=class extends q{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,nd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new le;let n=this.getSubject();e.add(this.source.subscribe(G(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=le.EMPTY)}return e}refCount(){return Ur()(this)}}});var cv,uv=g(()=>{"use strict";la();cv=Or(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"})});var He,_a,Ia=g(()=>{"use strict";Je();Vn();uv();ha();ga();He=(()=>{class t extends q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new _a(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new cv}next(n){Fr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Fr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?zl:(this.currentObservers=null,s.push(n),new le(()=>{this.currentObservers=null,Ln(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new q;return n.source=this,n}}return t.create=(e,n)=>new _a(e,n),t})(),_a=class extends He{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:zl}}});var Re,lv=g(()=>{"use strict";Ia();Re=class extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}});var rs,sd=g(()=>{"use strict";rs={now(){return(rs.delegate||Date).now()},delegate:void 0}});var is,dv=g(()=>{"use strict";Ia();sd();is=class extends He{constructor(e=1/0,n=1/0,r=rs){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}});var wa,hv=g(()=>{"use strict";Vn();wa=class extends le{constructor(e,n){super()}schedule(e,n=0){return this}}});var ss,fv=g(()=>{"use strict";ss={setInterval(t,e,...n){let{delegate:r}=ss;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ss;return(e?.clearInterval||clearInterval)(t)},delegate:void 0}});var Br,od=g(()=>{"use strict";hv();fv();ha();Br=class extends wa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ss.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ss.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ln(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}});var $r,pv=g(()=>{"use strict";sd();$r=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};$r.now=rs.now});var Hr,ad=g(()=>{"use strict";pv();Hr=class extends $r{constructor(e,n=$r.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}});var cd,gv=g(()=>{"use strict";od();ad();cd=new Hr(Br)});var Ea,mv=g(()=>{"use strict";od();Ea=class extends Br{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}});var Da,yv=g(()=>{"use strict";ad();Da=class extends Hr{}});var ud,vv=g(()=>{"use strict";mv();yv();ud=new Da(Ea)});var Ge,os=g(()=>{"use strict";Je();Ge=new q(t=>t.complete())});function _v(t){return t&&x(t.schedule)}var Iv=g(()=>{"use strict";we()});function ld(t){return t[t.length-1]}function wv(t){return x(ld(t))?t.pop():void 0}function bt(t){return _v(ld(t))?t.pop():void 0}function Ev(t,e){return typeof ld(t)=="number"?t.pop():e}var qr=g(()=>{"use strict";we();Iv()});function dd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Tv(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function Dv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $n(t){return this instanceof $n?(this.v=t,this):new $n(t)}function Cv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(_,E){s.push([h,f,_,E])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(_){d(s[0][3],_)}}function c(h){h.value instanceof $n?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function bv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Dv=="function"?Dv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var Ta=g(()=>{"use strict"});var Ca,hd=g(()=>{"use strict";Ca=t=>t&&typeof t.length=="number"&&typeof t!="function"});function ba(t){return x(t?.then)}var fd=g(()=>{"use strict";we()});function Sa(t){return x(t[Vr])}var pd=g(()=>{"use strict";ya();we()});function Aa(t){return Symbol.asyncIterator&&x(t?.[Symbol.asyncIterator])}var gd=g(()=>{"use strict";we()});function Ra(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}var md=g(()=>{"use strict"});function b0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ma,yd=g(()=>{"use strict";Ma=b0()});function xa(t){return x(t?.[Ma])}var vd=g(()=>{"use strict";yd();we()});function Na(t){return Cv(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield $n(n.read());if(i)return yield $n(void 0);yield yield $n(r)}}finally{n.releaseLock()}})}function Pa(t){return x(t?.getReader)}var Oa=g(()=>{"use strict";Ta();we()});function pe(t){if(t instanceof q)return t;if(t!=null){if(Sa(t))return S0(t);if(Ca(t))return A0(t);if(ba(t))return R0(t);if(Aa(t))return Sv(t);if(xa(t))return M0(t);if(Pa(t))return x0(t)}throw Ra(t)}function S0(t){return new q(e=>{let n=t[Vr]();if(x(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function A0(t){return new q(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function R0(t){return new q(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,pa)})}function M0(t){return new q(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Sv(t){return new q(e=>{N0(t,e).catch(n=>e.error(n))})}function x0(t){return Sv(Na(t))}function N0(t,e){var n,r,i,s;return Tv(this,void 0,void 0,function*(){try{for(n=bv(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}var gt=g(()=>{"use strict";Ta();hd();fd();Je();pd();gd();md();vd();Oa();we();Wl();ya()});function We(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}var zr=g(()=>{"use strict"});function hn(t,e=0){return z((n,r)=>{n.subscribe(G(r,i=>We(r,t,()=>r.next(i),e),()=>We(r,t,()=>r.complete(),e),i=>We(r,t,()=>r.error(i),e)))})}var ka=g(()=>{"use strict";zr();Ee();Ae()});function fn(t,e=0){return z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}var Fa=g(()=>{"use strict";Ee()});function Av(t,e){return pe(t).pipe(fn(e),hn(e))}var Rv=g(()=>{"use strict";gt();ka();Fa()});function Mv(t,e){return pe(t).pipe(fn(e),hn(e))}var xv=g(()=>{"use strict";gt();ka();Fa()});function Nv(t,e){return new q(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}var Pv=g(()=>{"use strict";Je()});function Ov(t,e){return new q(n=>{let r;return We(n,e,()=>{r=t[Ma](),We(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>x(r?.return)&&r.return()})}var kv=g(()=>{"use strict";Je();yd();we();zr()});function La(t,e){if(!t)throw new Error("Iterable cannot be null");return new q(n=>{We(n,e,()=>{let r=t[Symbol.asyncIterator]();We(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}var _d=g(()=>{"use strict";Je();zr()});function Fv(t,e){return La(Na(t),e)}var Lv=g(()=>{"use strict";_d();Oa()});function Vv(t,e){if(t!=null){if(Sa(t))return Av(t,e);if(Ca(t))return Nv(t,e);if(ba(t))return Mv(t,e);if(Aa(t))return La(t,e);if(xa(t))return Ov(t,e);if(Pa(t))return Fv(t,e)}throw Ra(t)}var Uv=g(()=>{"use strict";Rv();xv();Pv();kv();_d();pd();fd();hd();vd();gd();md();Oa();Lv()});function oe(t,e){return e?Vv(t,e):pe(t)}var Gr=g(()=>{"use strict";Uv();gt()});function O(...t){let e=bt(t);return oe(t,e)}var jv=g(()=>{"use strict";qr();Gr()});function Wr(t,e){let n=x(t)?t:()=>t,r=i=>i.error(n());return new q(e?i=>e.schedule(r,0,i):r)}var Bv=g(()=>{"use strict";Je();we()});function Id(t){return!!t&&(t instanceof q||x(t.lift)&&x(t.subscribe))}var $v=g(()=>{"use strict";Je();we()});var Qt,as=g(()=>{"use strict";la();Qt=Or(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"})});function L(t,e){return z((n,r)=>{let i=0;n.subscribe(G(r,s=>{r.next(t.call(e,s,i++))}))})}var cs=g(()=>{"use strict";Ee();Ae()});function O0(t,e){return P0(e)?t(...e):t(e)}function Hv(t){return L(e=>O0(t,e))}var P0,qv=g(()=>{"use strict";cs();({isArray:P0}=Array)});function zv(t){if(t.length===1){let e=t[0];if(k0(e))return{args:e,keys:null};if(U0(e)){let n=V0(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function U0(t){return t&&typeof t=="object"&&F0(t)===L0}var k0,F0,L0,V0,Gv=g(()=>{"use strict";({isArray:k0}=Array),{getPrototypeOf:F0,prototype:L0,keys:V0}=Object});function Wv(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}var Kv=g(()=>{"use strict"});function Va(...t){let e=bt(t),n=wv(t),{args:r,keys:i}=zv(t);if(r.length===0)return oe([],e);let s=new q(j0(r,e,i?o=>Wv(i,o):Ze));return n?s.pipe(Hv(n)):s}function j0(t,e,n=Ze){return r=>{Qv(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Qv(e,()=>{let u=oe(t[c],e),l=!1;u.subscribe(G(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Qv(t,e,n){t?We(n,t,e):e()}var Yv=g(()=>{"use strict";Je();Gv();Gr();Bn();qv();qr();Kv();Ae();zr()});function Zv(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=E=>u<r?_(E):c.push(E),_=E=>{s&&e.next(E),u++;let T=!1;pe(n(E,l++)).subscribe(G(e,A=>{i?.(A),s?f(A):e.next(A)},()=>{T=!0},void 0,()=>{if(T)try{for(u--;c.length&&u<r;){let A=c.shift();o?We(e,o,()=>_(A)):_(A)}h()}catch(A){e.error(A)}}))};return t.subscribe(G(e,f,()=>{d=!0,h()})),()=>{a?.()}}var Jv=g(()=>{"use strict";gt();zr();Ae()});function De(t,e,n=1/0){return x(e)?De((r,i)=>L((s,o)=>e(r,s,i,o))(pe(t(r,i))),n):(typeof e=="number"&&(n=e),z((r,i)=>Zv(r,i,t,n)))}var Ua=g(()=>{"use strict";cs();gt();Ee();Jv();we()});function us(t=1/0){return De(Ze,t)}var wd=g(()=>{"use strict";Ua();Bn()});function Xv(){return us(1)}var e_=g(()=>{"use strict";wd()});function Kr(...t){return Xv()(oe(t,bt(t)))}var Ed=g(()=>{"use strict";e_();qr();Gr()});function ja(t){return new q(e=>{pe(t()).subscribe(e)})}var t_=g(()=>{"use strict";Je();gt()});function Dd(...t){let e=bt(t),n=Ev(t,1/0),r=t;return r.length?r.length===1?pe(r[0]):us(n)(oe(r,e)):Ge}var n_=g(()=>{"use strict";wd();gt();os();qr();Gr()});function rt(t,e){return z((n,r)=>{let i=0;n.subscribe(G(r,s=>t.call(e,s,i++)&&r.next(s)))})}var Ba=g(()=>{"use strict";Ee();Ae()});var r_=g(()=>{"use strict"});function pn(t){return z((e,n)=>{let r=null,i=!1,s;r=e.subscribe(G(n,void 0,void 0,o=>{s=pe(t(o,pn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}var i_=g(()=>{"use strict";gt();Ae();Ee()});function s_(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(G(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}var o_=g(()=>{"use strict";Ae()});function Qr(t,e){return x(e)?De(t,e,1):De(t,1)}var a_=g(()=>{"use strict";Ua();we()});function gn(t){return z((e,n)=>{let r=!1;e.subscribe(G(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}var $a=g(()=>{"use strict";Ee();Ae()});function Yt(t){return t<=0?()=>Ge:z((e,n)=>{let r=0;e.subscribe(G(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}var Td=g(()=>{"use strict";os();Ee();Ae()});function Cd(t){return L(()=>t)}var c_=g(()=>{"use strict";cs()});function Ha(t=B0){return z((e,n)=>{let r=!1;e.subscribe(G(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function B0(){return new Qt}var bd=g(()=>{"use strict";as();Ee();Ae()});function ls(t){return z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}var u_=g(()=>{"use strict";Ee()});function St(t,e){let n=arguments.length>=2;return r=>r.pipe(t?rt((i,s)=>t(i,s,r)):Ze,Yt(1),n?gn(e):Ha(()=>new Qt))}var l_=g(()=>{"use strict";as();Ba();Td();$a();bd();Bn()});function Yr(t){return t<=0?()=>Ge:z((e,n)=>{let r=[];e.subscribe(G(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}var Sd=g(()=>{"use strict";os();Ee();Ae()});function Ad(t,e){let n=arguments.length>=2;return r=>r.pipe(t?rt((i,s)=>t(i,s,r)):Ze,Yr(1),n?gn(e):Ha(()=>new Qt))}var d_=g(()=>{"use strict";as();Ba();Sd();bd();$a();Bn()});function qa(t,e){return z(s_(t,e,arguments.length>=2,!0))}var h_=g(()=>{"use strict";Ee();o_()});function za(...t){let e=bt(t);return z((n,r)=>{(e?Kr(t,n,e):Kr(t,n)).subscribe(r)})}var f_=g(()=>{"use strict";Ed();qr();Ee()});function Xe(t,e){return z((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(G(r,c=>{i?.unsubscribe();let u=0,l=s++;pe(t(c,l)).subscribe(i=G(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}var p_=g(()=>{"use strict";gt();Ee();Ae()});function Rd(t){return z((e,n)=>{pe(t).subscribe(G(n,()=>n.complete(),ns)),!n.closed&&e.subscribe(n)})}var g_=g(()=>{"use strict";Ee();Ae();gt();Kl()});function ge(t,e,n){let r=x(t)||e||n?{next:t,error:e,complete:n}:t;return r?z((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(G(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Ze}var m_=g(()=>{"use strict";we();Ee();Ae();Bn()});var Zr=g(()=>{"use strict";Je();av();Ia();lv();dv();gv();vv();Vn();td();$v();as();Yv();Ed();t_();Gr();n_();jv();Bv();os();r_()});var Jr=g(()=>{"use strict";i_();a_();$a();Ba();u_();l_();d_();cs();c_();Ua();ka();id();h_();f_();Fa();p_();Td();Sd();g_();m_()});function gh(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Md(t){return e=>{setTimeout(t,void 0,e)}}function Qe(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Qe).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function y_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}function Ss(t){return{toString:t}.toString()}function ne(t){for(let e in t)if(t[e]===ne)return e;throw Error("Could not find renamed property on target object.")}function Y_(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Bd(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];W0(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function G0(t){return t===3||t===4||t===6}function W0(t){return t.charCodeAt(0)===64}function mh(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?__(t,n,i,null,e[++r]):__(t,n,i,null,null))}}return t}function __(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}function K0(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if(typeof s=="string"&&i){let o=t[r++];if(n&&s==="class"&&Y_(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;r<t.length&&typeof(s=t[r++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function J_(t){return t.type===4&&t.value!==Z_}function Q0(t,e,n){let r=t.type===4&&!n?Z_:t.value;return e===r}function Y0(t,e,n){let r=4,i=t.attrs||[],s=X0(i),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!mt(r)&&!mt(c))return!1;if(o&&mt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Q0(t,c,n)||c===""&&e.length===1){if(mt(r))return!1;o=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!K0(t.attrs,u,n)){if(mt(r))return!1;o=!0}continue}let l=r&8?"class":c,d=Z0(l,i,J_(t),n);if(d===-1){if(mt(r))return!1;o=!0;continue}if(u!==""){let h;d>s?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&Y_(f,u,0)!==-1||r&2&&u!==h){if(mt(r))return!1;o=!0}}}}return mt(r)||o}function mt(t){return(t&1)===0}function Z0(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return eS(e,t)}function J0(t,e,n=!1){for(let r=0;r<e.length;r++)if(Y0(t,e[r],n))return!0;return!1}function X0(t){for(let e=0;e<t.length;e++){let n=t[e];if(G0(n))return e}return t.length}function eS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function I_(t,e){return t?":not("+e.trim()+")":e}function tS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!mt(o)&&(e+=I_(s,i),i=""),r=o,s=s||!mt(r);n++}return i!==""&&(e+=I_(s,i)),e}function nS(t){return t.map(tS).join(",")}function rS(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!mt(i))break;i=s}r++}return{attrs:e,classes:n}}function gc(t){return Ss(()=>{let e=iI(t),n=se(C({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Q_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Mt.Emulated,styles:t.styles||At,_:null,schemas:t.schemas||null,tView:null,id:""});sI(n);let r=t.dependencies;return n.directiveDefs=E_(r,!1),n.pipeDefs=E_(r,!0),n.id=oS(n),n})}function iS(t){return qn(t)||eI(t)}function sS(t){return t!==null}function Zn(t){return Ss(()=>({type:t.type,bootstrap:t.bootstrap||At,declarations:t.declarations||At,imports:t.imports||At,exports:t.exports||At,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function w_(t,e){if(t==null)return gs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=vn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==vn.None?[r,a]:r,e[s]=o):n[s]=r}return n}function mc(t){return Ss(()=>{let e=iI(t);return sI(e),e})}function X_(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function qn(t){return t[$0]||null}function eI(t){return t[H0]||null}function tI(t){return t[q0]||null}function nI(t){let e=qn(t)||eI(t)||tI(t);return e!==null?e.standalone:!1}function rI(t,e){let n=t[z0]||null;if(!n&&e===!0)throw new Error(`Type ${Qe(t)} does not have '\u0275mod' property.`);return n}function iI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||gs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||At,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:w_(t.inputs,e),outputs:w_(t.outputs),debugInfo:null}}function sI(t){t.features?.forEach(e=>e(t))}function E_(t,e){if(!t)return null;let n=e?tI:iS;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(sS)}function oS(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ni(t){return Array.isArray(t)&&typeof t[aI]=="object"}function nn(t){return Array.isArray(t)&&t[aI]===!0}function cI(t){return(t.flags&4)!==0}function _c(t){return t.componentOffset>-1}function uI(t){return(t.flags&1)===1}function As(t){return!!t.template}function aS(t){return(t[S]&512)!==0}function lS(){return uS}function Jt(t){for(;Array.isArray(t);)t=t[tn];return t}function dS(t,e){return Jt(e[t])}function Pt(t,e){return Jt(e[t.index])}function dI(t,e){return t.data[e]}function hS(t,e){return t[e]}function ci(t,e){let n=e[t];return ni(n)?n:n[tn]}function vh(t){return(t[S]&128)===128}function fS(t){return nn(t[Oe])}function nc(t,e){return e==null?null:t[e]}function hI(t){t[Xr]=0}function pS(t){t[S]&1024||(t[S]|=1024,vh(t)&&ys(t))}function gS(t,e){for(;t>0;)e=e[ai],t--;return e}function _h(t){return!!(t[S]&9216||t[zn]?.dirty)}function $d(t){_h(t)?ys(t):t[S]&64&&(lS()?(t[S]|=1024,ys(t)):t[_n].changeDetectionScheduler?.notify())}function ys(t){t[_n].changeDetectionScheduler?.notify();let e=vs(t);for(;e!==null&&!(e[S]&8192||(e[S]|=8192,!vh(e)));)e=vs(e)}function mS(t,e){if((t[S]&256)===256)throw new R(911,!1);t[fs]===null&&(t[fs]=[]),t[fs].push(e)}function vs(t){let e=t[Oe];return nn(e)?e[Oe]:e}function yS(){return H.lFrame.elementDepthCount}function vS(){H.lFrame.elementDepthCount++}function _S(){H.lFrame.elementDepthCount--}function fI(){return H.bindingsEnabled}function IS(){return H.skipHydrationRootTNode!==null}function wS(t){return H.skipHydrationRootTNode===t}function ES(){H.skipHydrationRootTNode=null}function Me(){return H.lFrame.lView}function Jn(){return H.lFrame.tView}function rn(){let t=pI();for(;t!==null&&t.type===64;)t=t.parent;return t}function pI(){return H.lFrame.currentTNode}function DS(){let t=H.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Rs(t,e){let n=H.lFrame;n.currentTNode=t,n.isParent=e}function gI(){return H.lFrame.isParent}function TS(){H.lFrame.isParent=!1}function CS(){let t=H.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function bS(t){return H.lFrame.bindingIndex=t}function mI(){return H.lFrame.bindingIndex++}function SS(){return H.lFrame.inI18n}function AS(t,e){let n=H.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hd(e)}function RS(){return H.lFrame.currentDirectiveIndex}function Hd(t){H.lFrame.currentDirectiveIndex=t}function yI(t){H.lFrame.currentQueryIndex=t}function MS(t){let e=t[$];return e.type===2?e.declTNode:e.type===1?t[_t]:null}function vI(t,e,n){if(n&V.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&V.Host);)if(i=MS(s),i===null||(s=s[ai],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=H.lFrame=_I();return r.currentTNode=e,r.lView=t,!0}function Ih(t){let e=_I(),n=t[$];H.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _I(){let t=H.lFrame,e=t===null?null:t.child;return e===null?II(t):e}function II(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function wI(){let t=H.lFrame;return H.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}function wh(){let t=wI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xS(t){return(H.lFrame.contextLView=gS(t,H.lFrame.contextLView))[Zt]}function Eh(){return H.lFrame.selectedIndex}function Wn(t){H.lFrame.selectedIndex=t}function NS(){let t=H.lFrame;return dI(t.tView,t.selectedIndex)}function Dh(){H.lFrame.currentNamespace=lI}function DI(){PS()}function PS(){H.lFrame.currentNamespace=null}function OS(){return H.lFrame.currentNamespace}function Th(){return TI}function Ch(t){TI=t}function kS(){return Ic(rn(),Me())}function Ic(t,e){return new wc(Pt(t,e))}function bh(t,e){t.forEach(n=>Array.isArray(n)?bh(n,e):e(n))}function CI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function bI(t){return(t.flags&128)===128}function SI(t){qd=t}function FS(){if(qd!==void 0)return qd;if(typeof document<"u")return document;throw new R(210,!1)}function N(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ec(t){return C_(t,RI)||C_(t,MI)}function AI(t){return Ec(t)!==null}function C_(t,e){return t.hasOwnProperty(e)?t[e]:null}function LS(t){let e=t&&(t[RI]||t[MI]);return e||null}function b_(t){return t&&(t.hasOwnProperty(S_)||t.hasOwnProperty(VS))?t[S_]:null}function xI(t){return t.__forward_ref__=xI,t.toString=function(){return Qe(this())},t}function it(t){return NI(t)?t():t}function NI(t){return typeof t=="function"&&t.hasOwnProperty(jS)&&t.__forward_ref__===xI}function PI(t){return t&&!!t.\u0275providers}function OI(t){return typeof t=="string"?t:t==null?"":String(t)}function BS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():OI(t)}function $S(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new R(-200,t)}function Mh(t,e){throw new R(-201,!1)}function HS(){return zd}function Ke(t){let e=zd;return zd=t,e}function kI(t,e,n){let r=Ec(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&V.Optional)return null;if(e!==void 0)return e;Mh(t,"Injector")}function mn(t){let e=ps;return ps=t,e}function KS(t,e=V.Default){if(ps===void 0)throw new R(-203,!1);return ps===null?kI(t,void 0,e):ps.get(t,e&V.Optional?null:void 0,e)}function j(t,e=V.Default){return(HS()||KS)(it(t),e)}function D(t,e=V.Default){return j(t,Dc(e))}function Dc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Wd(t){let e=[];for(let n=0;n<t.length;n++){let r=it(t[n]);if(Array.isArray(r)){if(r.length===0)throw new R(900,!1);let i,s=V.Default;for(let o=0;o<r.length;o++){let a=r[o],c=YS(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(j(i,s))}else e.push(j(r))}return e}function QS(t,e){return t[Gd]=e,t.prototype[Gd]=e,t}function YS(t){return t[Gd]}function ZS(t,e,n,r){let i=t[ic];throw e[A_]&&i.unshift(e[A_]),t.message=JS(`
`+t.message,i,n,r),t[zS]=i,t[ic]=null,t}function JS(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==WS?t.slice(2):t;let i=Qe(e);if(Array.isArray(e))i=e.map(Qe).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Qe(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(GS,`
  `)}`}function xh(t,e,n=!1){return tA(t,e,n)}function nA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function rA(t,e,n){return Ss(()=>{let r=nA(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(Ga)?c[Ga]:Object.defineProperty(c,Ga,{value:[]})[Ga];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Kn(t,e){let n=t.hasOwnProperty(Ja);return n?t[Ja]:null}function Tc(t){return{\u0275providers:t}}function Cc(...t){return{\u0275providers:VI(!0,t),\u0275fromNgModule:!0}}function VI(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return bh(e,o=>{let a=o;Kd(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&UI(i,s),n}function UI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Nh(i,s=>{e(s,r)})}}function Kd(t,e,n,r){if(t=it(t),!t)return!1;let i=null,s=b_(t),o=!s&&qn(t);if(!s&&!o){let c=t.ngModule;if(s=b_(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Kd(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{bh(s.imports,l=>{Kd(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&UI(u,e)}if(!a){let u=Kn(i)||(()=>new i);e({provide:i,useFactory:u,deps:At},i),e({provide:LI,useValue:i,multi:!0},i),e({provide:oi,useValue:()=>j(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;Nh(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Nh(t,e){for(let n of t)PI(n)&&(n=n.\u0275providers),Array.isArray(n)?Nh(n,e):e(n)}function jI(t){return t!==null&&typeof t=="object"&&iA in t}function sA(t){return!!(t&&t.useExisting)}function oA(t){return!!(t&&t.useFactory)}function Qd(t){return typeof t=="function"}function Ph(){return Nd===void 0&&(Nd=new sc),Nd}function Yd(t){let e=Ec(t),n=e!==null?e.factory:Kn(t);if(n!==null)return n;if(t instanceof U)throw new R(204,!1);if(t instanceof Function)return cA(t);throw new R(204,!1)}function cA(t){if(t.length>0)throw new R(204,!1);let n=LS(t);return n!==null?()=>n.factory(t):()=>new t}function uA(t){if(jI(t))return ei(void 0,t.useValue);{let e=lA(t);return ei(e,Wa)}}function lA(t,e,n){let r;if(Qd(t)){let i=it(t);return Kn(i)||Yd(i)}else if(jI(t))r=()=>it(t.useValue);else if(oA(t))r=()=>t.useFactory(...Wd(t.deps||[]));else if(sA(t))r=()=>j(it(t.useExisting));else{let i=it(t&&(t.useClass||t.provide));if(dA(t))r=()=>new i(...Wd(t.deps));else return Kn(i)||Yd(i)}return r}function ei(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function dA(t){return!!t.deps}function hA(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function fA(t){return typeof t=="function"||typeof t=="object"&&t instanceof U}function Zd(t,e){for(let n of t)Array.isArray(n)?Zd(n,e):n&&PI(n)?Zd(n.\u0275providers,e):e(n)}function er(t,e){t instanceof Is&&t.assertNotDestroyed();let n,r=mn(t),i=Ke(void 0);try{return e()}finally{mn(r),Ke(i)}}function pA(t){return typeof t=="function"}function BI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Sc(){return $I}function $I(t){return t.type.prototype.ngOnChanges&&(t.setInput=mA),gA}function gA(){let t=qI(this),e=t?.current;if(e){let n=t.previous;if(n===gs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function mA(t,e,n,r,i){let s=this.declaredInputs[r],o=qI(t)||yA(t,{previous:gs,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new ws(u&&u.currentValue,n,c===gs),BI(t,e,i,n)}function qI(t){return t[HI]||null}function yA(t,e){return t[HI]=e}function vA(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=$I(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Oh(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Ka(t,e,n){zI(t,e,3,n)}function Qa(t,e,n,r){(t[S]&3)===n&&zI(t,e,n,r)}function Pd(t,e){let n=t[S];(n&3)===e&&(n&=16383,n+=1,t[S]=n)}function zI(t,e,n,r){let i=r!==void 0?t[Xr]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Xr]+=65536),(a<s||s==-1)&&(_A(t,n,e,c),t[Xr]=(t[Xr]&4294901760)+c+2),c++}function M_(t,e){yn(4,t,e);let n=$e(null);try{e.call(t)}finally{$e(n),yn(5,t,e)}}function _A(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[S]>>14<t[Xr]>>16&&(t[S]&3)===e&&(t[S]+=16384,M_(a,s)):M_(a,s)}function IA(t){return t instanceof Es}function wA(t){return(t.flags&8)!==0}function EA(t){return(t.flags&16)!==0}function GI(t){return t!==ri}function oc(t){return t&32767}function DA(t){return t>>16}function ac(t,e){let n=DA(t),r=e;for(;n>0;)r=r[ai],n--;return r}function cc(t){let e=Jd;return Jd=t,e}function bA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(hs)&&(r=n[hs]),r==null&&(r=n[hs]=CA++);let i=r&WI,s=1<<i;e.data[t+(i>>KI)]|=s}function QI(t,e){let n=YI(t,e);if(n!==-1)return n;let r=e[$];r.firstCreatePass&&(t.injectorIndex=e.length,Od(r.data,t),Od(e,null),Od(r.blueprint,null));let i=kh(t,e),s=t.injectorIndex;if(GI(i)){let o=oc(i),a=ac(i,e),c=a[$].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Od(t,e){t.push(0,0,0,0,0,0,0,0,e)}function YI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function kh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=tw(i),r===null)return ri;if(n++,i=i[ai],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ri}function SA(t,e,n){bA(t,e,n)}function ZI(t,e,n){if(n&V.Optional||t!==void 0)return t;Mh(e,"NodeInjector")}function JI(t,e,n,r){if(n&V.Optional&&r===void 0&&(r=null),!(n&(V.Self|V.Host))){let i=t[ii],s=Ke(void 0);try{return i?i.get(e,r,n&V.Optional):kI(e,r,n&V.Optional)}finally{Ke(s)}}return ZI(r,e,n)}function XI(t,e,n,r=V.Default,i){if(t!==null){if(e[S]&2048&&!(r&V.Self)){let o=NA(t,e,n,r,Rt);if(o!==Rt)return o}let s=ew(t,e,n,r,Rt);if(s!==Rt)return s}return JI(e,n,r,i)}function ew(t,e,n,r,i){let s=MA(n);if(typeof s=="function"){if(!vI(e,t,r))return r&V.Host?ZI(i,n,r):JI(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&V.Optional))Mh(n);else return o}finally{EI()}}else if(typeof s=="number"){let o=null,a=YI(t,e),c=ri,u=r&V.Host?e[xt][_t]:null;for((a===-1||r&V.SkipSelf)&&(c=a===-1?kh(t,e):e[a+8],c===ri||!N_(r,!1)?a=-1:(o=e[$],a=oc(c),e=ac(c,e)));a!==-1;){let l=e[$];if(x_(s,a,l.data)){let d=AA(a,e,n,o,r,u);if(d!==Rt)return d}c=e[a+8],c!==ri&&N_(r,e[$].data[a+8]===u)&&x_(s,a,e)?(o=l,a=oc(c),e=ac(c,e)):a=-1}}return i}function AA(t,e,n,r,i,s){let o=e[$],a=o.data[t+8],c=r==null?_c(a)&&Jd:r!=o&&(a.type&3)!==0,u=i&V.Host&&s===a,l=RA(a,o,n,c,u);return l!==null?Ds(e,o,l,a):Rt}function RA(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let _=o[f];if(f<c&&n===_||f>=c&&_.type===n)return f}if(i){let f=o[c];if(f&&As(f)&&f.type===n)return c}return null}function Ds(t,e,n,r){let i=t[n],s=e.data;if(IA(i)){let o=i;o.resolving&&$S(BS(s[n]));let a=cc(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?Ke(o.injectImpl):null,l=vI(t,r,V.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&vA(n,s[n],e)}finally{u!==null&&Ke(u),cc(a),o.resolving=!1,EI()}}return i}function MA(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(hs)?t[hs]:void 0;return typeof e=="number"?e>=0?e&WI:xA:e}function x_(t,e,n){let r=1<<t;return!!(n[e+(t>>KI)]&r)}function N_(t,e){return!(t&V.Self)&&!(t&V.Host&&e)}function xA(){return new Hn(rn(),Me())}function Fh(t){return Ss(()=>{let e=t.prototype.constructor,n=e[Ja]||Xd(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ja]||Xd(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Xd(t){return NI(t)?()=>{let e=Xd(it(t));return e&&e()}:Kn(t)}function NA(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[S]&2048&&!(o[S]&512);){let a=ew(s,o,n,r|V.Self,Rt);if(a!==Rt)return a;let c=s.parent;if(!c){let u=o[oI];if(u){let l=u.get(n,Rt,r);if(l!==Rt)return l}c=tw(o),o=o[ai]}s=c}return i}function tw(t){let e=t[$],n=e.type;return n===2?e.declTNode:n===1?t[_t]:null}function P_(t,e=null,n=null,r){let i=nw(t,e,n,r);return i.resolveInjectorInitializers(),i}function nw(t,e=null,n=null,r,i=new Set){let s=[n||At,Cc(t)];return r=r||(typeof t=="object"?void 0:Qe(t)),new Is(s,e||Ph(),r||null,i)}function kd(t){return t[PA]}function FA(){return kA++}function LA(t){sw.set(t[vc],t)}function VA(t){sw.delete(t[vc])}function Qn(t,e){ni(e)?(t[O_]=e[vc],LA(e)):t[O_]=e}function ow(t){return t instanceof Function?t():t}function Lh(t,e){return UA(t,e)}function ti(t,e,n,r,i){if(r!=null){let s,o=!1;nn(r)?s=r:ni(r)&&(o=!0,r=r[tn]);let a=Jt(r);t===0&&n!==null?i==null?dw(e,n,a):uc(e,n,a,i||null,!0):t===1&&n!==null?uc(e,n,a,i||null,!0):t===2?nR(e,a,o):t===3&&e.destroyNode(a),s!=null&&iR(e,t,s,n,i)}}function jA(t,e){return t.createText(e)}function BA(t,e,n){t.setValue(e,n)}function aw(t,e,n){return t.createElement(e,n)}function $A(t,e){cw(t,e),e[tn]=null,e[_t]=null}function HA(t,e,n,r,i,s){r[tn]=i,r[_t]=e,Ac(t,r,n,1,i,s)}function cw(t,e){Ac(t,e,e[et],2,null,null)}function qA(t){let e=t[ms];if(!e)return Fd(t[$],t);for(;e;){let n=null;if(ni(e))n=e[ms];else{let r=e[st];r&&(n=r)}if(!n){for(;e&&!e[vt]&&e!==t;)ni(e)&&Fd(e[$],e),e=e[Oe];e===null&&(e=t),ni(e)&&Fd(e[$],e),n=e&&e[vt]}e=n}}function zA(t,e,n,r){let i=st+r,s=n.length;r>0&&(n[i-1][vt]=e),r<s-st?(e[vt]=n[i],CI(n,st+r,e)):(n.push(e),e[vt]=null),e[Oe]=n;let o=e[yc];o!==null&&n!==o&&GA(o,e);let a=e[si];a!==null&&a.insertView(t),$d(e),e[S]|=128}function GA(t,e){let n=t[tc],i=e[Oe][Oe][xt];e[xt]!==i&&(t[S]|=yh.HasTransplantedViews),n===null?t[tc]=[e]:n.push(e)}function uw(t,e){let n=t[tc],r=n.indexOf(e);n.splice(r,1)}function eh(t,e){if(t.length<=st)return;let n=st+e,r=t[n];if(r){let i=r[yc];i!==null&&i!==t&&uw(i,r),e>0&&(t[n-1][vt]=r[vt]);let s=rc(t,st+e);$A(r[$],r);let o=s[si];o!==null&&o.detachView(s[$]),r[Oe]=null,r[vt]=null,r[S]&=-129}return r}function lw(t,e){if(!(e[S]&256)){let n=e[et];n.destroyNode&&Ac(t,e,n,3,null,null),qA(e)}}function Fd(t,e){if(!(e[S]&256)){e[S]&=-129,e[S]|=256,e[zn]&&Yy(e[zn]),KA(t,e),WA(t,e),e[$].type===1&&e[et].destroy();let n=e[yc];if(n!==null&&nn(e[Oe])){n!==e[Oe]&&uw(n,e);let r=e[si];r!==null&&r.detachView(t)}VA(e)}}function WA(t,e){let n=t.cleanup,r=e[D_];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[D_]=null);let i=e[fs];if(i!==null){e[fs]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function KA(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Es)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];yn(4,a,c);try{c.call(a)}finally{yn(5,a,c)}}else{yn(4,i,s);try{s.call(i)}finally{yn(5,i,s)}}}}}function QA(t,e,n){return YA(t,e.parent,n)}function YA(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[tn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Mt.None||s===Mt.Emulated)return null}return Pt(r,n)}}function uc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function dw(t,e,n){t.appendChild(e,n)}function k_(t,e,n,r,i){r!==null?uc(t,e,n,r,i):dw(t,e,n)}function ZA(t,e,n,r){t.removeChild(e,n,r)}function Vh(t,e){return t.parentNode(e)}function JA(t,e){return t.nextSibling(e)}function XA(t,e,n){return tR(t,e,n)}function eR(t,e,n){return t.type&40?Pt(t,n):null}function Uh(t,e,n,r){let i=QA(t,r,e),s=e[et],o=r.parent||e[_t],a=XA(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)k_(s,i,n[c],a,!1);else k_(s,i,n,a,!1);F_!==void 0&&F_(s,r,e,n,i)}function Ya(t,e){if(e!==null){let n=e.type;if(n&3)return Pt(e,t);if(n&4)return th(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ya(t,r);{let i=t[e.index];return nn(i)?th(-1,i):Jt(i)}}else{if(n&32)return Lh(e,t)()||Jt(t[e.index]);{let r=hw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=vs(t[xt]);return Ya(i,r)}else return Ya(t,e.next)}}}return null}function hw(t,e){if(e!==null){let r=t[xt][_t],i=e.projection;return r.projection[i]}return null}function th(t,e){let n=st+t+1;if(n<e.length){let r=e[n],i=r[$].firstChild;if(i!==null)return Ya(r,i)}return e[Gn]}function nR(t,e,n){let r=Vh(t,e);r&&ZA(t,r,e,n)}function jh(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Qn(Jt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)jh(t,e,n.child,r,i,s,!1),ti(e,t,i,a,s);else if(c&32){let u=Lh(n,r),l;for(;l=u();)ti(e,t,i,l,s);ti(e,t,i,a,s)}else c&16?rR(t,e,r,n,i,s):ti(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ac(t,e,n,r,i,s){jh(n,r,t.firstChild,e,i,s,!1)}function rR(t,e,n,r,i,s){let o=n[xt],c=o[_t].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];ti(e,t,i,l,s)}else{let u=c,l=o[Oe];bI(r)&&(u.flags|=128),jh(t,e,u,l,i,s,!0)}}function iR(t,e,n,r,i){let s=n[Gn],o=Jt(n);s!==o&&ti(e,t,r,s,i);for(let a=st;a<n.length;a++){let c=n[a];Ac(c[$],c,t,e,r,s)}}function sR(t,e,n){t.setAttribute(e,"style",n)}function fw(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function pw(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Bd(t,e,r),i!==null&&fw(t,e,i),s!==null&&sR(t,e,s)}function Bh(t=1){gw(Jn(),Me(),Eh()+t,!1)}function gw(t,e,n,r){if(!r)if((e[S]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ka(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Qa(e,s,0,n)}Wn(n)}function kt(t,e=V.Default){let n=Me();if(n===null)return j(t,e);let r=rn();return XI(r,n,it(t),e)}function mw(t,e,n,r,i,s){let o=$e(null);try{let a=null;i&vn.SignalBased&&(a=e[r][Gy]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&vn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):BI(e,a,r,s)}finally{$e(o)}}function oR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Wn(~i);else{let s=i,o=n[++r],a=n[++r];AS(o,s);let c=e[s];a(2,c)}}}finally{Wn(-1)}}function Rc(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[tn]=i,d[S]=r|4|128|8|64,(u!==null||t&&t[S]&2048)&&(d[S]|=2048),hI(d),d[Oe]=d[ai]=t,d[Zt]=n,d[_n]=o||t&&t[_n],d[et]=a||t&&t[et],d[ii]=c||t&&t[ii]||null,d[_t]=s,d[vc]=FA(),d[Xa]=l,d[oI]=u,d[xt]=e.type==2?t[xt]:d,d}function Mc(t,e,n,r,i){let s=t.data[e];if(s===null)s=aR(t,e,n,r,i),SS()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=DS();s.injectorIndex=o===null?-1:o.injectorIndex}return Rs(s,!0),s}function aR(t,e,n,r,i){let s=pI(),o=gI(),a=o?s:s&&s.parent,c=t.data[e]=hR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function yw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function vw(t,e,n,r,i){let s=Eh(),o=r&2;try{Wn(-1),o&&e.length>Nt&&gw(t,e,Nt,!1),yn(o?2:0,i),n(r,i)}finally{Wn(s),yn(o?3:1,i)}}function _w(t,e,n){if(cI(e)){let r=$e(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{$e(r)}}}function Iw(t,e,n){fI()&&(_R(t,e,n,Pt(n,e)),(n.flags&64)===64&&Cw(t,e,n))}function ww(t,e,n=Pt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Ew(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=$h(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function $h(t,e,n,r,i,s,o,a,c,u,l){let d=Nt+r,h=d+i,f=cR(d,h),_=typeof u=="function"?u():u;return f[$]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:l}}function cR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ms);return n}function uR(t,e,n,r){let s=r.get(OA,iw)||n===Mt.ShadowDom,o=t.selectRootElement(e,s);return lR(o),o}function lR(t){dR(t)}function hR(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return IS()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function L_(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=vn.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?V_(r,n,u,a,c):V_(r,n,u,a)}return r}function V_(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function fR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,_=h?h.outputs:null;c=L_(0,d.inputs,l,c,f),u=L_(1,d.outputs,l,u,_);let E=c!==null&&o!==null&&!J_(e)?AR(c,l,o):null;a.push(E)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function pR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function gR(t,e,n,r,i,s,o,a){let c=Pt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Hh(t,n,l,r,i),_c(e)&&mR(n,e.index)):e.type&3?(r=pR(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function mR(t,e){let n=ci(e,t);n[S]&16||(n[S]|=64)}function Dw(t,e,n,r){if(fI()){let i=r===null?null:{"":-1},s=wR(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Tw(t,e,n,o,i,a),i&&ER(n,r,i)}n.mergedAttrs=mh(n.mergedAttrs,n.attrs)}function Tw(t,e,n,r,i,s){for(let u=0;u<r.length;u++)SA(QI(n,e),t,r[u].type);TR(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=yw(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=mh(n.mergedAttrs,l.hostAttrs),CR(t,n,e,c,l),DR(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}fR(t,n,s)}function yR(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;vR(o)!=a&&o.push(a),o.push(n,r,s)}}function vR(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function _R(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;_c(n)&&bR(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||QI(n,e),Qn(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=Ds(e,t,a,n);if(Qn(u,e),o!==null&&SR(e,a-i,u,c,n,o),As(c)){let l=ci(n.index,e);l[Zt]=Ds(e,t,a,n)}}}function Cw(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=RS();try{Wn(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Hd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&IR(c,u)}}finally{Wn(-1),Hd(o)}}function IR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function wR(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(J0(e,o.selectors,!1))if(r||(r=[]),As(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;nh(t,e,c)}else r.unshift(o),nh(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function nh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ER(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new R(-301,!1);r.push(e[i],s)}}}function DR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;As(e)&&(n[""]=t)}}function TR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function CR(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Kn(i.type,!0)),o=new Es(s,As(i),kt);t.blueprint[r]=o,n[r]=o,yR(t,e,r,yw(t,n,i.hostVars,Ms),i)}function bR(t,e,n){let r=Pt(e,t),i=Ew(n),s=t[_n].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=xc(t,Rc(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function SR(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];mw(r,n,c,u,l,d)}}function AR(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function bw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Sw(t,e){let n=t.contentQueries;if(n!==null){let r=$e(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];yI(s),a.contentQueries(2,e[o],o)}}}finally{$e(r)}}}function xc(t,e){return t[ms]?t[T_][vt]=e:t[ms]=e,t[T_]=e,e}function rh(t,e,n){yI(0);let r=$e(null);try{e(t,n)}finally{$e(r)}}function RR(t,e){let n=t[ii],r=n?n.get(Xt,null):null;r&&r.handleError(e)}function Hh(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],l=t.data[o];mw(l,u,r,a,c,i)}}function MR(t,e,n){let r=dS(e,t);BA(t[et],r,n)}function xR(t,e){let n=ci(e,t),r=n[$];NR(r,n);let i=n[tn];i!==null&&n[Xa]===null&&(n[Xa]=xh(i,n[ii])),qh(r,n,n[Zt])}function NR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function qh(t,e,n){Ih(e);try{let r=t.viewQuery;r!==null&&rh(1,r,n);let i=t.template;i!==null&&vw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[si]?.finishViewCreation(t),t.staticContentQueries&&Sw(t,e),t.staticViewQueries&&rh(2,t.viewQuery,n);let s=t.components;s!==null&&PR(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[S]&=-5,wh()}}function PR(t,e){for(let n=0;n<e.length;n++)xR(t,e[n])}function OR(t,e,n,r){let i=e.tView,o=t[S]&4096?4096:16,a=Rc(t,i,n,o,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[yc]=c;let u=t[si];return u!==null&&(a[si]=u.createEmbeddedView(i)),qh(i,a,n),a}function U_(t,e){return!e||e.firstChild===null||bI(t)}function kR(t,e,n,r=!0){let i=e[$];if(zA(i,e,t,n),r){let o=th(n,t),a=e[et],c=Vh(a,t[Gn]);c!==null&&HA(i,t[_t],a,e,c,o)}let s=e[Xa];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function lc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Jt(s)),nn(s)&&FR(s,r);let o=n.type;if(o&8)lc(t,e,n.child,r);else if(o&32){let a=Lh(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=hw(e,n);if(Array.isArray(a))r.push(...a);else{let c=vs(e[xt]);lc(c[$],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function FR(t,e){for(let n=st;n<t.length;n++){let r=t[n],i=r[$].firstChild;i!==null&&lc(r[$],r,i,e)}t[Gn]!==t[tn]&&e.push(t[Gn])}function LR(t){return t[zn]??VR(t)}function VR(t){let e=Aw.pop()??Object.create(jR);return e.lView=t,e}function UR(t){t.lView[zn]!==t&&(t.lView=null,Aw.push(t))}function Rw(t){return xw(t[ms])}function Mw(t){return xw(t[vt])}function xw(t){for(;t!==null&&!nn(t);)t=t[vt];return t}function Pw(t,e=!0,n=0){let r=t[_n],i=r.rendererFactory,s=!1;s||i.begin?.();try{BR(t,n)}catch(o){throw e&&RR(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function BR(t,e){ih(t,e);let n=0;for(;_h(t);){if(n===Nw)throw new R(103,!1);n++,ih(t,1)}}function $R(t,e,n,r){let i=e[S];if((i&256)===256)return;let s=!1;!s&&e[_n].inlineEffectRunner?.flush(),Ih(e);let o=null,a=null;!s&&HR(t)&&(a=LR(e),o=Ky(a));try{hI(e),bS(t.bindingStartIndex),n!==null&&vw(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Ka(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Qa(e,d,0,null),Pd(e,0)}if(qR(e),Ow(e,0),t.contentQueries!==null&&Sw(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Ka(e,d)}else{let d=t.contentHooks;d!==null&&Qa(e,d,1),Pd(e,1)}oR(t,e);let u=t.components;u!==null&&Fw(e,u,0);let l=t.viewQuery;if(l!==null&&rh(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Ka(e,d)}else{let d=t.viewHooks;d!==null&&Qa(e,d,2),Pd(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[xd]){for(let d of e[xd])d();e[xd]=null}s||(e[S]&=-73)}catch(c){throw ys(e),c}finally{a!==null&&(Qy(a,o),UR(a)),wh()}}function HR(t){return t.type!==2}function Ow(t,e){for(let n=Rw(t);n!==null;n=Mw(n))for(let r=st;r<n.length;r++){let i=n[r];kw(i,e)}}function qR(t){for(let e=Rw(t);e!==null;e=Mw(e)){if(!(e[S]&yh.HasTransplantedViews))continue;let n=e[tc];for(let r=0;r<n.length;r++){let i=n[r],s=i[Oe];pS(i)}}}function zR(t,e,n){let r=ci(e,t);kw(r,n)}function kw(t,e){vh(t)&&ih(t,e)}function ih(t,e){let r=t[$],i=t[S],s=t[zn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&$l(s)),s&&(s.dirty=!1),t[S]&=-9217,o)$R(r,t,r.template,t[Zt]);else if(i&8192){Ow(t,1);let a=r.components;a!==null&&Fw(t,a,1)}}function Fw(t,e,n){for(let r=0;r<e.length;r++)zR(t,e[r],n)}function Lw(t){for(t[_n].changeDetectionScheduler?.notify();t;){t[S]|=64;let e=vs(t);if(aS(t)&&!e)return t;t=e}return null}function KR(){return QR(rn(),Me())}function QR(t,e){return t.type&4?new WR(e,t,Ic(t,e)):null}function j_(t,e){return YR(t,e)}function ZR(t){let e=Error(`No component factory found for ${Qe(t)}.`);return e[JR]=t,e}function Gh(t){let e=$e(null);try{return t()}finally{$e(e)}}function eM(t){return tM(rn(),Me(),(t&16)===16)}function tM(t,e,n){if(_c(t)&&!n){let r=ci(t.index,e);return new Yn(r,r)}else if(t.type&47){let r=e[xt];return new Yn(r,e)}return null}function Vw(t){B_.has(t)||(B_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function $_(...t){}function nM(){let t=typeof ds.requestAnimationFrame=="function",e=ds[t?"requestAnimationFrame":"setTimeout"],n=ds[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}function Wh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function iM(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ds,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ch(t),t.isCheckStableRunning=!0,Wh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ch(t))}function sM(t){let e=()=>{iM(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(oM(a))return n.invokeTask(i,s,o,a);try{return H_(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),q_(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return H_(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),q_(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,ch(t),Wh(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function ch(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function H_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function q_(t){t._nesting--,Wh(t)}function oM(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function uh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=y_(i,a);else if(s==2){let c=a,u=e[++o];r=y_(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function z_(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function aM(t){let e=t.toLowerCase();return e==="svg"?lI:e==="math"?cS:null}function cM(t,e){let n=t[$],r=Nt;return t[r]=e,Mc(n,r,2,"#host",null)}function uM(t,e,n,r,i,s,o){let a=i[$];lM(r,t,e,o);let c=null;e!==null&&(c=xh(e,i[ii]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Rc(i,Ew(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&nh(a,t,r.length-1),xc(i,d),i[t.index]=d}function lM(t,e,n,r){for(let i of t)e.mergedAttrs=mh(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(uh(e,e.mergedAttrs,!0),n!==null&&pw(r,n,e))}function dM(t,e,n,r,i,s){let o=rn(),a=i[$],c=Pt(o,i);Tw(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=Ds(i,a,d,o);Qn(h,i)}Cw(a,i,o),c&&Qn(c,i);let u=Ds(i,a,o.directiveStart+o.componentOffset,o);if(t[Zt]=i[Zt]=u,s!==null)for(let l of s)l(u,e);return _w(a,o,i),u}function hM(t,e,n,r){if(r)Bd(t,n,["ng-version","17.2.2"]);else{let{attrs:i,classes:s}=rS(e.selectors[0]);i&&Bd(t,n,i),s&&s.length>0&&fw(t,n,s.join(" "))}}function fM(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function pM(){let t=rn();Oh(Me()[$],t)}function gM(){let t=rn();return yM(t,Me())}function G_(t){return t[ec]}function Vd(t){return t[ec]||(t[ec]=[])}function yM(t,e){let n,r=e[t.index];return nn(r)?n=r:(n=bw(r,e,null,t),e[t.index]=n,xc(e,n)),_M(n,e,t,r),new jw(n,t,e)}function vM(t,e){let n=t[et],r=n.createComment(""),i=Pt(e,t),s=Vh(n,i);return uc(n,s,r,JA(n,i),!1),r}function wM(t,e,n){return IM(t,e,n)}function EM(t,e,n,r){if(t[Gn])return;let i;n.type&8?i=Jt(r):i=vM(e,n),t[Gn]=i}function Kh(t,e,n=null){return new fc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function DM(t,e,n){return t[e]=n}function Qh(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function TM(t,e,n,r,i,s,o,a,c){let u=e.consts,l=Mc(e,t,4,o||null,nc(u,a));Dw(e,n,l,nc(u,c)),Oh(e,l);let d=l.tView=$h(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Yh(t,e,n,r,i,s,o,a){let c=Me(),u=Jn(),l=t+Nt,d=u.firstCreatePass?TM(l,u,c,e,n,r,i,s,o):u.data[l];Rs(d,!1);let h=CM(u,c,d,t);Th()&&Uh(u,c,h,d),Qn(h,c);let f=bw(h,c,h,d);return c[l]=f,xc(c,f),wM(f,d,c),uI(d)&&Iw(u,c,d),o!=null&&ww(c,d,a),Yh}function bM(t,e,n,r){return Ch(!0),e[et].createComment("")}function SM(t,e,n,r){return Qh(t,mI(),n)?e+OI(n)+r:Ms}function Zh(t,e,n){let r=Me(),i=mI();if(Qh(r,i,e)){let s=Jn(),o=NS();gR(s,o,r,t,e,r[et],n,!1)}return Zh}function W_(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Hh(t,n,s[o],o,r)}function AM(t,e,n,r,i,s){let o=e.consts,a=nc(o,i),c=Mc(e,t,2,r,a);return Dw(e,n,c,nc(o,s)),c.attrs!==null&&uh(c,c.attrs,!1),c.mergedAttrs!==null&&uh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ui(t,e,n,r){let i=Me(),s=Jn(),o=Nt+t,a=i[et],c=s.firstCreatePass?AM(o,s,i,e,n,r):s.data[o],u=RM(s,i,c,a,e,t);i[o]=u;let l=uI(c);return Rs(c,!0),pw(a,u,c),(c.flags&32)!==32&&Th()&&Uh(s,i,u,c),yS()===0&&Qn(u,i),vS(),l&&(Iw(s,i,c),_w(s,c,i)),r!==null&&ww(i,c),ui}function li(){let t=rn();gI()?TS():(t=t.parent,Rs(t,!1));let e=t;wS(e)&&ES(),_S();let n=Jn();return n.firstCreatePass&&(Oh(n,t),cI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&wA(e)&&W_(n,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&EA(e)&&W_(n,e,Me(),e.stylesWithoutHost,!1),li}function di(t,e,n,r){return ui(t,e,n,r),li(),di}function xM(t){typeof t=="string"&&(MM=t.toLowerCase().replace(/_/g,"-"))}function Bw(t=1){return xS(t)}function NM(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function $w(t,e=""){let n=Me(),r=Jn(),i=t+Nt,s=r.firstCreatePass?Mc(r,i,1,e,null):r.data[i],o=PM(r,n,s,e,t);n[i]=o,Th()&&Uh(r,n,o,s),Rs(s,!1)}function Jh(t,e,n){let r=Me(),i=SM(r,t,e,n);return i!==Ms&&MR(r,Eh(),i),Jh}function Pc(t){Vw("NgStandalone"),t.getStandaloneInjector=e=>e.get(OM).getOrCreateStandaloneInjector(t)}function kM(t,e){let n=t[e];return n===Ms?void 0:n}function FM(t,e,n,r,i,s){let o=e+n;return Qh(t,o,i)?DM(t,o+1,s?r.call(s,i):r(i)):kM(t,o+1)}function Hw(t,e){let n=Jn(),r,i=t+Nt;n.firstCreatePass?(r=LM(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Kn(r.type,!0)),o,a=Ke(kt);try{let c=cc(!1),u=s();return cc(c),NM(n,Me(),i,u),u}finally{Ke(a)}}function LM(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function qw(t,e,n){let r=t+Nt,i=Me(),s=hS(i,r);return VM(i,r)?FM(i,CS(),e,s.transform,n,s):s.transform(n)}function VM(t,e){return t[$].data[e].pure}function hi(t){return!!t&&typeof t.then=="function"}function Xh(t){return!!t&&typeof t.subscribe=="function"}function UM(){Zy(()=>{throw new R(600,!1)})}function jM(t){return t.isBoundToModule}function BM(t,e,n){try{let r=n();return hi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function Ud(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function K_(t){return _h(t)}function HM(t){return[{provide:te,useFactory:t},{provide:oi,multi:!0,useFactory:()=>{let e=D($M,{optional:!0});return()=>e.initialize()}},{provide:oi,multi:!0,useFactory:()=>{let e=D(WM);return()=>{e.initialize()}}},{provide:rw,useFactory:qM}]}function qM(){let t=D(te),e=D(Xt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function zM(t){let e=HM(()=>new te(GM(t)));return Tc([[],e])}function GM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}function KM(){return typeof $localize<"u"&&$localize.locale||pc}function QM(t=[],e){return It.create({name:e,providers:[{provide:bc,useValue:"platform"},{provide:Qw,useValue:new Set([()=>Za=null])},...t]})}function YM(t=[]){if(Za)return Za;let e=QM(t);return Za=e,UM(),ZM(e),e}function ZM(t){t.get(Ah,null)?.forEach(n=>n())}function Yw(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=YM(r),s=[zM(),...n||[]],a=new fc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(te);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Xt,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(Qw);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),BM(u,c,()=>{let f=a.get(Kw);return f.runInitializers(),f.donePromise.then(()=>{let _=a.get(nf,pc);xM(_||pc);let E=a.get(rr);return e!==void 0&&E.bootstrap(e),E})})})}catch(e){return Promise.reject(e)}}var R,jd,yt,V,Q_,Mt,ds,gs,At,$0,H0,q0,z0,Ja,hs,v_,vn,Z_,tn,$,S,Oe,vt,_t,Xa,D_,Zt,ii,_n,et,ms,T_,ai,xt,yc,Xr,si,vc,oI,fs,xd,zn,Nt,aI,Gn,ec,tc,st,yh,lI,cS,uS,H,EI,TI,wc,qd,RI,S_,MI,VS,U,Sh,US,Ah,wn,Rh,jS,zd,qS,_s,Gd,ic,zS,GS,WS,A_,ps,XS,eA,tA,Ga,Ot,oi,FI,LI,sc,iA,bc,Wa,aA,Nd,ot,Is,ws,HI,R_,yn,ri,Es,Jd,TA,WI,KI,CA,Rt,Hn,It,PA,Xt,rw,iw,OA,sw,kA,O_,tr,UA,tR,F_,Ms,dR,Aw,jR,Nw,Yn,zh,GR,WR,BH,YR,sh,oh,dc,JR,ah,nr,Ts,XR,Ld,Ft,B_,te,rM,Uw,hc,lh,Cs,dh,xs,mM,jw,_M,IM,In,bs,hh,fh,fc,Nc,CM,RM,pc,MM,PM,OM,en,zw,Oc,Gw,Ww,Kw,ef,rr,ph,tf,$M,WM,nf,Qw,Za,ke=g(()=>{"use strict";Jy();Zr();Jr();R=class extends Error{constructor(e,n){super(gh(e,n)),this.code=e}};jd=class extends He{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Md(s),i&&(i=Md(i)),o&&(o=Md(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof le&&e.add(a),a}};yt=jd,V=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(V||{});Q_=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Q_||{}),Mt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Mt||{});ds=globalThis,gs={},At=[];$0=ne({\u0275cmp:ne}),H0=ne({\u0275dir:ne}),q0=ne({\u0275pipe:ne}),z0=ne({\u0275mod:ne}),Ja=ne({\u0275fac:ne}),hs=ne({__NG_ELEMENT_ID__:ne}),v_=ne({__NG_ENV_ID__:ne}),vn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(vn||{});Z_="ng-template";tn=0,$=1,S=2,Oe=3,vt=4,_t=5,Xa=6,D_=7,Zt=8,ii=9,_n=10,et=11,ms=12,T_=13,ai=14,xt=15,yc=16,Xr=17,si=18,vc=19,oI=20,fs=21,xd=22,zn=23,Nt=25,aI=1,Gn=7,ec=8,tc=9,st=10,yh=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(yh||{});lI="svg",cS="math",uS=!1;H={lFrame:II(null),bindingsEnabled:!0,skipHydrationRootTNode:null};EI=wI;TI=!0;wc=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=kS;let t=e;return t})();RI=ne({\u0275prov:ne}),S_=ne({\u0275inj:ne}),MI=ne({ngInjectableDef:ne}),VS=ne({ngInjectorDef:ne}),U=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=N({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},Sh=new U("",{providedIn:"root",factory:()=>US}),US="ng",Ah=new U(""),wn=new U("",{providedIn:"platform",factory:()=>"unknown"}),Rh=new U("",{providedIn:"root",factory:()=>FS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),jS=ne({__forward_ref__:ne});qS={},_s=qS,Gd="__NG_DI_FLAG__",ic="ngTempTokenPath",zS="ngTokenPath",GS=/\n/gm,WS="\u0275",A_="__source";XS="h",eA="b",tA=()=>null;Ga="__parameters__";Ot=QS(rA("Optional"),8);oi=new U(""),FI=new U("",-1),LI=new U(""),sc=class{get(e,n=_s){if(n===_s){let r=new Error(`NullInjectorError: No provider for ${Qe(e)}!`);throw r.name="NullInjectorError",r}return n}};iA=ne({provide:String,useValue:ne});bc=new U(""),Wa={},aA={};ot=class{},Is=class extends ot{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zd(e,o=>this.processProvider(o)),this.records.set(FI,ei(void 0,this)),i.has("environment")&&this.records.set(ot,ei(void 0,this));let s=this.records.get(bc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(LI,At,V.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=mn(this),r=Ke(void 0),i;try{return e()}finally{mn(n),Ke(r)}}get(e,n=_s,r=V.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(v_))return e[v_](this);r=Dc(r);let i,s=mn(this),o=Ke(void 0);try{if(!(r&V.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=fA(e)&&Ec(e);u&&this.injectableDefInScope(u)?c=ei(Yd(e),Wa):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&V.Self?Ph():this.parent;return n=r&V.Optional&&n===_s?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ic]=a[ic]||[]).unshift(Qe(e)),s)throw a;return ZS(a,e,"R3InjectorError",this.source)}else throw a}finally{Ke(o),mn(s)}}resolveInjectorInitializers(){let e=mn(this),n=Ke(void 0),r;try{let i=this.get(oi,At,V.Self);for(let s of i)s()}finally{mn(e),Ke(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Qe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(e){e=it(e);let n=Qd(e)?e:it(e&&e.provide),r=uA(e);if(!Qd(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ei(void 0,Wa,!0),i.factory=()=>Wd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Wa&&(n.value=aA,n.value=n.factory()),typeof n.value=="object"&&n.value&&hA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=it(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};ws=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};Sc.ngInherit=!0;HI="__ngSimpleChanges__";R_=null,yn=function(t,e,n){R_?.(t,e,n)};ri=-1,Es=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};Jd=!0;TA=256,WI=TA-1,KI=5,CA=0,Rt={};Hn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return XI(this._tNode,this._lView,e,Dc(r),n)}};It=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return P_({name:""},i,r,"");{let s=r.name??"";return P_({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=_s,e.NULL=new sc,e.\u0275prov=N({token:e,providedIn:"any",factory:()=>j(FI)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})(),PA="ngOriginalError";Xt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&kd(e);for(;n&&kd(n);)n=kd(n);return n||null}},rw=new U("",{providedIn:"root",factory:()=>D(Xt).handleError.bind(void 0)}),iw=!1,OA=new U("",{providedIn:"root",factory:()=>iw}),sw=new Map,kA=0;O_="__ngContext__";tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(tr||{});tR=eR;Ms={};dR=()=>null;Aw=[];jR=se(C({},Wy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ys(t.lView)},consumerOnSignalRead(){this.lView[zn]=this}});Nw=100;Yn=class{get rootNodes(){let e=this._lView,n=e[$];return lc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zt]}set context(e){this._lView[Zt]=e}get destroyed(){return(this._lView[S]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Oe];if(nn(e)){let n=e[ec],r=n?n.indexOf(this):-1;r>-1&&(eh(e,r),rc(n,r))}this._attachedToViewContainer=!1}lw(this._lView[$],this._lView)}onDestroy(e){mS(this._lView,e)}markForCheck(){Lw(this._cdRefInjectingView||this._lView)}detach(){this._lView[S]&=-129}reattach(){$d(this._lView),this._lView[S]|=128}detectChanges(){this._lView[S]|=1024,Pw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,cw(this._lView[$],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e,$d(this._lView)}},zh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=KR;let t=e;return t})(),GR=zh,WR=class extends GR{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=OR(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Yn(i)}};BH=new RegExp(`^(\\d+)*(${eA}|${XS})*(.*)`),YR=()=>null;sh=class{},oh=class{},dc=class{};JR="ngComponent",ah=class{resolveComponentFactory(e){throw ZR(e)}},nr=(()=>{let e=class e{};e.NULL=new ah;let t=e;return t})(),Ts=class{},XR=(()=>{let e=class e{};e.\u0275prov=N({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Ld={};Ft=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=eM;let t=e;return t})();B_=new Set;te=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yt(!1),this.onMicrotaskEmpty=new yt(!1),this.onStable=new yt(!1),this.onError=new yt(!1),typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=nM().nativeRequestAnimationFrame,sM(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new R(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,rM,$_,$_);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},rM={};Uw=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=N({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();hc=class extends nr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=qn(e);return new Cs(n,this.ngModule)}};lh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Dc(r);let i=this.injector.get(e,Ld,r);return i!==Ld||n===Ld?i:this.parentInjector.get(e,n,r)}},Cs=class extends dc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=z_(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return z_(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=nS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let s=i instanceof ot?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new lh(e,s):e,a=o.get(Ts,null);if(a===null)throw new R(407,!1);let c=o.get(XR,null),u=o.get(Uw,null),l=o.get(sh,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",_=r?uR(h,r,this.componentDef.encapsulation,o):aw(h,f,aM(f)),E=512;this.componentDef.signals?E|=4096:this.componentDef.onPush||(E|=16);let T=null;_!==null&&(T=xh(_,o,!0));let A=$h(0,null,null,1,0,null,null,null,null,null,null),ee=Rc(null,A,null,E,null,null,d,h,o,null,T);Ih(ee);let fe,ue;try{let Ie=this.componentDef,re,Ye=null;Ie.findHostDirectiveDefs?(re=[],Ye=new Map,Ie.findHostDirectiveDefs(Ie,re,Ye),re.push(Ie)):re=[Ie];let dn=cM(ee,_),Fn=uM(dn,_,Ie,re,ee,d,h);ue=dI(A,Nt),_&&hM(h,Ie,_,r),n!==void 0&&fM(ue,this.ngContentSelectors,n),fe=dM(Fn,Ie,re,Ye,ee,[pM]),qh(A,ee,null)}finally{wh()}return new dh(this.componentType,fe,Ic(ue,ee),ee,ue)}},dh=class extends oh{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Yn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Hh(s[$],s,i,e,n),this.previousInputValues.set(e,n);let o=ci(this._tNode.index,s);Lw(o)}}get injector(){return new Hn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};xs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=gM;let t=e;return t})();mM=xs,jw=class extends mM{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ic(this._hostTNode,this._hostLView)}get injector(){return new Hn(this._hostTNode,this._hostLView)}get parentInjector(){let e=kh(this._hostTNode,this._hostLView);if(GI(e)){let n=ac(e,this._hostLView),r=oc(e),i=n[$].data[r+8];return new Hn(i,n)}else return new Hn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=G_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-st}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=j_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,U_(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!pA(e),a;if(o)a=n;else{let _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}let c=o?e:new Cs(qn(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let E=(o?u:this.parentInjector).get(ot,null);E&&(s=E)}let l=qn(c.componentType??{}),d=j_(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,U_(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(fS(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Oe],u=new jw(c,c[_t],c[Oe]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return kR(o,i,s,r),e.attachToViewContainerRef(),CI(Vd(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=G_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=eh(this._lContainer,n);r&&(rc(Vd(this._lContainer),n),lw(r[$],r))}detach(e){let n=this._adjustIndex(e,-1),r=eh(this._lContainer,n);return r&&rc(Vd(this._lContainer),n)!=null?new Yn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};_M=EM,IM=()=>!1;In=class{},bs=class{},hh=class extends In{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hc(this);let i=rI(e);this._bootstrapComponents=ow(i.bootstrap),this._r3Injector=nw(e,n,[{provide:In,useValue:this},{provide:nr,useValue:this.componentFactoryResolver},...r],Qe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},fh=class extends bs{constructor(e){super(),this.moduleType=e}create(e){return new hh(this.moduleType,e,[])}},fc=class extends In{constructor(e){super(),this.componentFactoryResolver=new hc(this),this.instance=null;let n=new Is([...e.providers,{provide:In,useValue:this},{provide:nr,useValue:this.componentFactoryResolver}],e.parent||Ph(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};Nc=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Re(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();CM=bM;RM=(t,e,n,r,i,s)=>(Ch(!0),aw(r,i,OS())),pc="en-US",MM=pc;PM=(t,e,n,r,i)=>(Ch(!0),jA(e[et],r));OM=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=VI(!1,r.type),s=i.length>0?Kh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=N({token:e,providedIn:"environment",factory:()=>new e(j(ot))});let t=e;return t})();en=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},zw=new en("17.2.2"),Oc=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Gw=new U("");Ww=new U(""),Kw=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=D(Ww,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(hi(o))r.push(o);else if(Xh(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ef=new U("");rr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=D(rw),this.afterRenderEffectManager=D(Uw),this.componentTypes=[],this.components=[],this.isStable=D(Nc).hasPendingTasks.pipe(L(r=>!r)),this._injector=D(ot)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof dc;if(!this._injector.get(Kw).done){let f=!s&&nI(r),_=!1;throw new R(405,_)}let a;s?a=r:a=this._injector.get(nr).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=jM(a)?void 0:this._injector.get(In),u=i||a.selector,l=a.create(It.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(Gw,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Ud(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new R(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0;do{if(r===Nw)throw new R(103,!1);let i=r===0;for(let{_lView:s,notifyErrorHandler:o}of this._views)!i&&!K_(s)||this.detectChangesInView(s,o,i);this.afterRenderEffectManager.execute(),r++}while(this._views.some(({_lView:i})=>K_(i)))}detectChangesInView(r,i,s){let o;s?(o=0,r[S]|=1024):r[S]&64?o=0:o=1,Pw(r,i,o)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Ud(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ef,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ud(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new R(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();ph=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},tf=(()=>{let e=class e{compileModuleSync(r){return new fh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=rI(r),o=ow(s.declarations).reduce((a,c)=>{let u=qn(c);return u&&a.push(new Cs(u)),a},[]);return new ph(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$M=(()=>{let e=class e{constructor(){this.zone=D(te),this.applicationRef=D(rr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();WM=(()=>{let e=class e{constructor(){this.subscription=new le,this.initialized=!1,this.zone=D(te),this.pendingTasks=D(Nc)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();nf=new U("",{providedIn:"root",factory:()=>D(nf,V.Optional|V.SkipSelf)||KM()}),Qw=new U(""),Za=null});function fi(){return tE}function nE(t){tE??=t}function iE(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Zw(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function sr(t){return t&&t[0]!=="?"?"?"+t:t}function ix(){return new Ns(j(Lc))}function sx(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Jw(t){return t.replace(/\/index.html$/,"")}function ox(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function oE(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}function Xw(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Qe(e)}'.`)}function ax(t,e){return new R(2100,!1)}function af(t){return t===lx}var tE,kc,at,rE,nx,Lc,rx,sE,Ns,aE,rf,sf,of,cx,ux,cE,uE,lx,Fc,Vc=g(()=>{"use strict";ke();ke();tE=null;kc=class{},at=new U(""),rE=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>D(nx),providedIn:"platform"});let t=e;return t})(),nx=(()=>{let e=class e extends rE{constructor(){super(),this._doc=D(at),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fi().getBaseHref(this._doc)}onPopState(r){let i=fi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=fi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();Lc=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>D(sE),providedIn:"root"});let t=e;return t})(),rx=new U(""),sE=(()=>{let e=class e extends Lc{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??D(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return iE(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+sr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+sr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+sr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(j(rE),j(rx,8))},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ns=(()=>{let e=class e{constructor(r){this._subject=new yt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=ox(Zw(Jw(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+sr(i))}normalize(r){return e.stripTrailingSlash(sx(this._basePath,Jw(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+sr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+sr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=sr,e.joinWithSlash=iE,e.stripTrailingSlash=Zw,e.\u0275fac=function(i){return new(i||e)(j(Lc))},e.\u0275prov=N({token:e,factory:()=>ix(),providedIn:"root"});let t=e;return t})();aE=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new rf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Xw("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Xw("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(kt(xs),kt(zh))},e.\u0275dir=mc({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),rf=class{constructor(){this.$implicit=null,this.ngIf=null}};sf=class{createSubscription(e,n){return Gh(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Gh(()=>e.unsubscribe())}},of=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},cx=new of,ux=new sf,cE=(()=>{let e=class e{constructor(r){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){return this._obj?r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue:(r&&this._subscribe(r),this._latestValue)}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(hi(r))return cx;if(Xh(r))return ux;throw ax(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this._ref.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(kt(Ft,16))},e.\u0275pipe=X_({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})(),uE="browser",lx="server";Fc=class{}});function dx(){return Ps=Ps||document.querySelector("base"),Ps?Ps.getAttribute("href"):null}function hx(t){return new URL(t,document.baseURI).pathname}function vx(t){return gx.replace(pf,t)}function _x(t){return px.replace(pf,t)}function mE(t,e){return e.map(n=>n.replace(pf,t))}function dE(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}function yE(t){return Yw(Tx(t))}function Tx(t){return{appProviders:[...Rx,...t?.providers??[]],platformProviders:Ax}}function Cx(){df.makeCurrent()}function bx(){return new Xt}function Sx(){return SI(document),document}var lf,df,Ps,fx,hf,fE,Uc,cf,pE,uf,pf,gE,px,gx,mx,yx,lE,Os,ff,ks,jc,Ix,hE,wx,Ex,Dx,Ax,Rx,vE,gf=g(()=>{"use strict";ke();ke();Vc();lf=class extends kc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},df=class t extends lf{static makeCurrent(){nE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=dx();return n==null?null:hx(n)}resetBaseElement(){Ps=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return oE(document.cookie,e)}},Ps=null;fx=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})(),hf=new U(""),fE=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new R(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(j(hf),j(te))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})(),Uc=class{constructor(e){this._doc=e}},cf="ng-app-id",pE=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=af(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${cf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(cf),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(cf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(j(at),j(Sh),j(Rh,8),j(wn))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})(),uf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pf=/%COMP%/g,gE="%COMP%",px=`_nghost-${gE}`,gx=`_ngcontent-${gE}`,mx=!0,yx=new U("",{providedIn:"root",factory:()=>mx});lE=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=af(c),this.defaultRenderer=new Os(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Mt.ShadowDom&&(i=se(C({},i),{encapsulation:Mt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof jc?s.applyToHost(r):s instanceof ks&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Mt.Emulated:o=new jc(u,l,i,this.appId,d,a,c,h);break;case Mt.ShadowDom:return new ff(u,l,r,i,a,c,this.nonce,h);default:o=new ks(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(j(fE),j(pE),j(Sh),j(yx),j(at),j(wn),j(te),j(Rh))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})(),Os=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(uf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(dE(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(dE(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new R(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=uf[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=uf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(tr.DashCase|tr.Important)?e.style.setProperty(n,r,i&tr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&tr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=fi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};ff=class extends Os{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=mE(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ks=class extends Os{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?mE(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},jc=class extends ks{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=vx(u),this.hostAttr=_x(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Ix=(()=>{let e=class e extends Uc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(j(at))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})(),hE=["alt","control","meta","shift"],wx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ex={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Dx=(()=>{let e=class e extends Uc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fi().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),hE.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=wx[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),hE.forEach(a=>{if(a!==s){let c=Ex[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(j(at))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})();Ax=[{provide:wn,useValue:uE},{provide:Ah,useValue:Cx,multi:!0},{provide:at,useFactory:Sx,deps:[]}],Rx=[{provide:bc,useValue:"root"},{provide:Xt,useFactory:bx,deps:[]},{provide:hf,useClass:Ix,multi:!0,deps:[at,te,wn]},{provide:hf,useClass:Dx,multi:!0,deps:[at]},lE,pE,fE,{provide:Ts,useExisting:lE},{provide:Fc,useClass:fx,deps:[]},[]],vE=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(j(at))},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})()});function xx(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Nx(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}function Px(t){return typeof t=="function"}function Ox(t,e){if(!mf){let n=Element.prototype;mf=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE?mf.call(t,e):!1}function kx(t,e){return t===e||t!==t&&e!==e}function Fx(t){let e={};return t.forEach(({propName:n,templateName:r,transform:i})=>{e[xx(r)]=[n,i]}),e}function Lx(t,e){return e.get(nr).resolveComponentFactory(t).inputs}function Vx(t,e){let n=t.childNodes,r=e.map(()=>[]),i=-1;e.some((s,o)=>s==="*"?(i=o,!0):!1);for(let s=0,o=n.length;s<o;++s){let a=n[s],c=Ux(a,e,i);c!==-1&&r[c].push(a)}return r}function Ux(t,e,n){let r=n;return Nx(t)&&e.some((i,s)=>i!=="*"&&Ox(t,i)?(r=s,!0):!1),r}function _E(t,e){let n=Lx(t,e.injector),r=e.strategyFactory||new yf(t,e.injector),i=Fx(n),o=class o extends _f{get ngElementStrategy(){if(!this._ngElementStrategy){let c=this._ngElementStrategy=r.create(this.injector||e.injector);n.forEach(({propName:u,transform:l})=>{if(!this.hasOwnProperty(u))return;let d=this[u];delete this[u],c.setInputValue(u,d,l)})}return this._ngElementStrategy}constructor(c){super(),this.injector=c}attributeChangedCallback(c,u,l,d){let[h,f]=i[c];this.ngElementStrategy.setInputValue(h,l,f)}connectedCallback(){let c=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),c=!0),this.ngElementStrategy.connect(this),c||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(c=>{let u=new CustomEvent(c.name,{detail:c.value});this.dispatchEvent(u)})}};o.observedAttributes=Object.keys(i);let s=o;return n.forEach(({propName:a,transform:c})=>{Object.defineProperty(s.prototype,a,{get(){return this.ngElementStrategy.getInputValue(a)},set(u){this.ngElementStrategy.setInputValue(a,u,c)},configurable:!0,enumerable:!0})}),s}var Bc,mf,jx,yf,vf,_f,IE=g(()=>{"use strict";ke();Zr();Jr();Bc={schedule(t,e){let n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return Bc.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return Bc.schedule(t,16);let e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};jx=10,yf=class{constructor(e,n){this.componentFactory=n.get(nr).resolveComponentFactory(e)}create(e){return new vf(this.componentFactory,e)}},vf=class{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new is(1),this.events=this.eventEmitters.pipe(Xe(r=>Dd(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(te),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(this.scheduledDestroyFn!==null){this.scheduledDestroyFn(),this.scheduledDestroyFn=null;return}this.componentRef===null&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{this.componentRef===null||this.scheduledDestroyFn!==null||(this.scheduledDestroyFn=Bc.schedule(()=>{this.componentRef!==null&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},jx))})}getInputValue(e){return this.runInZone(()=>this.componentRef===null?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,r){this.runInZone(()=>{if(r&&(n=r.call(this.componentRef?.instance,n)),this.componentRef===null){this.initialInputValues.set(e,n);return}kx(n,this.getInputValue(e))&&!(n===void 0&&this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges())})}initializeComponent(e){let n=It.create({providers:[],parent:this.injector}),r=Vx(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,r,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Ft),this.implementsOnChanges=Px(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(rr).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){let n=this.componentFactory.outputs.map(({propName:r,templateName:i})=>e.instance[r].pipe(L(o=>({name:i,value:o}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||this.inputChanges===null)return;let n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=Bc.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;this.inputChanges===null&&(this.inputChanges={});let r=this.inputChanges[e];if(r){r.currentValue=n;return}let i=this.unchangedInputs.has(e),s=i?void 0:this.getInputValue(e);this.inputChanges[e]=new ws(s,n,i)}detectChanges(){this.componentRef!==null&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}},_f=class extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}});function Hx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}function SE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fs(JSON.stringify(n)),Fs(JSON.stringify(o)),""].join(".")}function Fe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function Wx(){var t;let e=(t=Hc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RE(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ME(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xE(){return!Wx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qc(){try{return typeof indexedDB=="object"}catch{return!1}}function NE(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Qx(t,e){return t.replace(Yx,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}function pi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(wE(s)&&wE(o)){if(!pi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function wE(t){return t!==null&&typeof t=="object"}function Cf(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function PE(t,e){let n=new Ef(t,e);return n.subscribe.bind(n)}function Zx(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function If(){}function wt(t){return t&&t._delegate?t._delegate:t}var EE,Bx,DE,wf,$x,Fs,Df,qx,zx,Gx,Hc,TE,CE,Tf,bE,$c,Kx,ct,sn,Yx,Ef,Wq,or=g(()=>{"use strict";EE=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Bx=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},DE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Bx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new wf;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let _=u<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},wf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$x=function(t){let e=EE(t);return DE.encodeByteArray(e,!0)},Fs=function(t){return $x(t).replace(/\./g,"")},Df=function(t){try{return DE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};qx=()=>Hx().__FIREBASE_DEFAULTS__,zx=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Gx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Df(t[1]);return e&&JSON.parse(e)},Hc=()=>{try{return qx()||zx()||Gx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TE=t=>{var e,n;return(n=(e=Hc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},CE=t=>{let e=TE(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Tf=()=>{var t;return(t=Hc())===null||t===void 0?void 0:t.config},bE=t=>{var e;return(e=Hc())===null||e===void 0?void 0:e[`_${t}`]};$c=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};Kx="FirebaseError",ct=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Kx,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}},sn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Qx(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ct(i,a,r)}};Yx=/\{\$([^}]+)}/g;Ef=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Zx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=If),i.error===void 0&&(i.error=If),i.complete===void 0&&(i.complete=If);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};Wq=4*60*60*1e3;});function Jx(t){return t===ar?void 0:t}function Xx(t){return t.instantiationMode==="EAGER"}var ut,ar,bf,zc,Ls=g(()=>{"use strict";or();ut=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};ar="[DEFAULT]";bf=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new $c;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xx(e))try{this.getOrInitializeService({instanceIdentifier:ar})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ar){return this.instances.has(e)}getOptions(e=ar){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Jx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ar){return this.component?this.component.multipleInstances?e:ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};zc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new bf(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}});var eN,B,tN,nN,rN,iN,En,Vs=g(()=>{"use strict";eN=[],B=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(B||{}),tN={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},nN=B.INFO,rN={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},iN=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=rN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},En=class{constructor(e){this.name=e,this._logLevel=nN,this._logHandler=iN,this._userLogHandler=null,eN.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...e),this._logHandler(this,B.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...e),this._logHandler(this,B.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,B.INFO,...e),this._logHandler(this,B.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,B.WARN,...e),this._logHandler(this,B.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...e),this._logHandler(this,B.ERROR,...e)}}});function oN(){return OE||(OE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aN(){return kE||(kE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}function cN(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Lt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&FE.set(n,t)}).catch(()=>{}),Mf.set(e,t),e}function uN(t){if(Af.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Af.set(t,e)}function VE(t){Rf=t(Rf)}function lN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Gc(this),e,...n);return LE.set(r,e.sort?e.sort():[e]),Lt(r)}:aN().includes(t)?function(...e){return t.apply(Gc(this),e),Lt(FE.get(this))}:function(...e){return Lt(t.apply(Gc(this),e))}}function dN(t){return typeof t=="function"?lN(t):(t instanceof IDBTransaction&&uN(t),sN(t,oN())?new Proxy(t,Rf):t)}function Lt(t){if(t instanceof IDBRequest)return cN(t);if(Sf.has(t))return Sf.get(t);let e=dN(t);return e!==t&&(Sf.set(t,e),Mf.set(e,t)),e}var sN,OE,kE,FE,Af,LE,Sf,Mf,Rf,Gc,xf=g(()=>{"use strict";sN=(t,e)=>e.some(n=>t instanceof n);FE=new WeakMap,Af=new WeakMap,LE=new WeakMap,Sf=new WeakMap,Mf=new WeakMap;Rf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Af.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};Gc=t=>Mf.get(t)});function jE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Lt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Lt(o.result),c.oldVersion,c.newVersion,Lt(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function UE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=fN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hN.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Nf.set(e,s),s}var hN,fN,Nf,BE=g(()=>{"use strict";xf();xf();hN=["get","getKey","getAll","getAllKeys","count"],fN=["put","add","delete","clear"],Nf=new Map;VE(t=>se(C({},t),{get:(e,n,r)=>UE(e,n)||t.get(e,n,r),has:(e,n)=>!!UE(e,n)||t.has(e,n)}))});function pN(t){let e=t.getComponent();return e?.type==="VERSION"}function BN(t,e){try{t.container.addComponent(e)}catch(n){cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tn(t){let e=t.name;if(Lf.has(e))return cr.debug(`There were multiple attempts to register component ${e}.`),!1;Lf.set(e,t);for(let n of Us.values())BN(n,t);return!0}function Bf(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $f(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ff,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Dn.create("bad-app-name",{appName:String(i)});if(n||(n=Tf()),!n)throw Dn.create("no-options");let s=Us.get(i);if(s){if(pi(n,s.options)&&pi(r,s.config))return s;throw Dn.create("duplicate-app",{appName:i})}let o=new zc(i);for(let c of Lf.values())o.addComponent(c);let a=new Vf(n,r,o);return Us.set(i,a),a}function Bs(t=Ff){let e=Us.get(t);if(!e&&t===Ff&&Tf())return $f();if(!e)throw Dn.create("no-app",{appName:t});return e}function Wc(){return Array.from(Us.values())}function Te(t,e,n){var r;let i=(r=jN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cr.warn(a.join(" "));return}Tn(new ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function GE(){return Pf||(Pf=jE(HN,qN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(js)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dn.create("idb-open",{originalErrorMessage:t.message})})),Pf}function zN(t){return p(this,null,function*(){try{let n=(yield GE()).transaction(js),r=yield n.objectStore(js).get(WE(t));return yield n.done,r}catch(e){if(e instanceof ct)cr.warn(e.message);else{let n=Dn.create("idb-get",{originalErrorMessage:e?.message});cr.warn(n.message)}}})}function HE(t,e){return p(this,null,function*(){try{let r=(yield GE()).transaction(js,"readwrite");yield r.objectStore(js).put(e,WE(t)),yield r.done}catch(n){if(n instanceof ct)cr.warn(n.message);else{let r=Dn.create("idb-set",{originalErrorMessage:n?.message});cr.warn(r.message)}}})}function WE(t){return`${t.name}!${t.options.appId}`}function qE(){return new Date().toISOString().substring(0,10)}function KN(t,e=GN){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),zE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}function zE(t){return Fs(JSON.stringify({version:2,heartbeats:t})).length}function QN(t){Tn(new ut("platform-logger",e=>new Of(e),"PRIVATE")),Tn(new ut("heartbeat",e=>new Uf(e),"PRIVATE")),Te(kf,$E,t),Te(kf,$E,"esm2017"),Te("fire-js","")}var Of,kf,$E,cr,gN,mN,yN,vN,_N,IN,wN,EN,DN,TN,CN,bN,SN,AN,RN,MN,xN,NN,PN,ON,kN,FN,LN,VN,UN,Ff,jN,Us,Lf,$N,Dn,Vf,gi,HN,qN,js,Pf,GN,WN,Uf,jf,mi=g(()=>{"use strict";Ls();Vs();or();or();BE();Of=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pN(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};kf="@firebase/app",$E="0.9.27";cr=new En("@firebase/app"),gN="@firebase/app-compat",mN="@firebase/analytics-compat",yN="@firebase/analytics",vN="@firebase/app-check-compat",_N="@firebase/app-check",IN="@firebase/auth",wN="@firebase/auth-compat",EN="@firebase/database",DN="@firebase/database-compat",TN="@firebase/functions",CN="@firebase/functions-compat",bN="@firebase/installations",SN="@firebase/installations-compat",AN="@firebase/messaging",RN="@firebase/messaging-compat",MN="@firebase/performance",xN="@firebase/performance-compat",NN="@firebase/remote-config",PN="@firebase/remote-config-compat",ON="@firebase/storage",kN="@firebase/storage-compat",FN="@firebase/firestore",LN="@firebase/firestore-compat",VN="firebase",UN="10.8.0";Ff="[DEFAULT]",jN={[kf]:"fire-core",[gN]:"fire-core-compat",[yN]:"fire-analytics",[mN]:"fire-analytics-compat",[_N]:"fire-app-check",[vN]:"fire-app-check-compat",[IN]:"fire-auth",[wN]:"fire-auth-compat",[EN]:"fire-rtdb",[DN]:"fire-rtdb-compat",[TN]:"fire-fn",[CN]:"fire-fn-compat",[bN]:"fire-iid",[SN]:"fire-iid-compat",[AN]:"fire-fcm",[RN]:"fire-fcm-compat",[MN]:"fire-perf",[xN]:"fire-perf-compat",[NN]:"fire-rc",[PN]:"fire-rc-compat",[ON]:"fire-gcs",[kN]:"fire-gcs-compat",[FN]:"fire-fst",[LN]:"fire-fst-compat","fire-js":"fire-js",[VN]:"fire-js-all"};Us=new Map,Lf=new Map;$N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Dn=new sn("app","Firebase",$N);Vf=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}};gi=UN;HN="firebase-heartbeat-database",qN=1,js="firebase-heartbeat-store",Pf=null;GN=1024,WN=30*24*60*60*1e3,Uf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new jf(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qE();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=WN}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=qE(),{heartbeatsToSend:r,unsentEntries:i}=KN(this._heartbeatsCache.heartbeats),s=Fs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};jf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return qc()?NE().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield zN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return HE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return HE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};QN("")});var YN,ZN,yi=g(()=>{"use strict";mi();mi();YN="firebase",ZN="10.8.0";Te(YN,ZN,"app")});function qf(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}function vi(){}function Qc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function XN(t){return Qc().ngZone.runOutsideAngular(()=>t())}function ur(t){return Qc().ngZone.run(()=>t())}function eP(t){return tP(Qc())(t)}function tP(t){return function(n){return n=n.lift(new Hf(t.ngZone)),n.pipe(fn(t.outsideAngular),hn(t.insideAngular))}}var _i,Hs,$s,JN,Kc,Hf,qs,nP,on,Yc=g(()=>{"use strict";ke();ke();yi();Zr();Jr();_i=new en("ANGULARFIRE2_VERSION");Hs=(t,e)=>{let n=e?[e]:Wc(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},$s=class{constructor(){return Hs(JN)}},JN="app-check";Kc=class{zone;delegate;constructor(e,n=ud){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Hf=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vi,{},vi,vi)),n.pipe(ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},qs=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Kc(Zone.current)),this.insideAngular=n.run(()=>new Kc(Zone.current,cd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(j(te))};static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();nP=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ur(()=>t.apply(void 0,r))},on=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=ur(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vi,{},vi,vi))),r[s]=nP(r[s],n));let i=XN(()=>t.apply(this,r));if(!e)if(i instanceof q){let s=Qc();return i.pipe(fn(s.outsideAngular),hn(s.insideAngular))}else return ur(()=>i);return i instanceof q?i.pipe(eP):i instanceof Promise?ur(()=>new Promise((s,o)=>i.then(a=>ur(()=>s(a)),a=>ur(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ur(()=>i)}});function rP(t){return t&&t.length===1?t[0]:new lr(Bs())}function oP(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new lr(r)}}function KE(t,...e){return{ngModule:aP,providers:[{provide:zf,useFactory:oP(t),multi:!0,deps:[te,It,qs,...e]}]}}var lr,zs,zf,iP,sP,aP,QE,Gf=g(()=>{"use strict";yi();yi();ke();ke();Yc();lr=class{constructor(e){return e}},zs=class{constructor(){return Wc()}};zf=new U("angularfire2._apps"),iP={provide:lr,useFactory:rP,deps:[[new Ot,zf]]},sP={provide:zs,deps:[[new Ot,zf]]};aP=(()=>{class t{constructor(n){Te("angularfire",_i.full,"core"),Te("angularfire",_i.full,"app"),Te("angular",zw.full,n.toString())}static \u0275fac=function(r){return new(r||t)(j(wn))};static \u0275mod=Zn({type:t});static \u0275inj=Xn({providers:[iP,sP]})}return t})();QE=on($f,!0)});function nD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}function uP(t,...e){Xc.logLevel<=B.WARN&&Xc.warn(`Auth (${gi}): ${t}`,...e)}function Jc(t,...e){Xc.logLevel<=B.ERROR&&Xc.error(`Auth (${gi}): ${t}`,...e)}function YE(t,...e){throw ip(t,...e)}function rp(t,...e){return ip(t,...e)}function lP(t,e,n){let r=Object.assign(Object.assign({},rD()),{[e]:n});return new sn("auth","Firebase",r).create(e,{appName:t.name})}function ip(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iD.create(t,...e)}function J(t,e,...n){if(!t)throw ip(e,...n)}function Gs(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Jc(e),new Error(e)}function eu(t,e){t||Gs(e)}function dP(){return ZE()==="http:"||ZE()==="https:"}function ZE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function hP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dP()||RE()||"connection"in navigator)?navigator.onLine:!0}function fP(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}function pP(t,e){eu(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}function sD(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function cu(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return oD(t,i,()=>p(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Cf(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),tu.fetch()(aD(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function oD(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},gP),e);try{let i=new Qf(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Zc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Zc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Zc(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw lP(t,l,u);YE(t,l)}}catch(i){if(i instanceof ct)throw i;YE(t,"network-request-failed",{message:String(i)})}})}function aD(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?pP(t.config,i):`${t.config.apiScheme}://${i}`}function Zc(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=rp(t,e,r);return i.customData._tokenResponse=n,i}function yP(t,e){return p(this,null,function*(){return cu(t,"POST","/v1/accounts:delete",e)})}function vP(t,e){return p(this,null,function*(){return cu(t,"POST","/v1/accounts:lookup",e)})}function Ws(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function sp(t,e=!1){return p(this,null,function*(){let n=wt(t),r=yield n.getIdToken(e),i=cD(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ws(Wf(i.auth_time)),issuedAtTime:Ws(Wf(i.iat)),expirationTime:Ws(Wf(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Wf(t){return Number(t)*1e3}function cD(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jc("JWT malformed, contained fewer than 3 sections"),null;try{let i=Df(n);return i?JSON.parse(i):(Jc("Failed to decode base64 JWT payload"),null)}catch(i){return Jc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function _P(t){let e=cD(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Yf(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof ct&&IP(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function IP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}function ru(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Yf(t,vP(n,{idToken:r}));J(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?EP(s.providerUserInfo):[],a=wP(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nu(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function op(t){return p(this,null,function*(){let e=wt(t);yield ru(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function wP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function EP(t){return t.map(e=>{var{providerId:n}=e,r=dd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function DP(t,e){return p(this,null,function*(){let n=yield oD(t,{},()=>p(this,null,function*(){let r=Cf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=aD(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",tu.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function TP(t,e){return p(this,null,function*(){return cu(t,"POST","/v2/accounts:revokeToken",sD(t,e))})}function Cn(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}function dr(t){eu(t instanceof Function,"Expected a class definition");let e=JE.get(t);return e?(eu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,JE.set(t,e),e)}function Kf(t,e,n){return`firebase:${t}:${e}:${n}`}function XE(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xP(e))return"Blackberry";if(NP(e))return"Webos";if(SP(e))return"Safari";if((e.includes("chrome/")||AP(e))&&!e.includes("edge/"))return"Chrome";if(MP(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function bP(t=Fe()){return/firefox\//i.test(t)}function SP(t=Fe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AP(t=Fe()){return/crios\//i.test(t)}function RP(t=Fe()){return/iemobile/i.test(t)}function MP(t=Fe()){return/android/i.test(t)}function xP(t=Fe()){return/blackberry/i.test(t)}function NP(t=Fe()){return/webos/i.test(t)}function uD(t,e=[]){let n;switch(t){case"Browser":n=XE(Fe());break;case"Worker":n=`${XE(Fe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gi}/${r}`}function PP(n){return p(this,arguments,function*(t,e={}){return cu(t,"GET","/v2/passwordPolicy",sD(t,e))})}function kP(t){return wt(t)}function LP(t){FP=t}function VP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function UP(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(dr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function jP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BP(t){Tn(new ut("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uD(t)},u=new tp(r,i,s,c);return UP(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tn(new ut("auth-internal",e=>{let n=kP(e.getProvider("auth").getImmediate());return(r=>new np(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Te(eD,tD,jP(t)),Te(eD,tD,"esm2017")}function HP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}var rD,iD,Xc,hr,tu,gP,mP,Qf,Zf,nu,iu,su,JE,CP,Jf,ou,Xf,OP,ep,tp,au,FP,Bz,$z,Hz,qz,zz,Gz,Wz,eD,tD,np,$P,Kz,lD=g(()=>{"use strict";or();mi();Vs();Ta();Ls();rD=nD,iD=new sn("auth","Firebase",nD());Xc=new En("@firebase/auth");hr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,eu(n>e,"Short delay should be less than long delay!"),this.isMobile=AE()||ME()}get(){return hP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};tu=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};gP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};mP=new hr(3e4,6e4);Qf=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rp(this.auth,"network-request-failed")),mP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};Zf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};nu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ws(this.lastLoginAt),this.creationTime=Ws(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};iu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_P(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return J(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield DP(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Gs("not implemented")}};su=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=dd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield Yf(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return sp(this,e)}reload(){return op(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield ru(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield Yf(this,yP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,A=(u=n.createdAt)!==null&&u!==void 0?u:void 0,ee=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:fe,emailVerified:ue,isAnonymous:Ie,providerData:re,stsTokenManager:Ye}=n;J(fe&&Ye,e,"internal-error");let dn=iu.fromJSON(this.name,Ye);J(typeof fe=="string",e,"internal-error"),Cn(d,e.name),Cn(h,e.name),J(typeof ue=="boolean",e,"internal-error"),J(typeof Ie=="boolean",e,"internal-error"),Cn(f,e.name),Cn(_,e.name),Cn(E,e.name),Cn(T,e.name),Cn(A,e.name),Cn(ee,e.name);let Fn=new t({uid:fe,auth:e,email:h,emailVerified:ue,displayName:d,isAnonymous:Ie,photoURL:_,phoneNumber:f,tenantId:E,stsTokenManager:dn,createdAt:A,lastLoginAt:ee});return re&&Array.isArray(re)&&(Fn.providerData=re.map(ca=>Object.assign({},ca))),T&&(Fn._redirectEventId=T),Fn}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new iu;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ru(s),s})}};JE=new Map;CP=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Jf=CP;ou=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Kf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Kf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?su._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(dr(Jf),e,r);let i=(yield Promise.all(n.map(u=>p(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||dr(Jf),o=Kf(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=su._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>p(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};Xf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};OP=6,ep=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:OP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};tp=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new au(this),this.idTokenSubscription=new au(this),this.beforeStateQueue=new Xf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ou.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield ru(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=fP()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?wt(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(dr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield PP(this),n=new ep(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield TP(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&dr(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=yield ou.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&uP(`Error while retrieving App Check token: ${n.error}`),n?.token})}};au=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=PE(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};FP={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};Bz=VP("rcb"),$z=new hr(3e4,6e4);Hz=new hr(2e3,1e4);qz=10*60*1e3;zz=new hr(3e4,6e4);Gz=new hr(5e3,15e3);Wz=encodeURIComponent("fac");eD="@firebase/auth",tD="1.6.0";np=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};$P=5*60,Kz=bE("authIdTokenMaxAge")||$P;LP({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=rp("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",HP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BP("Browser")});var dD=g(()=>{"use strict";lD();or();mi();Vs();Ls()});var ap=g(()=>{"use strict";dD()});var $O,uu,hD=g(()=>{"use strict";Yc();yi();ap();ap();$O="auth",uu=class{constructor(){return Hs($O)}}});function Du(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ao(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function qO(t){return Object.prototype.hasOwnProperty.call(t,cp)&&t[cp]||(t[cp]=++zO)}function GO(t,e,n){return t.call.apply(t.bind,arguments)}function WO(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Le(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Le=GO:Le=WO,Le.apply(null,arguments)}function lu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function be(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function bn(){this.s=this.s,this.o=this.o}function Mp(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function fD(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Du(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ve(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Xs(t){return/^[\s\xa0]*$/.test(t)}function Tu(){var t=M.navigator;return t&&(t=t.userAgent)?t:""}function Vt(t){return Tu().indexOf(t)!=-1}function xp(t){return xp[" "](t),t}function YO(t,e){var n=Vk;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function AD(){var t=M.document;return t?t.documentMode:void 0}function eo(t,e){if(Ve.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(SD){e:{try{xp(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:ek[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&eo.$.h.call(this)}}function nk(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++tk,this.fa=this.ia=!1}function Cu(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Np(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function rk(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function RD(t){let e={};for(let n in t)e[n]=t[n];return e}function MD(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<pD.length;s++)n=pD[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bu(t){this.src=t,this.g={},this.h=0}function mp(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=CD(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Cu(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function yp(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}function xD(t,e,n,r,i){if(r&&r.once)return PD(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)xD(t,e[s],n,r,i);return null}return n=Fp(n),t&&t[co]?t.O(e,n,ao(r)?!!r.capture:!!r,i):ND(t,e,n,!1,r,i)}function ND(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ao(i)?!!i.capture:!!i,a=kp(t);if(a||(t[Pp]=a=new bu(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=ik(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)QO||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(kD(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function ik(){function t(n){return e.call(t.src,t.listener,n)}let e=sk;return t}function PD(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)PD(t,e[s],n,r,i);return null}return n=Fp(n),t&&t[co]?t.P(e,n,ao(r)?!!r.capture:!!r,i):ND(t,e,n,!0,r,i)}function OD(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)OD(t,e[s],n,r,i);else r=ao(r)?!!r.capture:!!r,n=Fp(n),t&&t[co]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=yp(s,n,r,i),-1<n&&(Cu(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=kp(t))&&(e=t.g[e.toString()],t=-1,e&&(t=yp(e,n,r,i)),(n=-1<t?e[t]:null)&&Op(n))}function Op(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[co])mp(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(kD(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=kp(e))?(mp(n,t),n.h==0&&(n.src=null,e[Pp]=null)):Cu(t)}}}function kD(t){return t in lp?lp[t]:lp[t]="on"+t}function sk(t,e){if(t.fa)t=!0;else{e=new eo(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Op(t),t=n.call(r,e)}return t}function kp(t){return t=t[Pp],t instanceof bu?t:null}function Fp(t){return typeof t=="function"?t:(t[dp]||(t[dp]=function(e){return t.handleEvent(e)}),t[dp])}function Ce(){bn.call(this),this.i=new bu(this),this.S=this,this.J=null}function Ne(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ve(e,t);else if(e instanceof Ve)e.target=e.target||t;else{var i=e;e=new Ve(r,t),MD(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=pu(o,r,!0,e)&&i}if(o=e.g=t,i=pu(o,r,!0,e)&&i,i=pu(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=pu(o,r,!1,e)&&i}function pu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&mp(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}function ok(){var t=Vp;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}function ak(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function ck(t){M.setTimeout(()=>{throw t},0)}function Su(t,e){Ce.call(this),this.h=t||1,this.g=e||M,this.j=Le(this.qb,this),this.l=Date.now()}function Up(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function jp(t,e,n){if(typeof t=="function")n&&(t=Le(t,n));else if(t&&typeof t.handleEvent=="function")t=Le(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:M.setTimeout(t,e||0)}function VD(t){t.g=jp(()=>{t.g=null,t.i&&(t.i=!1,VD(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}function ro(t){bn.call(this),this.h=t,this.g={}}function UD(t,e,n,r){Array.isArray(n)||(n&&(gD[0]=n.toString()),n=gD);for(var i=0;i<n.length;i++){var s=xD(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function jD(t){Np(t.g,function(e,n){this.g.hasOwnProperty(n)&&Op(e)},t),t.g={}}function Au(){this.g=!0}function lk(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function dk(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function wi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+fk(t,n)+(r?" "+r:"")})}function hk(t,e){t.info(function(){return"TIMEOUT: "+e})}function fk(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Lp(n)}catch{return e}}function Ru(){return mD=mD||new Ce}function BD(t){Ve.call(this,mr.Ta,t)}function io(t){let e=Ru();Ne(e,new BD(e))}function $D(t,e){Ve.call(this,mr.STAT_EVENT,t),this.stat=e}function qe(t){let e=Ru();Ne(e,new $D(e,t))}function HD(t,e){Ve.call(this,mr.Ua,t),this.size=e}function uo(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return M.setTimeout(function(){t()},e)}function Bp(){}function yD(t){return t.h||(t.h=t.i())}function zD(){}function $p(){Ve.call(this,"d")}function Hp(){Ve.call(this,"c")}function xu(){}function ho(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ro(this),this.P=pk,t=fp?125:void 0,this.V=new Su(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new GD}function GD(){this.i=null,this.g="",this.h=!1}function Tp(t,e,n){t.L=1,t.A=Pu(cn(e)),t.u=n,t.S=!0,KD(t,null)}function KD(t,e){t.G=Date.now(),fo(t),t.B=cn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),nT(n.i,"t",r),t.o=0,n=t.l.J,t.h=new GD,t.g=DT(t.l,n?e:null,!t.u),0<t.O&&(t.M=new wp(Le(t.Pa,t,t.g),t.O)),UD(t.U,t.g,"readystatechange",t.nb),e=t.I?RD(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),io(),lk(t.j,t.v,t.B,t.m,t.W,t.u)}function QD(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function YD(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=gk(t,n),i==Dp){e==4&&(t.s=4,qe(14),r=!1),wi(t.j,t.m,null,"[Incomplete Response]");break}else if(i==WD){t.s=4,qe(15),wi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else wi(t.j,t.m,i,null),Cp(t,i);QD(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,qe(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qp(e),e.M=!0,qe(11))):(wi(t.j,t.m,n,"[Invalid Chunked Response]"),fr(t),Js(t))}function gk(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Dp:(n=Number(e.substring(n,r)),isNaN(n)?WD:(r+=1,r+n>e.length?Dp:(e=e.slice(r,r+n),t.o=r+n,e)))}function fo(t){t.Y=Date.now()+t.P,ZD(t,t.P)}function ZD(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=uo(Le(t.lb,t),e)}function Nu(t){t.C&&(M.clearTimeout(t.C),t.C=null)}function Js(t){t.l.H==0||t.J||_T(t.l,t)}function fr(t){Nu(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Up(t.V),jD(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Cp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||bp(n.i,t))){if(!t.K&&bp(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)_u(n),Fu(n);else break e;Kp(n),qe(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=uo(Le(n.ib,n),6e3));if(1>=sT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else pr(n,11)}else if((t.K||n.g==t)&&_u(n),!Xs(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let _=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var s=r.i;s.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(qp(s,s.h),s.h=null))}if(r.F){let E=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,ie(r.I,r.F,E))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=ET(r,r.J?r.pa:null,r.Y),o.K){oT(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Nu(a),fo(a)),r.g=o}else yT(r);0<n.j.length&&Lu(n)}else u[0]!="stop"&&u[0]!="close"||pr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?pr(n,7):Wp(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}io(4)}catch{}}function mk(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Du(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function yk(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Du(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function JD(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Du(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=yk(t),r=mk(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}function vk(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function gr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof gr){this.h=t.h,yu(this,t.j),this.s=t.s,this.g=t.g,vu(this,t.m),this.l=t.l;var e=t.i,n=new so;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),vD(this,n),this.o=t.o}else t&&(e=String(t).match(XD))?(this.h=!1,yu(this,e[1]||"",!0),this.s=Ys(e[2]||""),this.g=Ys(e[3]||"",!0),vu(this,e[4]),this.l=Ys(e[5]||"",!0),vD(this,e[6]||"",!0),this.o=Ys(e[7]||"")):(this.h=!1,this.i=new so(null,this.h))}function cn(t){return new gr(t)}function yu(t,e,n){t.j=n?Ys(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function vu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function vD(t,e,n){e instanceof so?(t.i=e,Tk(t.i,t.h)):(n||(e=Zs(e,Ek)),t.i=new so(e,t.h))}function ie(t,e,n){t.i.set(e,n)}function Pu(t){return ie(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ys(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Zs(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,_k),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _k(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}function so(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Sn(t){t.g||(t.g=new Map,t.h=0,t.i&&vk(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function eT(t,e){Sn(t),e=Ti(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function tT(t,e){return Sn(t),e=Ti(t,e),t.g.has(e)}function nT(t,e,n){eT(t,e),0<n.length&&(t.i=null,t.g.set(Ti(t,e),Mp(n)),t.h+=n.length)}function Ti(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Tk(t,e){e&&!t.j&&(Sn(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(eT(this,r),nT(this,i,n))},t)),t.j=e}function rT(t){this.l=t||bk,M.PerformanceNavigationTiming?(t=M.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(M.g&&M.g.Ka&&M.g.Ka()&&M.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function iT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function sT(t){return t.h?1:t.g?t.g.size:0}function bp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function qp(t,e){t.g?t.g.add(e):t.h=e}function oT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function aT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Mp(t.i)}function Ak(){this.g=new Sk}function Rk(t,e,n){let r=n||"";try{JD(t,function(i,s){let o=i;ao(i)&&(o=Lp(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Mk(t,e){let n=new Au;if(M.Image){let r=new Image;r.onload=lu(gu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=lu(gu,n,r,"TestLoadImage: error",!1,e),r.onabort=lu(gu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=lu(gu,n,r,"TestLoadImage: timeout",!1,e),M.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function gu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function po(t){this.l=t.ec||null,this.j=t.ob||!1}function Ou(t,e){Ce.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=zp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}function cT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function go(t){t.readyState=4,t.l=null,t.j=null,t.A=null,oo(t)}function oo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ae(t){Ce.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=uT,this.L=this.M=!1}function Ok(t){return Di&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function ID(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,lT(t),ku(t)}function lT(t){t.F||(t.F=!0,Ne(t,"complete"),Ne(t,"error"))}function dT(t){if(t.h&&typeof Rp<"u"&&(!t.C[1]||Ut(t)!=4||t.da()!=2)){if(t.v&&Ut(t)==4)jp(t.La,0,t);else if(Ne(t,"readystatechange"),Ut(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(XD)[1]||null;!i&&M.self&&M.self.location&&(i=M.self.location.protocol.slice(0,-1)),r=!Nk.test(i?i.toLowerCase():"")}n=r}if(n)Ne(t,"complete"),Ne(t,"success");else{t.m=6;try{var s=2<Ut(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",lT(t)}}finally{ku(t)}}}}function ku(t,e){if(t.g){hT(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ne(t,"ready");try{n.onreadystatechange=r}catch{}}}function hT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(M.clearTimeout(t.A),t.A=null)}function Ut(t){return t.g?t.g.readyState:0}function wD(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case uT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function kk(t){let e={};t=(t.g&&2<=Ut(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Xs(t[r]))continue;var n=ak(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}rk(e,function(r){return r.join(", ")})}function fT(t){let e="";return Np(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Gp(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=fT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ie(t,e,n))}function Ks(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function pT(t){this.Ga=0,this.j=[],this.l=new Au,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ks("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ks("baseRetryDelayMs",5e3,t),this.hb=Ks("retryDelaySeedMs",1e4,t),this.eb=Ks("forwardChannelMaxRetries",2,t),this.xa=Ks("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new rT(t&&t.concurrentRequestLimit),this.Ja=new Ak,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Wp(t){if(gT(t),t.H==3){var e=t.W++,n=cn(t.I);if(ie(n,"SID",t.K),ie(n,"RID",e),ie(n,"TYPE","terminate"),mo(t,n),e=new ho(t,t.l,e),e.L=2,e.A=Pu(cn(n)),n=!1,M.navigator&&M.navigator.sendBeacon)try{n=M.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&M.Image&&(new Image().src=e.A,n=!0),n||(e.g=DT(e.l,null),e.g.ha(e.A)),e.G=Date.now(),fo(e)}wT(t)}function Fu(t){t.g&&(Qp(t),t.g.cancel(),t.g=null)}function gT(t){Fu(t),t.u&&(M.clearTimeout(t.u),t.u=null),_u(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&M.clearTimeout(t.m),t.m=null)}function Lu(t){if(!iT(t.i)&&!t.m){t.m=!0;var e=t.Na;to||LD(),no||(to(),no=!0),Vp.add(e,t),t.C=0}}function Fk(t,e){return sT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=uo(Le(t.Na,t,e),IT(t,t.C)),t.C++,!0)}function ED(t,e){var n;e?n=e.m:n=t.W++;let r=cn(t.I);ie(r,"SID",t.K),ie(r,"RID",n),ie(r,"AID",t.V),mo(t,r),t.o&&t.s&&Gp(r,t.o,t.s),n=new ho(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=mT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),qp(t.i,n),Tp(n,r,e)}function mo(t,e){t.na&&Np(t.na,function(n,r){ie(e,r,n)}),t.h&&JD({},function(n,r){ie(e,r,n)})}function mT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Le(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{Rk(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function yT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;to||LD(),no||(to(),no=!0),Vp.add(e,t),t.A=0}}function Kp(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=uo(Le(t.Ma,t),IT(t,t.A)),t.A++,!0)}function Qp(t){t.B!=null&&(M.clearTimeout(t.B),t.B=null)}function vT(t){t.g=new ho(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=cn(t.wa);ie(e,"RID","rpc"),ie(e,"SID",t.K),ie(e,"AID",t.V),ie(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ie(e,"TO",t.qa),ie(e,"TYPE","xmlhttp"),mo(t,e),t.o&&t.s&&Gp(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Pu(cn(e)),n.u=null,n.S=!0,KD(n,t)}function _u(t){t.v!=null&&(M.clearTimeout(t.v),t.v=null)}function _T(t,e){var n=null;if(t.g==e){_u(t),Qp(t),t.g=null;var r=2}else if(bp(t.i,e))n=e.F,oT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Ru(),Ne(r,new HD(r,n)),Lu(t)}else yT(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&Fk(t,e)||r==2&&Kp(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:pr(t,5);break;case 4:pr(t,10);break;case 3:pr(t,6);break;default:pr(t,2)}}}function IT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function pr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Le(t.pb,t);n||(n=new gr("//www.google.com/images/cleardot.gif"),M.location&&M.location.protocol=="http"||yu(n,"https"),Pu(n)),Mk(n.toString(),r)}else qe(2);t.H=0,t.h&&t.h.za(e),wT(t),gT(t)}function wT(t){if(t.H=0,t.ma=[],t.h){let e=aT(t.i);(e.length!=0||t.j.length!=0)&&(fD(t.ma,e),fD(t.ma,t.j),t.i.i.length=0,Mp(t.j),t.j.length=0),t.h.ya()}}function ET(t,e,n){var r=n instanceof gr?cn(n):new gr(n);if(r.g!="")e&&(r.g=e+"."+r.g),vu(r,r.m);else{var i=M.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new gr(null);r&&yu(s,r),e&&(s.g=e),i&&vu(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&ie(r,n,e),ie(r,"VER",t.ra),mo(t,r),r}function DT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new ae(new po({ob:n})):new ae(t.va),e.Oa(t.J),e}function TT(){}function Iu(){if(Di&&!(10<=Number(XO)))throw Error("Environmental error: no available transport.")}function tt(t,e){Ce.call(this),this.g=new pT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Xs(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xs(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ci(this)}function CT(t){$p.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}function bT(){Hp.call(this),this.status=1}function Ci(t){this.g=t}function Lk(){this.blockSize=-1}function Et(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function hp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function X(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}function Yp(t){return-128<=t&&128>t?YO(t,function(e){return new X([e|0],0>e?-1:0)}):new X([t|0],0>t?-1:0)}function jt(t){if(isNaN(t)||!isFinite(t))return Ei;if(0>t)return xe(jt(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Sp;return new X(e,0)}function ST(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return xe(ST(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=jt(Math.pow(e,8)),r=Ei,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=jt(Math.pow(e,s)),r=r.R(s).add(jt(o))):(r=r.R(n),r=r.add(jt(o)))}return r}function an(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function lt(t){return t.h==-1}function xe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new X(n,~t.h).add(Ap)}function wu(t,e){return t.add(xe(e))}function mu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Qs(t,e){this.g=t,this.h=e}function Eu(t,e){if(an(e))throw Error("division by zero");if(an(t))return new Qs(Ei,Ei);if(lt(t))return e=Eu(xe(t),e),new Qs(xe(e.g),xe(e.h));if(lt(e))return e=Eu(t,xe(e)),new Qs(xe(e.g),e.h);if(30<t.g.length){if(lt(t)||lt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ap,r=e;0>=r.X(t);)n=TD(n),r=TD(r);var i=Ii(n,1),s=Ii(r,1);for(r=Ii(r,2),n=Ii(n,2);!an(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ii(r,1),n=Ii(n,1)}return e=wu(t,i.R(e)),new Qs(i,e)}for(i=Ei;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=jt(n),o=s.R(e);lt(o)||0<o.X(t);)n-=r,s=jt(n),o=s.R(e);an(s)&&(s=Ap),i=i.add(s),t=wu(t,o)}return new Qs(i,t)}function TD(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new X(n,t.h)}function Ii(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new X(i,t.h)}var HO,Dt,v,Rp,M,cp,zO,KO,CD,QO,ZO,Di,bD,fp,SD,JO,pp,du,hu,fu,gp,up,XO,ek,co,tk,pD,Pp,lp,dp,Lp,vp,_p,FD,Ip,to,no,Vp,LD,uk,wp,gD,mr,mD,Mu,qD,lo,Ep,pk,WD,Dp,XD,_D,Ik,wk,Ek,Dk,Ck,bk,Sk,zp,xk,uT,Nk,Pk,Vk,Sp,Ei,Ap,DD,AT,RT,Vu,MT,xT,Zp,V4,yo,NT,PT,yr,OT=g(()=>{"use strict";HO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dt={},Rp=Rp||{},M=HO||self;cp="closure_uid_"+(1e9*Math.random()>>>0),zO=0;KO=0;bn.prototype.s=!1;bn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),KO!=0)&&qO(this)};bn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};CD=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};Ve.prototype.h=function(){this.defaultPrevented=!0};QO=function(){if(!M.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};M.addEventListener("test",n,e),M.removeEventListener("test",n,e)}catch{}return t}();xp[" "]=function(){};ZO=Vt("Opera"),Di=Vt("Trident")||Vt("MSIE"),bD=Vt("Edge"),fp=bD||Di,SD=Vt("Gecko")&&!(Tu().toLowerCase().indexOf("webkit")!=-1&&!Vt("Edge"))&&!(Vt("Trident")||Vt("MSIE"))&&!Vt("Edge"),JO=Tu().toLowerCase().indexOf("webkit")!=-1&&!Vt("Edge");e:{if(du="",hu=function(){var t=Tu();if(SD)return/rv:([^\);]+)(\)|;)/.exec(t);if(bD)return/Edge\/([\d\.]+)/.exec(t);if(Di)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(JO)return/WebKit\/(\S+)/.exec(t);if(ZO)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),hu&&(du=hu?hu[1]:""),Di&&(fu=AD(),fu!=null&&fu>parseFloat(du))){pp=String(fu);break e}pp=du}M.document&&Di?(up=AD(),gp=up||parseInt(pp,10)||void 0):gp=void 0;XO=gp;be(eo,Ve);ek={2:"touch",3:"pen",4:"mouse"};eo.prototype.h=function(){eo.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};co="closure_listenable_"+(1e6*Math.random()|0),tk=0;pD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");bu.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=yp(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new nk(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};Pp="closure_lm_"+(1e6*Math.random()|0),lp={};dp="__closure_events_fn_"+(1e9*Math.random()>>>0);be(Ce,bn);Ce.prototype[co]=!0;Ce.prototype.removeEventListener=function(t,e,n,r){OD(this,t,e,n,r)};Ce.prototype.N=function(){if(Ce.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Cu(n[r]);delete t.g[e],t.h--}}this.J=null};Ce.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ce.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};Lp=M.JSON.stringify,vp=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};_p=class{constructor(){this.h=this.g=null}add(e,n){let r=FD.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},FD=new vp(()=>new Ip,t=>t.reset()),Ip=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};no=!1,Vp=new _p,LD=()=>{let t=M.Promise.resolve(void 0);to=()=>{t.then(uk)}},uk=()=>{for(var t;t=ok();){try{t.h.call(t.g)}catch(n){ck(n)}var e=FD;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}no=!1};be(Su,Ce);v=Su.prototype;v.ga=!1;v.T=null;v.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ne(this,"tick"),this.ga&&(Up(this),this.start()))}};v.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};v.N=function(){Su.$.N.call(this),Up(this),delete this.g};wp=class extends bn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:VD(this)}N(){super.N(),this.g&&(M.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};be(ro,bn);gD=[];ro.prototype.N=function(){ro.$.N.call(this),jD(this)};ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};Au.prototype.Ea=function(){this.g=!1};Au.prototype.info=function(){};mr={},mD=null;mr.Ta="serverreachability";be(BD,Ve);mr.STAT_EVENT="statevent";be($D,Ve);mr.Ua="timingevent";be(HD,Ve);Mu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qD={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};Bp.prototype.h=null;lo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};be($p,Ve);be(Hp,Ve);be(xu,Bp);xu.prototype.g=function(){return new XMLHttpRequest};xu.prototype.i=function(){return{}};Ep=new xu;pk=45e3,WD={},Dp={};v=ho.prototype;v.setTimeout=function(t){this.P=t};v.nb=function(t){t=t.target;let e=this.M;e&&Ut(t)==3?e.l():this.Pa(t)};v.Pa=function(t){try{if(t==this.g)e:{let l=Ut(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||fp||this.g&&(this.h.h||this.g.ja()||wD(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?io(3):io(2)),Nu(this);var n=this.g.da();this.ca=n;t:if(QD(this)){var r=wD(this.g);t="";var i=r.length,s=Ut(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fr(this),Js(this);var o="";break t}this.h.i=new M.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,dk(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xs(a)){var u=a;break t}}u=null}if(n=u)wi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cp(this,n);else{this.i=!1,this.s=3,qe(12),fr(this),Js(this);break e}}this.S?(YD(this,l,o),fp&&this.i&&l==3&&(UD(this.U,this.V,"tick",this.mb),this.V.start())):(wi(this.j,this.m,o,null),Cp(this,o)),l==4&&fr(this),this.i&&!this.J&&(l==4?_T(this.l,this):(this.i=!1,fo(this)))}else kk(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),fr(this),Js(this)}}}catch{}finally{}};v.mb=function(){if(this.g){var t=Ut(this.g),e=this.g.ja();this.o<e.length&&(Nu(this),YD(this,t,e),this.i&&t!=4&&fo(this))}};v.cancel=function(){this.J=!0,fr(this)};v.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(hk(this.j,this.B),this.L!=2&&(io(),qe(17)),fr(this),this.s=2,Js(this)):ZD(this,this.Y-t)};XD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");gr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Zs(e,_D,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Zs(e,_D,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Zs(n,n.charAt(0)=="/"?wk:Ik,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Zs(n,Dk)),t.join("")};_D=/[#\/\?@]/g,Ik=/[#\?:]/g,wk=/[#\?]/g,Ek=/[#\?@]/g,Dk=/#/g;v=so.prototype;v.add=function(t,e){Sn(this),this.i=null,t=Ti(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};v.forEach=function(t,e){Sn(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};v.ta=function(){Sn(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};v.Z=function(t){Sn(this);let e=[];if(typeof t=="string")tT(this,t)&&(e=e.concat(this.g.get(Ti(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};v.set=function(t,e){return Sn(this),this.i=null,t=Ti(this,t),tT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};v.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};v.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};Ck=class{constructor(t,e){this.g=t,this.map=e}};bk=10;rT.prototype.cancel=function(){if(this.i=aT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};Sk=class{stringify(t){return M.JSON.stringify(t,void 0)}parse(t){return M.JSON.parse(t,void 0)}};be(po,Bp);po.prototype.g=function(){return new Ou(this.l,this.j)};po.prototype.i=function(t){return function(){return t}}({});be(Ou,Ce);zp=0;v=Ou.prototype;v.open=function(t,e){if(this.readyState!=zp)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,oo(this)};v.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||M).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};v.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=zp};v.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,oo(this)),this.g&&(this.readyState=3,oo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof M.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};v.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?go(this):oo(this),this.readyState==3&&cT(this)}};v.Za=function(t){this.g&&(this.response=this.responseText=t,go(this))};v.Ya=function(t){this.g&&(this.response=t,go(this))};v.ka=function(){this.g&&go(this)};v.setRequestHeader=function(t,e){this.v.append(t,e)};v.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};v.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};Object.defineProperty(Ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});xk=M.JSON.parse;be(ae,Ce);uT="",Nk=/^https?$/i,Pk=["POST","PUT"];v=ae.prototype;v.Oa=function(t){this.M=t};v.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ep.g(),this.C=this.u?yD(this.u):yD(Ep),this.g.onreadystatechange=Le(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){ID(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=M.FormData&&t instanceof M.FormData,!(0<=CD(Pk,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{hT(this),0<this.B&&((this.L=Ok(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Le(this.ua,this)):this.A=jp(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){ID(this,s)}};v.ua=function(){typeof Rp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ne(this,"timeout"),this.abort(8))};v.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ne(this,"complete"),Ne(this,"abort"),ku(this))};v.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ku(this,!0)),ae.$.N.call(this)};v.La=function(){this.s||(this.G||this.v||this.l?dT(this):this.kb())};v.kb=function(){dT(this)};v.isActive=function(){return!!this.g};v.da=function(){try{return 2<Ut(this)?this.g.status:-1}catch{return-1}};v.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};v.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),xk(e)}};v.Ia=function(){return this.m};v.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};v=pT.prototype;v.ra=8;v.H=1;v.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new ho(this,this.l,t),s=this.s;if(this.U&&(s?(s=RD(s),MD(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=mT(this,i,e),n=cn(this.I),ie(n,"RID",t),ie(n,"CVER",22),this.F&&ie(n,"X-HTTP-Session-Id",this.F),mo(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(fT(s)))+"&"+e:this.o&&Gp(n,this.o,s)),qp(this.i,i),this.bb&&ie(n,"TYPE","init"),this.P?(ie(n,"$req",e),ie(n,"SID","null"),i.aa=!0,Tp(i,n,null)):Tp(i,n,e),this.H=2}}else this.H==3&&(t?ED(this,t):this.j.length==0||iT(this.i)||ED(this))};v.Ma=function(){if(this.u=null,vT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=uo(Le(this.jb,this),t)}};v.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qe(10),Fu(this),vT(this))};v.ib=function(){this.v!=null&&(this.v=null,Fu(this),Kp(this),qe(19))};v.pb=function(t){t?(this.l.info("Successfully pinged google.com"),qe(2)):(this.l.info("Failed to ping google.com"),qe(1))};v.isActive=function(){return!!this.h&&this.h.isActive(this)};v=TT.prototype;v.Ba=function(){};v.Aa=function(){};v.za=function(){};v.ya=function(){};v.isActive=function(){return!0};v.Va=function(){};Iu.prototype.g=function(t,e){return new tt(t,e)};be(tt,Ce);tt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;qe(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=ET(t,null,t.Y),Lu(t)};tt.prototype.close=function(){Wp(this.g)};tt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Lp(t),t=n);e.j.push(new Ck(e.fb++,t)),e.H==3&&Lu(e)};tt.prototype.N=function(){this.g.h=null,delete this.j,Wp(this.g),delete this.g,tt.$.N.call(this)};be(CT,$p);be(bT,Hp);be(Ci,TT);Ci.prototype.Ba=function(){Ne(this.g,"a")};Ci.prototype.Aa=function(t){Ne(this.g,new CT(t))};Ci.prototype.za=function(t){Ne(this.g,new bT)};Ci.prototype.ya=function(){Ne(this.g,"b")};be(Et,Lk);Et.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};Et.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)hp(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){hp(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){hp(this,r),i=0;break}}this.h=i,this.i+=e};Et.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};Vk={};Sp=4294967296,Ei=Yp(0),Ap=Yp(1),DD=Yp(16777216);v=X.prototype;v.ea=function(){if(lt(this))return-xe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Sp+r)*e,e*=Sp}return t};v.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(an(this))return"0";if(lt(this))return"-"+xe(this).toString(t);for(var e=jt(Math.pow(t,6)),n=this,r="";;){var i=Eu(n,e).g;n=wu(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,an(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};v.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};v.X=function(t){return t=wu(this,t),lt(t)?-1:an(t)?0:1};v.abs=function(){return lt(this)?xe(this):this};v.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new X(n,n[n.length-1]&-2147483648?-1:0)};v.R=function(t){if(an(this)||an(t))return Ei;if(lt(this))return lt(t)?xe(this).R(xe(t)):xe(xe(this).R(t));if(lt(t))return xe(this.R(xe(t)));if(0>this.X(DD)&&0>t.X(DD))return jt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,mu(n,2*r+2*i),n[2*r+2*i+1]+=s*c,mu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,mu(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,mu(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new X(n,0)};v.gb=function(t){return Eu(this,t).h};v.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new X(n,this.h&t.h)};v.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new X(n,this.h|t.h)};v.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new X(n,this.h^t.h)};Iu.prototype.createWebChannel=Iu.prototype.g;tt.prototype.send=tt.prototype.u;tt.prototype.open=tt.prototype.m;tt.prototype.close=tt.prototype.close;Mu.NO_ERROR=0;Mu.TIMEOUT=8;Mu.HTTP_ERROR=6;qD.COMPLETE="complete";zD.EventType=lo;lo.OPEN="a";lo.CLOSE="b";lo.ERROR="c";lo.MESSAGE="d";Ce.prototype.listen=Ce.prototype.O;ae.prototype.listenOnce=ae.prototype.P;ae.prototype.getLastError=ae.prototype.Sa;ae.prototype.getLastErrorCode=ae.prototype.Ia;ae.prototype.getStatus=ae.prototype.da;ae.prototype.getResponseJson=ae.prototype.Wa;ae.prototype.getResponseText=ae.prototype.ja;ae.prototype.send=ae.prototype.ha;ae.prototype.setWithCredentials=ae.prototype.Oa;Et.prototype.digest=Et.prototype.l;Et.prototype.reset=Et.prototype.reset;Et.prototype.update=Et.prototype.j;X.prototype.add=X.prototype.add;X.prototype.multiply=X.prototype.R;X.prototype.modulo=X.prototype.gb;X.prototype.compare=X.prototype.X;X.prototype.toNumber=X.prototype.ea;X.prototype.toString=X.prototype.toString;X.prototype.getBits=X.prototype.D;X.fromNumber=jt;X.fromString=ST;AT=Dt.createWebChannelTransport=function(){return new Iu},RT=Dt.getStatEventTarget=function(){return Ru()},Vu=Dt.ErrorCode=Mu,MT=Dt.EventType=qD,xT=Dt.Event=mr,Zp=Dt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},V4=Dt.FetchXmlHttpFactory=po,yo=Dt.WebChannel=zD,NT=Dt.XhrIo=ae,PT=Dt.Md5=Et,yr=Dt.Integer=X});function vo(){return Tr.logLevel}function I(t,...e){if(Tr.logLevel<=B.DEBUG){let n=e.map(Vm);Tr.debug(`Firestore (${qi}): ${t}`,...n)}}function qt(t,...e){if(Tr.logLevel<=B.ERROR){let n=e.map(Vm);Tr.error(`Firestore (${qi}): ${t}`,...n)}}function Oi(t,...e){if(Tr.logLevel<=B.WARN){let n=e.map(Vm);Tr.warn(`Firestore (${qi}): ${t}`,...n)}}function Vm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function P(t="Unexpected state"){let e=`FIRESTORE (${qi}) INTERNAL ASSERTION FAILED: `+t;throw qt(e),new Error(e)}function _e(t,e){t||P()}function Q(t,e){return t}function Uk(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function Y(t,e){return t<e?-1:t>e?1:0}function ki(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Bk(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=k.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new Cr(i,b.empty(),e)}function $k(t){return new Cr(t.readTime,t.key,-1)}function Hk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=b.comparator(t.documentKey,e.documentKey),n!==0?n:Y(t.largestBatchId,e.largestBatchId))}function Um(t){return p(this,null,function*(){if(t.code!==y.FAILED_PRECONDITION||t.message!==qk)throw t;I("LocalStore","Unexpectedly lost primary lease")})}function Bo(t){return t.name==="IndexedDbTransactionError"}function vr(t){return new m((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=jm(r.target.error);n(i)}})}function jm(t){let e=zu.S(Fe());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FT||(FT=!0,setTimeout(()=>{throw r},0)),r}}return t}function ml(t){return t==null}function Co(t){return t===0&&1/t==-1/0}function zk(t){return typeof t=="number"&&Number.isInteger(t)&&!Co(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function LT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $o(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function An(t){if(_e(!!t),typeof t=="string"){let e=0,n=Qk.exec(t);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ce(t.seconds),nanos:ce(t.nanos)}}function ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rn(t){return typeof t=="string"?ze.fromBase64String(t):ze.fromUint8Array(t)}function Bm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $m(t){let e=t.mapValue.fields.__previous_value__;return Bm(e)?$m(e):e}function bo(t){let e=An(t.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}function br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bm(t)?4:mC(t)?9007199254740991:10:P()}function zt(t,e){if(t===e)return!0;let n=br(t);if(n!==br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bo(t).isEqual(bo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=An(i.timestampValue),a=An(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Rn(i.bytesValue).isEqual(Rn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ce(i.geoPointValue.latitude)===ce(s.geoPointValue.latitude)&&ce(i.geoPointValue.longitude)===ce(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ce(i.integerValue)===ce(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ce(i.doubleValue),a=ce(s.doubleValue);return o===a?Co(o)===Co(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ki(t.arrayValue.values||[],e.arrayValue.values||[],zt);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(LT(o)!==LT(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!zt(o[c],a[c])))return!1;return!0}(t,e);default:return P()}}function So(t,e){return(t.values||[]).find(n=>zt(n,e))!==void 0}function Fi(t,e){if(t===e)return 0;let n=br(t),r=br(e);if(n!==r)return Y(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ce(s.integerValue||s.doubleValue),c=ce(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return VT(t.timestampValue,e.timestampValue);case 4:return VT(bo(t),bo(e));case 5:return Y(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Rn(s),c=Rn(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=Y(a[u],c[u]);if(l!==0)return l}return Y(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Y(ce(s.latitude),ce(o.latitude));return a!==0?a:Y(ce(s.longitude),ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=Fi(a[u],c[u]);if(l)return l}return Y(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Uu.mapValue&&o===Uu.mapValue)return 0;if(s===Uu.mapValue)return 1;if(o===Uu.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=Y(c[d],l[d]);if(h!==0)return h;let f=Fi(a[c[d]],u[l[d]]);if(f!==0)return f}return Y(c.length,l.length)}(t.mapValue,e.mapValue);default:throw P()}}function VT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Y(t,e);let n=An(t),r=An(e),i=Y(n.seconds,r.seconds);return i!==0?i:Y(n.nanos,r.nanos)}function Li(t){return yg(t)}function yg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=An(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Rn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return b.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=yg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${yg(n.fields[o])}`;return i+"}"}(t.mapValue):P()}function UT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vg(t){return!!t&&"integerValue"in t}function Hm(t){return!!t&&"arrayValue"in t}function jT(t){return!!t&&"nullValue"in t}function BT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jp(t){return!!t&&"mapValue"in t}function Io(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return $o(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Io(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Io(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function $T(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=b.comparator(b.fromName(o.referenceValue),n.key):r=Fi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function HT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zt(t.position[n],e.position[n]))return!1;return!0}function Yk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function yC(t){return t.op==="and"}function vC(t){return Zk(t)&&yC(t)}function Zk(t){for(let e of t.filters)if(e instanceof Ct)return!1;return!0}function _g(t){if(t instanceof ve)return t.field.canonicalString()+t.op.toString()+Li(t.value);if(vC(t))return t.filters.map(e=>_g(e)).join(",");{let e=t.filters.map(n=>_g(n)).join(",");return`${t.op}(${e})`}}function _C(t,e){return t instanceof ve?function(r,i){return i instanceof ve&&r.op===i.op&&r.field.isEqual(i.field)&&zt(r.value,i.value)}(t,e):t instanceof Ct?function(r,i){return i instanceof Ct&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&_C(o,i.filters[a]),!0):!1}(t,e):void P()}function IC(t){return t instanceof ve?function(n){return`${n.field.canonicalString()} ${n.op} ${Li(n.value)}`}(t):t instanceof Ct?function(n){return n.op.toString()+" {"+n.getFilters().map(IC).join(" ,")+"}"}(t):"Filter"}function wC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>b.fromName(r.referenceValue))}function qT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Sg(t,e,n,r,i,s,o)}function qm(t){let e=Q(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_g(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ml(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Li(r)).join(",")),e.ce=n}return e.ce}function zm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Yk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_C(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HT(t.startAt,e.startAt)&&HT(t.endAt,e.endAt)}function Ag(t){return b.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Jk(t,e,n,r,i,s,o,a){return new Mn(t,e,n,r,i,s,o,a)}function Gm(t){return new Mn(t)}function zT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EC(t){return t.collectionGroup!==null}function wo(t){let e=Q(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Be(dt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Sr(s,r))}),n.has(dt.keyField().canonicalString())||e.le.push(new Sr(dt.keyField(),r))}return e.le}function Ht(t){let e=Q(t);return e.he||(e.he=Xk(e,wo(t))),e.he}function Xk(t,e){if(t.limitType==="F")return qT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Sr(i.field,s)});let n=t.endAt?new Vi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vi(t.startAt.position,t.startAt.inclusive):null;return qT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rg(t,e){let n=t.filters.concat([e]);return new Mn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mg(t,e,n){return new Mn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yl(t,e){return zm(Ht(t),Ht(e))&&t.limitType===e.limitType}function DC(t){return`${qm(Ht(t))}|lt:${t.limitType}`}function bi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>IC(i)).join(", ")}]`),ml(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Li(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Li(i)).join(",")),`Target(${r})`}(Ht(t))}; limitType=${t.limitType})`}function vl(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):b.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of wo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=$T(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,wo(r),i)||r.endAt&&!function(o,a,c){let u=$T(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,wo(r),i))}(t,e)}function e1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TC(t){return(e,n)=>{let r=!1;for(let i of wo(t)){let s=t1(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function t1(t,e,n){let r=t.field.isKeyField()?b.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Fi(c,u):P()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return P()}}function Nn(){return n1}function _o(...t){let e=CC;for(let n of t)e=e.insert(n.key,n);return e}function r1(t){let e=CC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ir(){return Eo()}function bC(){return Eo()}function Eo(){return new xn(t=>t.toString(),(t,e)=>t.isEqual(e))}function K(...t){let e=i1;for(let n of t)e=e.add(n);return e}function o1(){return s1}function SC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Co(e)?"-0":e}}function AC(t){return{integerValue:""+t}}function a1(t,e){return zk(e)?AC(e):SC(t,e)}function c1(t,e,n){return t instanceof Ao?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Bm(s)&&(s=$m(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ji?RC(t,e):t instanceof Bi?MC(t,e):function(i,s){let o=l1(i,s),a=GT(o)+GT(i.Ie);return vg(o)&&vg(i.Ie)?AC(a):SC(i.serializer,a)}(t,e)}function u1(t,e,n){return t instanceof ji?RC(t,e):t instanceof Bi?MC(t,e):n}function l1(t,e){return t instanceof Ro?function(r){return vg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}function RC(t,e){let n=xC(e);for(let r of t.elements)n.some(i=>zt(i,r))||n.push(r);return{arrayValue:{values:n}}}function MC(t,e){let n=xC(e);for(let r of t.elements)n=n.filter(i=>!zt(i,r));return{arrayValue:{values:n}}}function GT(t){return ce(t.integerValue||t.doubleValue)}function xC(t){return Hm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function d1(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ji&&i instanceof ji||r instanceof Bi&&i instanceof Bi?ki(r.elements,i.elements,zt):r instanceof Ro&&i instanceof Ro?zt(r.Ie,i.Ie):r instanceof Ao&&i instanceof Ao}(t.transform,e.transform)}function Bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}function NC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xg(t.key,Do.none()):new xo(t.key,t.data,Do.none());{let n=t.data,r=un.empty(),i=new Be(dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new $i(t.key,r,new _r(i.toArray()),Do.none())}}function h1(t,e,n){t instanceof xo?function(i,s,o){let a=i.value.clone(),c=KT(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof $i?function(i,s,o){if(!Bu(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=KT(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(PC(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function To(t,e,n,r){return t instanceof xo?function(s,o,a,c){if(!Bu(s.precondition,o))return a;let u=s.value.clone(),l=QT(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof $i?function(s,o,a,c){if(!Bu(s.precondition,o))return a;let u=QT(s.fieldTransforms,c,o),l=o.data;return l.setAll(PC(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Bu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function WT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ki(r,i,(s,o)=>d1(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function PC(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function KT(t,e,n){let r=new Map;_e(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,u1(o,a,n[i]))}return r}function QT(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,c1(s,o,e))}return r}function OC(t){if(t===void 0)return qt("GRPC error has no .code"),y.UNKNOWN;switch(t){case me.OK:return y.OK;case me.CANCELLED:return y.CANCELLED;case me.UNKNOWN:return y.UNKNOWN;case me.DEADLINE_EXCEEDED:return y.DEADLINE_EXCEEDED;case me.RESOURCE_EXHAUSTED:return y.RESOURCE_EXHAUSTED;case me.INTERNAL:return y.INTERNAL;case me.UNAVAILABLE:return y.UNAVAILABLE;case me.UNAUTHENTICATED:return y.UNAUTHENTICATED;case me.INVALID_ARGUMENT:return y.INVALID_ARGUMENT;case me.NOT_FOUND:return y.NOT_FOUND;case me.ALREADY_EXISTS:return y.ALREADY_EXISTS;case me.PERMISSION_DENIED:return y.PERMISSION_DENIED;case me.FAILED_PRECONDITION:return y.FAILED_PRECONDITION;case me.ABORTED:return y.ABORTED;case me.OUT_OF_RANGE:return y.OUT_OF_RANGE;case me.UNIMPLEMENTED:return y.UNIMPLEMENTED;case me.DATA_LOSS:return y.DATA_LOSS;default:return P()}}function f1(){return new TextEncoder}function ZT(t){let e=f1().encode(t),n=new PT;return n.update(e),new Uint8Array(n.digest())}function JT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yr([n,r],0),new yr([i,s],0)]}function XT(){return new he(b.comparator)}function eC(){return new he(b.comparator)}function Vg(t,e){return t.useProto3Json||ml(e)?e:{value:e}}function Ug(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xi(t){return _e(!!t),k.fromTimestamp(function(n){let r=An(n);return new je(r.seconds,r.nanos)}(t))}function FC(t,e){return jg(t,e).canonicalString()}function jg(t,e){let n=function(i){return new de(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LC(t){let e=de.fromString(t);return _e($C(e)),e}function Xp(t,e){let n=LC(e);if(n.get(1)!==t.databaseId.projectId)throw new w(y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new b(UC(n))}function VC(t,e){return FC(t.databaseId,e)}function v1(t){let e=LC(t);return e.length===4?de.emptyPath():UC(e)}function tC(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UC(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _1(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:P()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(_e(l===void 0||typeof l=="string"),ze.fromBase64String(l||"")):(_e(l===void 0||l instanceof Uint8Array),ze.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?y.UNKNOWN:OC(u.code);return new w(l,u.message||"")}(o);n=new Ju(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Xp(t,r.document.name),s=xi(r.document.updateTime),o=r.document.createTime?xi(r.document.createTime):k.min(),a=new un({mapValue:{fields:r.document.fields}}),c=Tt.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Mi(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Xp(t,r.document),s=r.readTime?xi(r.readTime):k.min(),o=Tt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Mi([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Xp(t,r.document),s=r.removedTargetIds||[];n=new Mi([],s,i,null)}else{if(!("filter"in e))return P();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Og(i,s),a=r.targetId;n=new Zu(a,o)}}return n}function I1(t,e){return{documents:[VC(t,e.path)]}}function w1(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VC(t,i);let s=function(u){if(u.length!==0)return BC(Ct.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:Si(h.field),direction:T1(h.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Vg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function E1(t){let e=v1(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_e(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=jC(d);return h instanceof Ct&&vC(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(_){return new Sr(Ai(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,ml(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Vi(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new Vi(f,h)}(n.endAt)),Jk(e,i,o,s,a,"F",c,u)}function D1(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ai(n.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ai(n.unaryFilter.field);return ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ai(n.unaryFilter.field);return ve.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ai(n.unaryFilter.field);return ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return P()}}(t):t.fieldFilter!==void 0?function(n){return ve.create(Ai(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return P()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ct.create(n.compositeFilter.filters.map(r=>jC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return P()}}(n.compositeFilter.op))}(t):P()}function T1(t){return g1[t]}function C1(t){return m1[t]}function b1(t){return y1[t]}function Si(t){return{fieldPath:t.canonicalString()}}function Ai(t){return dt.fromServerFormat(t.fieldPath)}function BC(t){return t instanceof ve?function(n){if(n.op==="=="){if(BT(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NAN"}};if(jT(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BT(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NOT_NAN"}};if(jT(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Si(n.field),op:C1(n.op),value:n.value}}}(t):t instanceof Ct?function(n){let r=n.getFilters().map(i=>BC(i));return r.length===1?r[0]:{compositeFilter:{op:b1(n.op),filters:r}}}(t):P()}function $C(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function S1(t){let e=E1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mg(e,e.limit,"L"):e}function A1(t,e,n,r){return new sm(t,e,n,r)}function HC(t,e){return p(this,null,function*(){let n=Q(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=K();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})}function qC(t){let e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function R1(t,e){let n=Q(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ze.EMPTY_BYTE_STRING,k.min()).withLastLimboFreeSnapshotVersion(k.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(E,T,A){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(s,f))});let c=Nn(),u=K();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(M1(s,o,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(k.min())){let l=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return m.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ns=i,s))}function M1(t,e,n){let r=K(),i=K();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Nn();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(k.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function x1(t,e){let n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,m.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Po(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function om(t,e,n){return p(this,null,function*(){let r=Q(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Bo(o))throw o;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function nC(t,e,n){let r=Q(t),i=k.min(),s=K();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=Q(c),h=d.rs.get(l);return h!==void 0?m.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,o,Ht(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:k.min(),n?s:K())).next(a=>(N1(r,e1(e),a),{documents:a,hs:s})))}function N1(t,e,n){let r=t.ss.get(e)||k.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function eg(){return ju===null?ju=function(){return 268435456+Math.round(2147483648*Math.random())}():ju++,"0x"+ju.toString(16)}function tg(){return typeof document<"u"?document:null}function _l(t){return new Lg(t,!0)}function Il(t){return p(this,null,function*(){if(qo(t))for(let e of t.F_)yield e(!0)})}function Ho(t){return p(this,null,function*(){for(let e of t.F_)yield e(!1)})}function zC(t,e){let n=Q(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Qm(n)?Km(n):zi(n).Jo()&&Wm(n,e))}function GC(t,e){let n=Q(t),r=zi(n);n.C_.delete(e),r.Jo()&&WC(n,e),n.C_.size===0&&(r.Jo()?r.Xo():qo(n)&&n.x_.set("Unknown"))}function Wm(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(k.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zi(t).c_(e)}function WC(t,e){t.O_.Oe(e),zi(t).l_(e)}function Km(t){t.O_=new Fg({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),zi(t).start(),t.x_.p_()}function Qm(t){return qo(t)&&!zi(t).Ho()&&t.C_.size>0}function qo(t){return Q(t).v_.size===0}function KC(t){t.O_=void 0}function O1(t){return p(this,null,function*(){t.C_.forEach((e,n)=>{Wm(t,e)})})}function k1(t,e){return p(this,null,function*(){KC(t),Qm(t)?(t.x_.S_(e),Km(t)):t.x_.set("Unknown")})}function F1(t,e,n){return p(this,null,function*(){if(t.x_.set("Online"),e instanceof Ju&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rC(t,r)}else if(e instanceof Mi?t.O_.$e(e):e instanceof Zu?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(k.min()))try{let r=yield qC(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.C_.get(u);l&&s.C_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.C_.get(c);if(!l)return;s.C_.set(c,l.withResumeToken(ze.EMPTY_BYTE_STRING,l.snapshotVersion)),WC(s,c);let d=new Po(l.target,c,u,l.sequenceNumber);Wm(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield rC(t,r)}})}function rC(t,e,n){return p(this,null,function*(){if(!Bo(e))throw e;t.v_.add(1),yield Ho(t),t.x_.set("Offline"),n||(n=()=>qC(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){I("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Il(t)}))})}function iC(t,e){return p(this,null,function*(){let n=Q(t);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");let r=qo(n);n.v_.add(3),yield Ho(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Il(n)})}function L1(t,e){return p(this,null,function*(){let n=Q(t);e?(n.v_.delete(2),yield Il(n)):e||(n.v_.add(2),yield Ho(n),n.x_.set("Unknown"))})}function zi(t){return t.N_||(t.N_=function(n,r,i){let s=Q(n);return s.R_(),new hm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:O1.bind(null,t),To:k1.bind(null,t),u_:F1.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.N_.Zo(),Qm(t)?Km(t):t.x_.set("Unknown")):(yield t.N_.stop(),KC(t))}))),t.N_}function QC(t,e){if(qt("AsyncQueue",`${e}: ${t}`),Bo(t))return new w(y.UNAVAILABLE,`${e}: ${t}`);throw t}function V1(t,e){return p(this,null,function*(){let n=Q(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new ym),i)try{s.q_=yield n.onListen(r)}catch(o){let a=QC(o,`Initialization of query '${bi(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&Ym(n)})}function U1(t,e){return p(this,null,function*(){let n=Q(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=s.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function j1(t,e){let n=Q(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&Ym(n)}function B1(t,e,n){let r=Q(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function Ym(t){t.K_.forEach(e=>{e.next()})}function $1(t,e){return p(this,null,function*(){let n=Q1(t),r,i,s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{let o=yield x1(n.localStore,Ht(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield H1(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&zC(n.remoteStore,o)}return i})}function H1(t,e,n,r,i){return p(this,null,function*(){t.Ma=(d,h,f)=>function(E,T,A,ee){return p(this,null,function*(){let fe=T.view.ha(A);fe.Xi&&(fe=yield nC(E.localStore,T.query,!1).then(({documents:Ye})=>T.view.ha(Ye,fe)));let ue=ee&&ee.targetChanges.get(T.targetId),Ie=ee&&ee.targetMismatches.get(T.targetId)!=null,re=T.view.applyChanges(fe,E.isPrimaryClient,ue,Ie);return oC(E,T.targetId,re.da),re.snapshot})}(t,d,h,f);let s=yield nC(t.localStore,e,!0),o=new Im(e,s.hs),a=o.ha(s.documents),c=No.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);oC(t,n,u.da);let l=new wm(e,n,o);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot})}function q1(t,e){return p(this,null,function*(){let n=Q(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!yl(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield om(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),GC(n.remoteStore,r.targetId),Tm(n,r.targetId)}).catch(Um))):(Tm(n,r.targetId),yield om(n.localStore,r.targetId,!0))})}function YC(t,e){return p(this,null,function*(){let n=Q(t);try{let r=yield R1(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Sa.get(s);o&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?_e(o.ma):i.removedDocuments.size>0&&(_e(o.ma),o.ma=!1))}),yield JC(n,r,e)}catch(r){yield Um(r)}})}function sC(t,e,n){let r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((s,o)=>{let a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=Q(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.U_(a)&&(u=!0)}),u&&Ym(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function z1(t,e,n){return p(this,null,function*(){let r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),s=i&&i.key;if(s){let o=new he(b.comparator);o=o.insert(s,Tt.newNoDocument(s,k.min()));let a=K().add(s),c=new Yu(k.min(),new Map,new he(Y),o,a);yield YC(r,c),r.wa=r.wa.remove(s),r.Sa.delete(e),Zm(r)}else yield om(r.localStore,e,!1).then(()=>Tm(r,e,n)).catch(Um)})}function Tm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||ZC(t,r)})}function ZC(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(GC(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Zm(t))}function oC(t,e,n){for(let r of n)r instanceof ol?(t.ba.addReference(r.key,e),G1(t,r)):r instanceof al?(I("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||ZC(t,r.key)):P()}function G1(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(I("SyncEngine","New document in limbo: "+n),t.ya.add(r),Zm(t))}function Zm(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new b(de.fromString(e)),r=t.va.next();t.Sa.set(r,new Em(n)),t.wa=t.wa.insert(n,r),zC(t.remoteStore,new Po(Ht(Gm(n.path)),r,"TargetPurposeLimboResolution",pC._e))}}function JC(t,e,n){return p(this,null,function*(){let r=Q(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=nm.Ki(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.fa.u_(i),yield function(c,u){return p(this,null,function*(){let l=Q(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>m.forEach(u,h=>m.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>m.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Bo(d))throw d;I("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),_=f.snapshotVersion,E=f.withLastLimboFreeSnapshotVersion(_);l.ns=l.ns.insert(h,E)}}})}(r.localStore,s))})}function W1(t,e){return p(this,null,function*(){let n=Q(t);if(!n.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());let r=yield HC(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(c=>{c.reject(new w(y.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield JC(n,r.us)}})}function K1(t,e){let n=Q(t),r=n.Sa.get(e);if(r&&r.ma)return K().add(r.key);{let i=K(),s=n.pa.get(e);if(!s)return i;for(let o of s){let a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function Q1(t){let e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z1.bind(null,e),e.fa.u_=j1.bind(null,e.eventManager),e.fa.xa=B1.bind(null,e.eventManager),e}function ng(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield HC(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function aC(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Z1(t);I("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iC(e.remoteStore,i)),t._onlineComponents=e})}function Y1(t){return t.name==="FirebaseError"?t.code===y.FAILED_PRECONDITION||t.code===y.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Z1(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ng(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!Y1(n))throw n;Oi("Error using user provided cache. Falling back to memory cache: "+n),yield ng(t,new cl)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield ng(t,new cl);return t._offlineComponents})}function J1(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield aC(t,t._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield aC(t,new Cm))),t._onlineComponents})}function cC(t){return p(this,null,function*(){let e=yield J1(t),n=e.eventManager;return n.onListen=$1.bind(null,e.syncEngine),n.onUnlisten=q1.bind(null,e.syncEngine),n})}function XC(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}function X1(t,e,n){if(!n)throw new w(y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eF(t,e,n,r){if(e===!0&&r===!0)throw new w(y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lC(t){if(b.isDocumentKey(t))throw new w(y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":P()}function $u(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=wl(t);throw new w(y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function eb(t,e,n,r={}){var i;let s=(t=$u(t,Fo))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Se.MOCK_USER;else{a=SE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new w(y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Se(u)}t._authCredentials=new ig(new Hu(a,c))}}function tb(t,e,...n){if(t=wt(t),X1("collection","path",e),t instanceof Fo){let r=de.fromString(e,...n);return lC(r),new Ni(t,null,r)}{if(!(t instanceof Gt||t instanceof Ni))throw new w(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(de.fromString(e,...n));return lC(r),new Ni(t.firestore,null,r)}}function dC(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}function nb(t,e){let n=typeof t=="object"?t:Bs(),r=typeof t=="string"?t:e||"(default)",i=Bf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=CE("firestore");s&&eb(i,...s)}return i}function tF(t){return t._firestoreClient||rb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function rb(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new mg(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,XC(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Sm(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function ib(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P()}}function rF(t){let e=t._freezeSettings(),n=_l(t._databaseId);return new Mm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iF(t,e,n,r=!1){return Jm(n,t.Su(r?4:3,e))}function Jm(t,e){if(sb(t=wt(t)))return oF("Unsupported field value:",e,t),sF(t,e);if(t instanceof dl)return function(r,i){if(!ib(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Jm(a,i.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return a1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=je.fromDate(r);return{timestampValue:Ug(i.serializer,s)}}if(r instanceof je){let s=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ug(i.serializer,s)}}if(r instanceof Uo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vo)return{bytesValue:kC(i.serializer,r._byteString)};if(r instanceof Gt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:FC(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${wl(r)}`)}(t,e)}function sF(t,e){let n={};return gC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(t,(r,i)=>{let s=Jm(i,e.Ru(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function sb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof Uo||t instanceof Vo||t instanceof Gt||t instanceof dl)}function oF(t,e,n){if(!sb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=wl(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function cF(t,e,n){if(e.search(aF)>=0)throw xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ll(...e.split("."))._internalPath}catch{throw xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xm(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new w(y.INVALID_ARGUMENT,a+t+c)}function Xm(t,e){return typeof e=="string"?cF(t,e):e instanceof ll?e._internalPath:e._delegate._internalPath}function uF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function ob(t,e,...n){let r=[];e instanceof jo&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof Om).length,a=s.filter(c=>c instanceof Pm).length;if(o>1||o>0&&a>0)throw new w(y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}function ab(t,e="asc"){let n=e,r=Xm("orderBy",t);return km._create(r,n)}function hC(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new w(y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EC(e)&&n.indexOf("/")!==-1)throw new w(y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(de.fromString(n));if(!b.isDocumentKey(r))throw new w(y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return UT(t,new b(r))}if(n instanceof Gt)return UT(t,n._key);throw new w(y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wl(n)}.`)}function fC(t,e){if(!Array.isArray(t)||t.length===0)throw new w(y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cb(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function lF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P()}}function ey(t,...e){var n,r,i;t=wt(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||dC(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(dC(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof Gt)u=$u(t.firestore,Lo),l=Gm(t._key.path),c={next:d=>{e[o]&&e[o](dF(u,t,d))},error:e[o+1],complete:e[o+2]};else{let d=$u(t,Ar);u=$u(d.firestore,Lo),l=d._query;let h=new gl(u);c={next:f=>{e[o]&&e[o](new Lm(u,h,d,f))},error:e[o+1],complete:e[o+2]},uF(t._query)}return function(h,f,_,E){let T=new bm(E),A=new _m(f,T,_);return h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return V1(yield cC(h),A)})),()=>{T.La(),h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return U1(yield cC(h),A)}))}}(tF(u),l,a,c)}function dF(t,e,n){let r=n.docs.get(e._key),i=new gl(t);return new pl(t,i,e._key,r,new Er(n.hasPendingWrites,n.fromCache),e.converter)}var kT,Se,qi,Tr,y,w,ln,Hu,rg,ig,sg,og,ag,cg,ug,lg,je,k,qu,de,jk,dt,b,dg,Cr,qk,hg,m,fg,zu,pg,Dr,gg,FT,pC,Gk,K4,Wk,Kk,Q4,he,Ri,$t,Be,Gu,_r,Wu,ze,Qk,mg,Ku,Uu,un,Tt,Vi,Sr,Qu,ve,Ct,Ig,wg,Eg,Dg,Tg,Cg,bg,Sg,Mn,xn,n1,CC,Z4,i1,s1,Ui,Ao,ji,Bi,Ro,Do,Mo,xo,$i,xg,Ng,Pg,Og,me,W,YT,p1,kg,wr,Yu,No,Mi,Zu,Ju,Xu,Fg,g1,m1,y1,Lg,Po,Bg,el,$g,Hg,J4,Bt,Oo,qg,zg,Gg,Wg,Kg,ko,ye,Qg,Yg,Zg,Jg,Xg,em,tm,nm,rm,im,sm,tl,am,cm,nl,ju,P1,um,Ue,lm,rl,dm,hm,fm,pm,gm,mm,il,sl,Hi,ym,vm,_m,ol,al,Im,wm,Em,Dm,cl,Cm,bm,Sm,uC,ul,Fo,Ar,Gt,Ni,Am,Lo,Vo,ll,dl,Uo,nF,Rm,Mm,aF,hl,Nm,jo,fl,Pm,Om,km,Fm,Er,pl,Pi,Lm,gl,ub=g(()=>{"use strict";mi();Ls();Vs();or();OT();kT="@firebase/firestore";Se=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Se.UNAUTHENTICATED=new Se(null),Se.GOOGLE_CREDENTIALS=new Se("google-credentials-uid"),Se.FIRST_PARTY=new Se("first-party-uid"),Se.MOCK_USER=new Se("mock-user");qi="10.8.0";Tr=new En("@firebase/firestore");y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends ct{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};ln=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};Hu=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},rg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Se.UNAUTHENTICATED))}shutdown(){}},ig=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},sg=class{constructor(e){this.t=e,this.currentUser=Se.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new ln;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ln,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ln)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new Hu(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new Se(e)}},og=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Se.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ag=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new og(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Se.FIRST_PARTY))}shutdown(){}invalidateToken(){}},cg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ug=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,I("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new cg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};lg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Uk(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};je=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};k=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new je(0,0))}static max(){return new t(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};qu=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&P(),r===void 0?r=e.length-n:r>e.length-n&&P(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},de=class t extends qu{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},jk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dt=class t extends qu{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return jk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new w(y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new w(y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new w(y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};b=class t{constructor(e){this.path=e}static fromPath(e){return new t(de.fromString(e))}static fromName(e){return new t(de.fromString(e).popFirst(5))}static empty(){return new t(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new de(e.slice()))}};dg=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};dg.UNKNOWN_ID=-1;Cr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(k.min(),b.empty(),-1)}static max(){return new t(k.max(),b.empty(),-1)}};qk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};m=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&P(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};fg=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ln,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Dr(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=jm(r.target.error);this.V.reject(new Dr(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new Dr(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new gg(n)}},zu=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Fe())===12.2&&qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),vr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!qc())return!1;if(t.C())return!0;let e=Fe(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return p(this,null,function*(){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new Dr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new w(y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new w(y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Dr(e,o))},i.onupgradeneeded=s=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return p(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=fg.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),m.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(I("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},pg=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return vr(this.k.delete())}},Dr=class extends w{constructor(e,n){super(y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};gg=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(I("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vr(r)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),vr(this.store.add(e))}get(e){return vr(this.store.get(e)).next(n=>(n===void 0&&(n=null),I("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),vr(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),vr(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new m((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new m((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){I("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new m((r,i)=>{n.onerror=s=>{let o=jm(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new m((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new pg(a),u=n(a.primaryKey,a.value,c);if(u instanceof m){let l=u.catch(d=>(c.done(),m.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>m.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};FT=!1;pC=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();Gk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],K4=[...Gk,"documentOverlays"],Wk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kk=Wk,Q4=[...Kk,"indexConfiguration","indexState","indexEntries"];he=class t{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ri(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ri(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ri(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ri(this.root,e,this.comparator,!0)}},Ri=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},$t=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw P();let e=this.left.check();if(e!==this.right.check())throw P();return e+(this.isRed()?0:1)}};$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw P()}get value(){throw P()}get color(){throw P()}get left(){throw P()}get right(){throw P()}copy(e,n,r,i,s){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};Be=class t{constructor(e){this.comparator=e,this.data=new he(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gu(this.data.getIterator())}getIteratorFrom(e){return new Gu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Gu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};_r=class t{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Be(dt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ki(this.fields,e.fields,(n,r)=>n.isEqual(r))}};Wu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};ze=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Wu("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ze.EMPTY_BYTE_STRING=new ze("");Qk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);mg=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Ku=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};Uu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};un=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Io(n)}setAll(e){let n=dt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Io(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Jp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Jp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$o(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Io(this.value))}};Tt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,k.min(),k.min(),k.min(),un.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,k.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,k.min(),k.min(),un.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,k.min(),k.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(k.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=k.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};Vi=class{constructor(e,n){this.position=e,this.inclusive=n}};Sr=class{constructor(e,n="asc"){this.field=e,this.dir=n}};Qu=class{},ve=class t extends Qu{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ig(e,n,r):n==="array-contains"?new Dg(e,r):n==="in"?new Tg(e,r):n==="not-in"?new Cg(e,r):n==="array-contains-any"?new bg(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wg(e,r):new Eg(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fi(n,this.value)):n!==null&&br(this.value)===br(n)&&this.matchesComparison(Fi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return P()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ct=class t extends Qu{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return yC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};Ig=class extends ve{constructor(e,n,r){super(e,n,r),this.key=b.fromName(r.referenceValue)}matches(e){let n=b.comparator(e.key,this.key);return this.matchesComparison(n)}},wg=class extends ve{constructor(e,n){super(e,"in",n),this.keys=wC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Eg=class extends ve{constructor(e,n){super(e,"not-in",n),this.keys=wC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};Dg=class extends ve{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Hm(n)&&So(n.arrayValue,this.value)}},Tg=class extends ve{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&So(this.value.arrayValue,n)}},Cg=class extends ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(So(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!So(this.value.arrayValue,n)}},bg=class extends ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Hm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>So(this.value.arrayValue,r))}};Sg=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};Mn=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};xn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return gC(this.inner)}size(){return this.innerSize}};n1=new he(b.comparator);CC=new he(b.comparator);Z4=new he(b.comparator),i1=new Be(b.comparator);s1=new Be(Y);Ui=class{constructor(){this._=void 0}};Ao=class extends Ui{},ji=class extends Ui{constructor(e){super(),this.elements=e}};Bi=class extends Ui{constructor(e){super(),this.elements=e}};Ro=class extends Ui{constructor(e,n){super(),this.serializer=e,this.Ie=n}};Do=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};Mo=class{};xo=class extends Mo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},$i=class extends Mo{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};xg=class extends Mo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};Ng=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&h1(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=To(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=To(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=bC();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=NC(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(k.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),K())}isEqual(e){return this.batchId===e.batchId&&ki(this.mutations,e.mutations,(n,r)=>WT(n,r))&&ki(this.baseMutations,e.baseMutations,(n,r)=>WT(n,r))}};Pg=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};Og=class{constructor(e,n){this.count=e,this.unchangedNames=n}};(W=me||(me={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";YT=null;p1=new yr([4294967295,4294967295],0);kg=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wr(`Invalid padding: ${n}`);if(r<0)throw new wr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wr(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=yr.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(yr.fromNumber(r)));return i.compare(p1)===1&&(i=new yr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=ZT(e),[r,i]=JT(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=ZT(e),[r,i]=JT(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},wr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};Yu=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,No.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(k.min(),i,new he(Y),Nn(),K())}},No=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,K(),K(),K())}};Mi=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Zu=class{constructor(e,n){this.targetId=e,this.fe=n}},Ju=class{constructor(e,n,r=ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Xu=class{constructor(){this.ge=0,this.pe=eC(),this.ye=ze.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=K(),n=K(),r=K();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:P()}}),new No(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=eC()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,_e(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Fg=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=Nn(),this.Qe=XT(),this.Ke=new he(Y)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:P()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Ag(s))if(r===0){let o=new b(s.path);this.We(n,o,Tt.newNoDocument(o,k.min()))}else _e(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}YT?.tt(function(l,d,h,f,_){var E,T,A,ee,fe,ue;let Ie={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},re=d.unchangedNames;return re&&(Ie.bloomFilter={applied:_===0,hashCount:(E=re?.hashCount)!==null&&E!==void 0?E:0,bitmapLength:(ee=(A=(T=re?.bits)===null||T===void 0?void 0:T.bitmap)===null||A===void 0?void 0:A.length)!==null&&ee!==void 0?ee:0,padding:(ue=(fe=re?.bits)===null||fe===void 0?void 0:fe.padding)!==null&&ue!==void 0?ue:0,mightContain:Ye=>{var dn;return(dn=f?.mightContain(Ye))!==null&&dn!==void 0&&dn}}),Ie}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Rn(r).toUint8Array()}catch(c){if(c instanceof Wu)return Oi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new kg(o,i,s)}catch(c){return Oi(c instanceof wr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Ag(a.target)){let c=new b(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Tt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=K();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new Yu(e,n,this.Ke,this.qe,r);return this.qe=Nn(),this.Qe=XT(),this.Ke=new he(Y),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Xu,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Be(Y),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||I("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Xu),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};g1={asc:"ASCENDING",desc:"DESCENDING"},m1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y1={and:"AND",or:"OR"},Lg=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};Po=class t{constructor(e,n,r,i,s=k.min(),o=k.min(),a=ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};Bg=class{constructor(e){this.ct=e}};el=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ce(e.integerValue));else if("doubleValue"in e){let r=ce(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Co(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Rn(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?mC(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):P()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),b.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};el.bt=new el;$g=class{constructor(){this._n=new Hg}addToCollectionParentIndex(e,n){return this._n.add(n),m.resolve()}getCollectionParents(e,n){return m.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return m.resolve()}deleteFieldIndex(e,n){return m.resolve()}deleteAllFieldIndexes(e){return m.resolve()}createTargetIndexes(e,n){return m.resolve()}getDocumentsMatchingTarget(e,n){return m.resolve(null)}getIndexType(e,n){return m.resolve(0)}getFieldIndexes(e,n){return m.resolve([])}getNextCollectionGroupToUpdate(e){return m.resolve(null)}getMinOffset(e,n){return m.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return m.resolve(Cr.min())}updateCollectionGroup(e,n,r){return m.resolve()}updateIndexEntries(e,n){return m.resolve()}},Hg=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Be(de.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Be(de.comparator)).toArray()}};J4=new Uint8Array(0);Bt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(41943040,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);Oo=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};qg=class{constructor(){this.changes=new xn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?m.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};zg=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};Gg=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&To(r.mutation,i,_r.empty(),je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,K()).next(()=>r))}getLocalViewOfDocuments(e,n,r=K()){let i=Ir();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=_o();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,K()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Nn(),o=Eo(),a=function(){return Eo()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof $i)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),To(l.mutation,u,l.mutation.getFieldMask(),je.now())):o.set(u.key,_r.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new zg(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Eo(),i=new he((o,a)=>o-a),s=K();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||_r.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||K()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=bC();l.forEach(h=>{if(!s.has(h)){let f=NC(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return m.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return b.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):m.resolve(Ir()),a=-1,c=s;return o.next(u=>m.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?m.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,K())).next(l=>({batchId:a,changes:r1(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new b(n)).next(r=>{let i=_o();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=_o();return this.indexManager.getCollectionParents(e,s).next(a=>m.forEach(a,c=>{let u=function(d,h){return new Mn(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,Tt.newInvalidDocument(l)))});let a=_o();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&To(l.mutation,u,_r.empty(),je.now()),vl(n,u)&&(a=a.insert(c,u))}),a})}};Wg=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return m.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:xi(i.createTime)}}(n)),m.resolve()}getNamedQuery(e,n){return m.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:S1(i.bundledQuery),readTime:xi(i.readTime)}}(n)),m.resolve()}};Kg=class{constructor(){this.overlays=new he(b.comparator),this.hr=new Map}getOverlay(e,n){return m.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ir();return m.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),m.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),m.resolve()}getOverlaysForCollection(e,n,r){let i=Ir(),s=n.length+1,o=new b(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return m.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new he((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=Ir(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Ir(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return m.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Pg(n,r));let s=this.hr.get(n);s===void 0&&(s=K(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};ko=class{constructor(){this.Pr=new Be(ye.Ir),this.Tr=new Be(ye.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new ye(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ye(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new b(new de([])),r=new ye(n,e),i=new ye(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new b(new de([])),r=new ye(n,e),i=new ye(n,e+1),s=K();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new ye(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ye=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return b.comparator(e.key,n.key)||Y(e.pr,n.pr)}static Er(e,n){return Y(e.pr,n.pr)||b.comparator(e.key,n.key)}};Qg=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Be(ye.Ir)}checkEmpty(e){return m.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ng(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new ye(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return m.resolve(o)}lookupMutationBatch(e,n){return m.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return m.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return m.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return m.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ye(n,0),i=new ye(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),m.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(Y);return n.forEach(i=>{let s=new ye(i,0),o=new ye(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),m.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;b.isDocumentKey(s)||(s=s.child(""));let o=new ye(new b(s),0),a=new Be(Y);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),m.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return m.forEach(n.mutations,i=>{let s=new ye(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new ye(n,0),i=this.wr.firstAfterOrEqual(r);return m.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,m.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};Yg=class{constructor(e){this.vr=e,this.docs=function(){return new he(b.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return m.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=Nn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tt.newInvalidDocument(i))}),m.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Nn(),o=n.path,a=new b(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Hk($k(l),r)<=0||(i.has(l.key)||vl(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return m.resolve(s)}getAllFromCollectionGroup(e,n,r,i){P()}Fr(e,n){return m.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Zg(this)}getSize(e){return m.resolve(this.size)}},Zg=class extends qg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),m.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};Jg=class{constructor(e){this.persistence=e,this.Mr=new xn(n=>qm(n),zm),this.lastRemoteSnapshotVersion=k.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ko,this.targetCount=0,this.Br=Oo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),m.resolve()}getLastRemoteSnapshotVersion(e){return m.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return m.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),m.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),m.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new Oo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,m.resolve()}updateTargetData(e,n){return this.qn(n),m.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,m.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),m.waitFor(s).next(()=>i)}getTargetCount(e){return m.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return m.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),m.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),m.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),m.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return m.resolve(r)}containsKey(e,n){return m.resolve(this.Nr.containsKey(n))}};Xg=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new pC(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Jg(this),this.indexManager=new $g,this.remoteDocumentCache=function(i){return new Yg(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Bg(n),this.$r=new Wg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Kg,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Qg(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){I("MemoryPersistence","Starting transaction:",e);let i=new em(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return m.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},em=class extends hg{constructor(e){super(),this.currentSequenceNumber=e}},tm=class t{constructor(e){this.persistence=e,this.zr=new ko,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw P()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),m.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),m.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),m.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m.forEach(this.Jr,r=>{let i=b.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,k.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return m.or([()=>m.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};nm=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=K(),i=K();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};rm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};im=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return xE()?8:zu.v(Fe())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new rm;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(vo()<=B.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),m.resolve()):(vo()<=B.DEBUG&&I("QueryEngine","Query:",bi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(vo()<=B.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ht(n))):m.resolve())}ji(e,n){if(zT(n))return m.resolve(null);let r=Ht(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Mg(n,null,"F"),r=Ht(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=K(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,o,c.readTime)?this.ji(e,Mg(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return zT(n)||i.isEqual(k.min())?m.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?m.resolve(null):(vo()<=B.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bi(n)),this.es(e,o,n,Bk(i,-1)).next(a=>a))})}Zi(e,n){let r=new Be(TC(e));return n.forEach((i,s)=>{vl(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return vo()<=B.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",bi(n)),this.zi.getDocumentsMatchingQuery(e,n,Cr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};sm=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new he(Y),this.rs=new xn(s=>qm(s),zm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};tl=class{constructor(){this.activeTargetIds=o1()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},am=class{constructor(){this.no=new tl,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new tl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};cm=class{io(e){}shutdown(){}};nl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};ju=null;P1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};um=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};Ue="WebChannelConnection",lm=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=eg(),c=this.bo(n,r.toUriEncodedString());I("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,c,u,i).then(l=>(I("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Oi("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=P1[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=eg();return new Promise((o,a)=>{let c=new NT;c.setWithCredentials(!0),c.listenOnce(MT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Vu.NO_ERROR:let l=c.getResponseJson();I(Ue,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case Vu.TIMEOUT:I(Ue,`RPC '${e}' ${s} timed out`),a(new w(y.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:let d=c.getStatus();if(I(Ue,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let _=function(T){let A=T.toLowerCase().replace(/_/g,"-");return Object.values(y).indexOf(A)>=0?A:y.UNKNOWN}(f.status);a(new w(_,f.message))}else a(new w(y.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new w(y.UNAVAILABLE,"Connection failed."));break;default:P()}}finally{I(Ue,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);I(Ue,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=eg(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=AT(),a=RT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");I(Ue,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,_=new um({lo:T=>{f?I(Ue,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(h||(I(Ue,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),I(Ue,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},ho:()=>d.close()}),E=(T,A,ee)=>{T.listen(A,fe=>{try{ee(fe)}catch(ue){setTimeout(()=>{throw ue},0)}})};return E(d,yo.EventType.OPEN,()=>{f||I(Ue,`RPC '${e}' stream ${i} transport opened.`)}),E(d,yo.EventType.CLOSE,()=>{f||(f=!0,I(Ue,`RPC '${e}' stream ${i} transport closed`),_.Vo())}),E(d,yo.EventType.ERROR,T=>{f||(f=!0,Oi(Ue,`RPC '${e}' stream ${i} transport errored:`,T),_.Vo(new w(y.UNAVAILABLE,"The operation could not be completed")))}),E(d,yo.EventType.MESSAGE,T=>{var A;if(!f){let ee=T.data[0];_e(!!ee);let fe=ee,ue=fe.error||((A=fe[0])===null||A===void 0?void 0:A.error);if(ue){I(Ue,`RPC '${e}' stream ${i} received error:`,ue);let Ie=ue.status,re=function(Fn){let ca=me[Fn];if(ca!==void 0)return OC(ca)}(Ie),Ye=ue.message;re===void 0&&(re=y.INTERNAL,Ye="Unknown error status: "+Ie+" with message "+ue.message),f=!0,_.Vo(new w(re,Ye)),d.close()}else I(Ue,`RPC '${e}' stream ${i} received:`,ee),_.mo(ee)}}),E(a,xT.STAT_EVENT,T=>{T.stat===Zp.PROXY?I(Ue,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Zp.NOPROXY&&I(Ue,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}};rl=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};dm=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new rl(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===y.RESOURCE_EXHAUSTED?(qt(n.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new w(y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},hm=class extends dm{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=_1(this.serializer,e),r=function(s){if(!("targetChange"in s))return k.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?k.min():o.readTime?xi(o.readTime):k.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=tC(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Ag(c)?{documents:I1(s,c)}:{query:w1(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kC(s,o.resumeToken);let u=Vg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(k.min())>0){a.readTime=Ug(s,o.snapshotVersion.toTimestamp());let u=Vg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=D1(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=tC(this.serializer),n.removeTarget=e,this.t_(n)}};fm=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new w(y.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,jg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(y.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,jg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(y.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}},pm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(qt(n),this.g_=!1):I("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};gm=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>p(this,null,function*(){qo(this)&&(I("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let u=Q(c);u.v_.add(4),yield Ho(u),u.x_.set("Unknown"),u.v_.delete(4),yield Il(u)})}(this))}))}),this.x_=new pm(r,i)}};mm=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};il=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||b.comparator(n.key,r.key):(n,r)=>b.comparator(n.key,r.key),this.keyedMap=_o(),this.sortedSet=new he(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};sl=class{constructor(){this.L_=new he(b.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):P():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},Hi=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,il.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};ym=class{constructor(){this.q_=void 0,this.Q_=[]}},vm=class{constructor(){this.queries=new xn(e=>DC(e),yl),this.onlineState="Unknown",this.K_=new Set}};_m=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Hi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Hi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};ol=class{constructor(e){this.key=e}},al=class{constructor(e){this.key=e}},Im=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=K(),this.mutatedKeys=K(),this.ua=TC(e),this.ca=new il(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new sl,i=n?n.ca:this.ca,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=vl(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),E=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),T=!1;h&&f?h.data.isEqual(f.data)?_!==E&&(r.track({type:3,doc:f}),T=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),T=!0,(c&&this.ua(f,c)>0||u&&this.ua(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),T=!0):h&&!f&&(r.track({type:1,doc:h}),T=!0,(c||u)&&(a=!0)),T&&(f?(o=o.add(f),s=E?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let o=e.Pa.k_();o.sort((l,d)=>function(f,_){let E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P()}};return E(f)-E(_)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,u=c!==this._a;return this._a=c,o.length!==0||u?{snapshot:new Hi(this.query,e.ca,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new sl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=K(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new al(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new ol(r))}),n}Ra(e){this.oa=e.hs,this.aa=K();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Hi.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},wm=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Em=class{constructor(e){this.key=e,this.ma=!1}},Dm=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new xn(a=>DC(a),yl),this.pa=new Map,this.ya=new Set,this.wa=new he(b.comparator),this.Sa=new Map,this.ba=new ko,this.Da={},this.Ca=new Map,this.va=Oo.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};cl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=_l(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return A1(this.persistence,new im,e.initialUser,this.serializer)}createPersistence(e){return new Xg(tm.Hr,this.serializer)}createSharedClientState(e){return new am}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}},Cm=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=W1.bind(null,this.syncEngine),yield L1(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new vm}()}createDatastore(e){let n=_l(e.databaseInfo.databaseId),r=function(s){return new lm(s)}(e.databaseInfo);return function(s,o,a,c){return new fm(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new gm(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>sC(this.syncEngine,n,0),function(){return nl.D()?new nl:new cm}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new Dm(i,s,o,a,c,u);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(r){return p(this,null,function*(){let i=Q(r);I("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield Ho(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};bm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):qt("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};Sm=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Se.UNAUTHENTICATED,this.clientId=lg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){I("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(I("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=QC(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};uC=new Map;ul=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new w(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new w(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new w(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ul({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ul(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rg;switch(r.type){case"firstParty":return new ag(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=uC.get(n);r&&(I("ComponentProvider","Removing Datastore"),uC.delete(n),r.terminate())}(this),Promise.resolve()}};Ar=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Gt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ni=class t extends Ar{constructor(e,n,r){super(e,n,Gm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new b(e))}withConverter(e){return new t(this.firestore,e,this._path)}};Am=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new rl(this,"async_queue_retry"),this._u=()=>{let n=tg();n&&I("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=tg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=tg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new ln;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return p(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Bo(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw qt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=mm.createAndSchedule(this,e,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&P()}verifyOperationInProgress(){}hu(){return p(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};Lo=class extends Fo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Am}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||rb(this),this._firestoreClient.terminate()}};Vo=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ze.fromBase64String(e))}catch(n){throw new w(y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};ll=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};dl=class{constructor(e){this._methodName=e}};Uo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}};nF=/^__.*__$/;Rm=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return xm(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(ib(this.du)&&nF.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},Mm=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_l(e)}Su(e,n,r,i=!1){return new Rm({du:e,methodName:n,wu:r,path:dt.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};aF=new RegExp("[~\\*/\\[\\]]");hl=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Nm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Xm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Nm=class extends hl{data(){return super.data()}};jo=class{},fl=class extends jo{};Pm=class t extends fl{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return cb(e._query,n),new Ar(e.firestore,e.converter,Rg(e._query,n))}_parse(e){let n=rF(e.firestore);return function(s,o,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new w(y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){fC(d,l);let f=[];for(let _ of d)f.push(hC(c,s,_));h={arrayValue:{values:f}}}else h=hC(c,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||fC(d,l),h=iF(a,o,d,l==="in"||l==="not-in");return ve.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}},Om=class t extends jo{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ct.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)cb(o,c),o=Rg(o,c)}(e._query,n),new Ar(e.firestore,e.converter,Rg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}},km=class t extends fl{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new w(y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sr(s,o)}(e._query,this._field,this._direction);return new Ar(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Mn(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};Fm=class{convertValue(e,n="none"){switch(br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw P()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return $o(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Uo(ce(e.latitude),ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=$m(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bo(e));default:return null}}convertTimestamp(e){let n=An(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=de.fromString(e);_e($C(r));let i=new Ku(r.get(1),r.get(3)),s=new b(r.popFirst(5));return i.isEqual(n)||qt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};Er=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},pl=class extends hl{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Xm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Pi=class extends pl{data(e={}){return super.data(e)}},Lm=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Er(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pi(this._firestore,this._userDataWriter,r.key,r,new Er(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Pi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Er(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Pi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Er(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:lF(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};gl=class extends Fm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}};(function(e,n=!0){(function(i){qi=i})(gi),Tn(new ut("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Lo(new sg(r.getProvider("auth-internal")),new ug(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new w(y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ku(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Te(kT,"4.4.2",e),Te(kT,"4.4.2","esm2017")})()});var El=g(()=>{"use strict";ub()});function lb(t,e){return e===void 0&&(e=pF),new q(function(n){var r=ey(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function db(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Dl(Dl({},r),(n={},n[e.idField]=t.id,n))}function hb(t){return lb(t,{includeMetadataChanges:!0}).pipe(L(function(e){return e.docs}))}function fb(t,e){return e===void 0&&(e={}),hb(t).pipe(L(function(n){return n.map(function(r){return db(r,e)})}))}var Dl,pF,pb=g(()=>{"use strict";El();Zr();Jr();Dl=function(){return Dl=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Dl.apply(this,arguments)};pF={includeMetadataChanges:!1};});function gF(t,e){let n=qf(gb,t,e);return n&&new Rr(n)}function mF(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Rr(r)}}function mb(t,...e){return{ngModule:_F,providers:[{provide:ny,useFactory:mF(t),multi:!0,deps:[te,It,qs,zs,[new Ot,uu],[new Ot,$s],...e]}]}}var Rr,gb,ty,ny,yF,vF,_F,yb,vb,_b,Ib,wb,Tl=g(()=>{"use strict";Yc();ke();ke();Gf();hD();yi();pb();El();El();Rr=class{constructor(e){return e}},gb="firestore",ty=class{constructor(){return Hs(gb)}},ny=new U("angularfire2.firestore-instances");yF={provide:ty,deps:[[new Ot,ny]]},vF={provide:Rr,useFactory:gF,deps:[[new Ot,ny],lr]},_F=(()=>{class t{constructor(){Te("angularfire",_i.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Zn({type:t});static \u0275inj=Xn({providers:[vF,yF]})}return t})();yb=on(fb,!0),vb=on(tb,!0),_b=on(nb,!0),Ib=on(ab,!0),wb=on(ob,!0)});function wF(t,e){if(t&1&&(Dh(),DI(),ui(0,"div",4),$w(1),di(2,"div",5),li()),t&2){let n=Bw();Bh(),Jh(" ",n.counter," ")}}var Eb,Db=g(()=>{"use strict";Vc();Tl();ke();Tl();Eb=(()=>{let e=class e{constructor(r,i){this.firestore=r,this.cd=i,this.counter=0}ngOnInit(){let r=vb(this.firestore,"Chat"),i=wb(r,Ib("createdAt"));this.chatData$=yb(i),this.chatData$.subscribe(s=>{console.log(s.length),this.counter=s.length,this.cd.detectChanges()})}};e.\u0275fac=function(i){return new(i||e)(kt(Rr),kt(Ft))},e.\u0275cmp=gc({type:e,selectors:[["message-counter"]],standalone:!0,features:[Pc],decls:5,vars:3,consts:[[1,"relative","max-w-[25px]","m-4"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 21 21",1,"w-8","h-8","text-teal-600","animate-wiggle"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","d","M15.585 15.5H5.415A1.65 1.65 0 0 1 4 13a10.526 10.526 0 0 0 1.5-5.415V6.5a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.085c0 1.907.518 3.78 1.5 5.415a1.65 1.65 0 0 1-1.415 2.5zm1.915-11c-.267-.934-.6-1.6-1-2s-1.066-.733-2-1m-10.912 3c.209-.934.512-1.6.912-2s1.096-.733 2.088-1M13 17c-.667 1-1.5 1.5-2.5 1.5S8.667 18 8 17"],["class","px-2 bg-teal-500 rounded-full text-center text-white text-sm absolute -top-2 -end-4",4,"ngIf"],[1,"px-2","bg-teal-500","rounded-full","text-center","text-white","text-sm","absolute","-top-2","-end-4"],[1,"absolute","top-0","start-0","rounded-full","-z-10","animate-ping","bg-teal-200","w-full","h-full"]],template:function(i,s){if(i&1&&(ui(0,"div",0),Dh(),ui(1,"svg",1),di(2,"path",2),li(),Yh(3,wF,3,1,"div",3),Hw(4,"async"),li()),i&2){let o;Bh(3),Zh("ngIf",((o=qw(4,1,s.chatData$))==null?null:o.length)!==0)}},dependencies:[aE,cE],changeDetection:0});let t=e;return t})()});function Yi(t){return new ay(t)}function EF(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function DF(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Wt(t[n],e[n]))return!1;return!0}function Wt(t,e){let n=t?cy(t):void 0,r=e?cy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Rb(t[i],e[i]))return!1;return!0}function cy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Rb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Mb(t){return t.length>0?t[t.length-1]:null}function kn(t){return Id(t)?t:hi(t)?oe(Promise.resolve(t)):O(t)}function Tb(t,e,n){return TF[n.paths](t.root,e.root,n.matrixParams)&&xb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function CF(t,e){return Wt(t,e)}function Nb(t,e,n){if(!xr(t.segments,e.segments)||!Sl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Nb(t.children[r],e.children[r],n))return!1;return!0}function bF(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Rb(t[n],e[n]))}function Pb(t,e,n){return Ob(t,e,e.segments,n)}function Ob(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!xr(i,n)||e.hasChildren()||!Sl(i,n,r))}else if(t.segments.length===n.length){if(!xr(t.segments,n)||!Sl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Pb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!xr(t.segments,i)||!Sl(t.segments,i,r)||!t.children[F]?!1:Ob(t.children[F],e,s,r)}}function Sl(t,e,n){return e.every((r,i)=>xb[n](t[i].parameters,r.parameters))}function SF(t,e){return xr(t,e)&&t.every((n,r)=>Wt(n.parameters,e[r].parameters))}function xr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function AF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===F&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==F&&(n=n.concat(e(i,r)))}),n}function Al(t){return t.segments.map(e=>Fb(e)).join("/")}function zo(t,e){if(!t.hasChildren())return Al(t);if(e){let n=t.children[F]?zo(t.children[F],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==F&&r.push(`${i}:${zo(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=AF(t,(r,i)=>i===F?[zo(t.children[F],!1)]:[`${i}:${zo(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[F]!=null?`${Al(t)}/${n[0]}`:`${Al(t)}/(${n.join("//")})`}}function kb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cl(t){return kb(t).replace(/%3B/gi,";")}function MF(t){return encodeURI(t)}function uy(t){return kb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rl(t){return decodeURIComponent(t)}function Cb(t){return Rl(t.replace(/\+/g,"%20"))}function Fb(t){return`${uy(t.path)}${xF(t.parameters)}`}function xF(t){return Object.entries(t).map(([e,n])=>`;${uy(e)}=${uy(n)}`).join("")}function NF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Cl(n)}=${Cl(i)}`).join("&"):`${Cl(n)}=${Cl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}function ry(t){let e=t.match(PF);return e?e[0]:""}function kF(t){let e=t.match(OF);return e?e[0]:""}function LF(t){let e=t.match(FF);return e?e[0]:""}function UF(t){let e=t.match(VF);return e?e[0]:""}function Lb(t){return t.segments.length>0?new Z([],{[F]:t}):t}function Vb(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=Vb(i);if(r===F&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Z(t.segments,e);return jF(n)}function jF(t){if(t.numberOfChildren===1&&t.children[F]){let e=t.children[F];return new Z(t.segments.concat(e.segments),e.children)}return t}function Zi(t){return t instanceof Pn}function BF(t,e,n=null,r=null){let i=Ub(t);return jb(i,e,n,r)}function Ub(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new Z(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Lb(r);return e??i}function jb(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return iy(i,i,i,n,r);let s=$F(e);if(s.toRoot())return iy(i,i,new Z([],{}),n,r);let o=HF(s,i,t),a=o.processChildren?Ko(o.segmentGroup,o.index,s.commands):$b(o.segmentGroup,o.index,s.commands);return iy(i,o.segmentGroup,a,n,r)}function xl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Zo(t){return typeof t=="object"&&t!=null&&t.outlets}function iy(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=Bb(t,e,n);let a=Lb(Vb(o));return new Pn(a,s,i)}function Bb(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=Bb(s,e,n)}),new Z(t.segments,r)}function $F(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Nl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Nl(n,e,r)}function HF(t,e,n){if(t.isAbsolute)return new Ki(e,!0,0);if(!n)return new Ki(e,!1,NaN);if(n.parent===null)return new Ki(n,!0,0);let r=xl(t.commands[0])?0:1,i=n.segments.length-1+r;return qF(n,i,t.numberOfDoubleDots)}function qF(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new R(4005,!1);i=r.segments.length}return new Ki(r,!1,i-s)}function zF(t){return Zo(t[0])?t[0].outlets:{[F]:t}}function $b(t,e,n){if(t??=new Z([],{}),t.segments.length===0&&t.hasChildren())return Ko(t,e,n);let r=GF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Z(t.segments.slice(0,r.pathIndex),{});return s.children[F]=new Z(t.segments.slice(r.pathIndex),t.children),Ko(s,0,i)}else return r.match&&i.length===0?new Z(t.segments,{}):r.match&&!t.hasChildren()?dy(t,e,n):r.match?Ko(t,0,i):dy(t,e,n)}function Ko(t,e,n){if(n.length===0)return new Z(t.segments,{});{let r=zF(n),i={};if(Object.keys(r).some(s=>s!==F)&&t.children[F]&&t.numberOfChildren===1&&t.children[F].segments.length===0){let s=Ko(t.children[F],e,n);return new Z(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=$b(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Z(t.segments,i)}}function GF(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Zo(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!Sb(c,u,o))return s;r+=2}else{if(!Sb(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function dy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Zo(s)){let c=WF(s.outlets);return new Z(r,c)}if(i===0&&xl(n[0])){let c=t.segments[e];r.push(new Mr(c.path,bb(n[0]))),i++;continue}let o=Zo(s)?s.outlets[F]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&xl(a)?(r.push(new Mr(o,bb(a))),i+=2):(r.push(new Mr(o,{})),i++)}return new Z(r,{})}function WF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=dy(new Z([],{}),0,r))}),e}function bb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Sb(t,e,n){return t==n.path&&Wt(e,n.parameters)}function Ty(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ty(t,n);if(r)return r}return null}function Cy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Cy(t,n);if(r.length)return r.unshift(e),r}return[]}function Wi(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}function Hb(t){let e=KF(t),n=new Re([new Mr("",{})]),r=new Re({}),i=new Re({}),s=new Re({}),o=new Re(""),a=new Ji(n,r,s,o,i,F,t,e.root);return a.snapshot=e.root,new kl(new nt(a,[]),e)}function KF(t){let e={},n={},r={},i="",s=new na([],e,r,i,n,F,t,null,{});return new Fl("",new nt(s,[]))}function ky(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:C(C({},e.params),t.params),data:C(C({},e.data),t.data),resolve:C(C(C(C({},t.data),e.data),i?.data),t._resolvedData)}:r={params:C({},t.params),data:C({},t.data),resolve:C(C({},t.data),t._resolvedData??{})},i&&zb(i)&&(r.resolve[sa]=i.title),r}function Fy(t,e){e.value._routerState=t,e.children.forEach(n=>Fy(t,n))}function qb(t){let e=t.children.length>0?` { ${t.children.map(qb).join(", ")} } `:"";return`${t.value}${e}`}function sy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Wt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Wt(e.params,n.params)||t.paramsSubject.next(n.params),DF(e.url,n.url)||t.urlSubject.next(n.url),Wt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function by(t,e){let n=Wt(t.params,e.params)&&SF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||by(t.parent,e.parent))}function zb(t){return typeof t.title=="string"||t.title===null}function YF(t,e,n){let r=ra(t,e._root,n?n._root:void 0);return new kl(r,e)}function ra(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=ZF(t,e,n);return new nt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ra(t,a)),o}}let r=JF(e.value),i=e.children.map(s=>ra(t,s));return new nt(r,i)}}function ZF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ra(t,r,i);return ra(t,r)})}function JF(t){return new Ji(new Re(t.url),new Re(t.params),new Re(t.queryParams),new Re(t.fragment),new Re(t.data),t.outlet,t.component,t)}function Wb(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Zi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Kb(!1,ht.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Kb(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Gb]=!0,n.cancellationCode=e,n}function XF(t){return Qb(t)&&Zi(t.url)}function Qb(t){return!!t&&t[Gb]}function tL(t,e){return t.providers&&!t._injector&&(t._injector=Kh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Vy(t){let e=t.children&&t.children.map(Vy),n=e?se(C({},t),{children:e}):C({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==F&&(n.component=eL),n}function Kt(t){return t.outlet||F}function nL(t,e){let n=t.filter(r=>Kt(r)===e);return n.push(...t.filter(r=>Kt(r)!==e)),n}function oa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}function iL(t,e,n){let r=t._root,i=e?e._root:null;return Go(r,i,n,[r.value])}function sL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function es(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!AI(t)?t:e.get(t):r}function Go(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Wi(e);return t.children.forEach(o=>{oL(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yo(a,n.getContext(o),i)),i}function oL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=aL(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ll(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Go(t,e,a?a.children:null,r,i):Go(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qi(a.outlet.component,o))}else o&&Yo(e,a,i),i.canActivateChecks.push(new Ll(r)),s.component?Go(t,null,a?a.children:null,r,i):Go(t,null,n,r,i);return i}function aL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!xr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!xr(t.url,e.url)||!Wt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!by(t,e)||!Wt(t.queryParams,e.queryParams);case"paramsChange":default:return!by(t,e)}}function Yo(t,e,n){let r=Wi(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Yo(o,e.children.getContext(s),n):Yo(o,null,n):Yo(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Qi(e.outlet.component,i)):n.canDeactivateChecks.push(new Qi(null,i)):n.canDeactivateChecks.push(new Qi(null,i))}function aa(t){return typeof t=="function"}function cL(t){return typeof t=="boolean"}function uL(t){return t&&aa(t.canLoad)}function lL(t){return t&&aa(t.canActivate)}function dL(t){return t&&aa(t.canActivateChild)}function hL(t){return t&&aa(t.canDeactivate)}function fL(t){return t&&aa(t.canMatch)}function Yb(t){return t instanceof Qt||t?.name==="EmptyError"}function Xi(){return Xe(t=>Va(t.map(e=>e.pipe(Yt(1),za(bl)))).pipe(L(e=>{for(let n of e)if(n!==!0){if(n===bl)return bl;if(n===!1||n instanceof Pn)return n}return!0}),rt(e=>e!==bl),Yt(1)))}function pL(t,e){return De(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?O(se(C({},n),{guardsResult:!0})):gL(o,r,i,t).pipe(De(a=>a&&cL(a)?mL(r,s,t,e):O(a)),L(a=>se(C({},n),{guardsResult:a})))})}function gL(t,e,n,r){return oe(t).pipe(De(i=>wL(i.component,i.route,n,e,r)),St(i=>i!==!0,!0))}function mL(t,e,n,r){return oe(e).pipe(Qr(i=>Kr(vL(i.route.parent,r),yL(i.route,r),IL(t,i.path,n),_L(t,i.route,n))),St(i=>i!==!0,!0))}function yL(t,e){return t!==null&&e&&e(new wy(t)),O(!0)}function vL(t,e){return t!==null&&e&&e(new _y(t)),O(!0)}function _L(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return O(!0);let i=r.map(s=>ja(()=>{let o=oa(e)??n,a=es(s,o),c=lL(a)?a.canActivate(e,t):er(o,()=>a(e,t));return kn(c).pipe(St())}));return O(i).pipe(Xi())}function IL(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>sL(o)).filter(o=>o!==null).map(o=>ja(()=>{let a=o.guards.map(c=>{let u=oa(o.node)??n,l=es(c,u),d=dL(l)?l.canActivateChild(r,t):er(u,()=>l(r,t));return kn(d).pipe(St())});return O(a).pipe(Xi())}));return O(s).pipe(Xi())}function wL(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return O(!0);let o=s.map(a=>{let c=oa(e)??i,u=es(a,c),l=hL(u)?u.canDeactivate(t,e,n,r):er(c,()=>u(t,e,n,r));return kn(l).pipe(St())});return O(o).pipe(Xi())}function EL(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return O(!0);let s=i.map(o=>{let a=es(o,t),c=uL(a)?a.canLoad(e,n):er(t,()=>a(e,n));return kn(c)});return O(s).pipe(Xi(),Zb(r))}function Zb(t){return va(ge(e=>{if(Zi(e))throw Wb(t,e)}),L(e=>e===!0))}function DL(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return O(!0);let s=i.map(o=>{let a=es(o,t),c=fL(a)?a.canMatch(e,n):er(t,()=>a(e,n));return kn(c)});return O(s).pipe(Xi(),Zb(r))}function Gi(t){return Wr(new ia(t))}function TL(t){return Wr(new R(4e3,!1))}function CL(t){return Wr(Kb(!1,ht.GuardRejected))}function bL(t,e,n,r,i){let s=Uy(t,e,n);return s.matched?(r=tL(e,r),DL(r,e,n,i).pipe(L(o=>o===!0?s:C({},My)))):O(s)}function Uy(t,e,n){if(e.path==="**")return SL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?C({},My):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||EF)(n,t,e);if(!i)return C({},My);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?C(C({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function SL(t){return{matched:!0,parameters:t.length>0?Mb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Ab(t,e,n,r){return n.length>0&&ML(t,n,r)?{segmentGroup:new Z(e,RL(r,new Z(n,t.children))),slicedSegments:[]}:n.length===0&&xL(t,n,r)?{segmentGroup:new Z(t.segments,AL(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Z(t.segments,t.children),slicedSegments:n}}function AL(t,e,n,r){let i={};for(let s of n)if(jl(t,e,s)&&!r[Kt(s)]){let o=new Z([],{});i[Kt(s)]=o}return C(C({},r),i)}function RL(t,e){let n={};n[F]=e;for(let r of t)if(r.path===""&&Kt(r)!==F){let i=new Z([],{});n[Kt(r)]=i}return n}function ML(t,e,n){return n.some(r=>jl(t,e,r)&&Kt(r)!==F)}function xL(t,e,n){return n.some(r=>jl(t,e,r))}function jl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function NL(t,e,n,r){return Kt(t)!==r&&(r===F||!jl(e,n,t))?!1:Uy(e,t,n).matched}function PL(t,e,n){return e.length===0&&!t.children[n]}function OL(t,e,n,r,i,s,o="emptyOnly"){return new Ny(t,e,n,r,i,o,s).recognize()}function FL(t){t.sort((e,n)=>e.value.outlet===F?-1:n.value.outlet===F?1:e.value.outlet.localeCompare(n.value.outlet))}function LL(t){let e=t.value.routeConfig;return e&&e.path===""}function Jb(t){let e=[],n=new Set;for(let r of t){if(!LL(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Jb(r.children);e.push(new nt(r.value,i))}return e.filter(r=>!n.has(r))}function VL(t){return t.data||{}}function UL(t){return t.resolve||{}}function jL(t,e,n,r,i,s){return De(o=>OL(t,e,n,r,o.extractedUrl,i,s).pipe(L(({state:a,tree:c})=>se(C({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function BL(t,e){return De(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return O(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of Xb(c))o.add(u);let a=0;return oe(o).pipe(Qr(c=>s.has(c)?$L(c,r,t,e):(c.data=ky(c,c.parent,t).resolve,O(void 0))),ge(()=>a++),Yr(1),De(c=>a===o.size?O(n):Ge))})}function Xb(t){let e=t.children.map(n=>Xb(n)).flat();return[t,...e]}function $L(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!zb(i)&&(s[sa]=i.title),HL(s,t,e,r).pipe(L(o=>(t._resolvedData=o,t.data=ky(t,t.parent,n).resolve,null)))}function HL(t,e,n,r){let i=cy(t);if(i.length===0)return O({});let s={};return oe(i).pipe(De(o=>qL(t[o],e,n,r).pipe(St(),ge(a=>{s[o]=a}))),Yr(1),Cd(s),pn(o=>Yb(o)?Ge:Wr(o)))}function qL(t,e,n,r){let i=oa(e)??r,s=es(t,i),o=s.resolve?s.resolve(e,n):er(i,()=>s(e,n));return kn(o)}function oy(t){return Xe(e=>{let n=t(e);return n?oe(n).pipe(L(()=>e)):O(e)})}function WL(t,e,n,r){return kn(t.loadChildren()).pipe(L(t0),De(i=>i instanceof bs||Array.isArray(i)?O(i):oe(e.compileModuleAsync(i))),L(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(By,[],{optional:!0,self:!0}).flat()),{routes:o.map(Vy),injector:s}}))}function KL(t){return t&&typeof t=="object"&&"default"in t}function t0(t){return KL(t)?t.default:t}function JL(t){return t!==Qo}function nV(t,e){t.events.pipe(rt(n=>n instanceof Nr||n instanceof On||n instanceof Xo||n instanceof Pr),L(n=>n instanceof Nr||n instanceof Pr?Wo.COMPLETE:(n instanceof On?n.code===ht.Redirect||n.code===ht.SupersededByNewNavigation:!1)?Wo.REDIRECTING:Wo.FAILED),rt(n=>n!==Wo.REDIRECTING),Yt(1)).subscribe(()=>{e()})}function rV(t){throw t}function oV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new R(4008,!1)}function aV(t){return!(t instanceof ea)&&!(t instanceof ta)}function i0(t,...e){return Tc([{provide:By,multi:!0,useValue:t},[],{provide:Ji,useFactory:uV,deps:[r0]},{provide:ef,multi:!0,useFactory:lV},e.map(n=>n.\u0275providers)])}function uV(t){return t.routerState.root}function lV(){let t=D(It);return e=>{let n=t.get(rr);if(e!==n.components[0])return;let r=t.get(r0),i=t.get(dV);t.get(hV)===1&&r.initialNavigation(),t.get(fV,null,V.Optional)?.setUpPreloading(),t.get(cV,null,V.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var F,sa,ay,TF,xb,Pn,Z,Mr,Oy,Ml,RF,PF,OF,FF,VF,ly,Nl,Ki,Qo,Pe,ft,Jo,Nr,ht,hy,On,Pr,Xo,Pl,fy,py,gy,my,yy,vy,_y,Iy,wy,Ey,ea,ta,Dy,Ul,Ol,nt,kl,Ji,na,Fl,QF,Sy,Ly,Gb,eL,rL,Ay,Ll,Qi,bl,ia,Vl,Ry,My,xy,kL,Ny,e0,zL,jy,By,GL,$y,QL,YL,ZL,XL,Py,eV,n0,tV,Wo,iV,sV,r0,cV,dV,hV,fV,s0=g(()=>{"use strict";ke();ke();Zr();Vc();Jr();gf();F="primary",sa=Symbol("RouteTitle"),ay=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};TF={exact:Nb,subset:Pb},xb={exact:CF,subset:bF,ignored:()=>!0};Pn=class{constructor(e=new Z([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Yi(this.queryParams),this._queryParamMap}toString(){return RF.serialize(this)}},Z=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Al(this)}},Mr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Yi(this.parameters),this._parameterMap}toString(){return Fb(this)}};Oy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>new Ml,providedIn:"root"});let t=e;return t})(),Ml=class{parse(e){let n=new ly(e);return new Pn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${zo(e.root,!0)}`,r=NF(e.queryParams),i=typeof e.fragment=="string"?`#${MF(e.fragment)}`:"";return`${n}${r}${i}`}},RF=new Ml;PF=/^[^\/()?;#]+/;OF=/^[^\/()?;=#]+/;FF=/^[^=?&#]+/;VF=/^[^&#]+/;ly=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[F]=new Z(e,n)),r}parseSegment(){let e=ry(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(e),new Mr(Rl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=kF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=ry(this.remaining);i&&(r=i,this.capture(r))}e[Rl(n)]=Rl(r)}parseQueryParam(e){let n=LF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=UF(this.remaining);o&&(r=o,this.capture(r))}let i=Cb(n),s=Cb(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ry(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new R(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=F);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[F]:new Z([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new R(4011,!1)}};Nl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&xl(r[0]))throw new R(4003,!1);let i=r.find(Zo);if(i&&i!==Mb(r))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};Ki=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};Qo="imperative",Pe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Pe||{}),ft=class{constructor(e,n){this.id=e,this.url=n}},Jo=class extends ft{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Pe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Nr=class extends ft{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Pe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ht=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ht||{}),hy=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(hy||{}),On=class extends ft{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Pe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Pr=class extends ft{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Pe.NavigationSkipped}},Xo=class extends ft{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Pe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Pl=class extends ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Pe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fy=class extends ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Pe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},py=class extends ft{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Pe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gy=class extends ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Pe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},my=class extends ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Pe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yy=class{constructor(e){this.route=e,this.type=Pe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vy=class{constructor(e){this.route=e,this.type=Pe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_y=class{constructor(e){this.snapshot=e,this.type=Pe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iy=class{constructor(e){this.snapshot=e,this.type=Pe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wy=class{constructor(e){this.snapshot=e,this.type=Pe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ey=class{constructor(e){this.snapshot=e,this.type=Pe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ea=class{},ta=class{constructor(e){this.url=e}},Dy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ul,this.attachRef=null}},Ul=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Dy,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ol=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ty(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ty(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Cy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Cy(e,this._root).map(n=>n.value)}};nt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};kl=class extends Ol{constructor(e,n){super(e),this.snapshot=n,Fy(this,e)}toString(){return this.snapshot.toString()}};Ji=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(L(u=>u[sa]))??O(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(L(e=>Yi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(L(e=>Yi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};na=class{get title(){return this.data?.[sa]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Fl=class extends Ol{constructor(e,n){super(n),this.url=e,Fy(this,n)}toString(){return qb(this._root)}};QF=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=F,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=D(Ul),this.location=D(xs),this.changeDetector=D(Ft),this.environmentInjector=D(ot),this.inputBinder=D(Ly,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Sy(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=mc({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sc]});let t=e;return t})(),Sy=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ji?this.route:e===Ul?this.childContexts:this.parent.get(e,n)}},Ly=new U("");Gb="ngNavigationCancelingError";eL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=gc({type:e,selectors:[["ng-component"]],standalone:!0,features:[Pc],decls:1,vars:0,template:function(i,s){i&1&&di(0,"router-outlet")},dependencies:[QF],encapsulation:2});let t=e;return t})();rL=(t,e,n,r)=>L(i=>(new Ay(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ay=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),sy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Wi(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Wi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Wi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Wi(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ey(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Iy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(sy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),sy(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=oa(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Ll=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qi=class{constructor(e,n){this.component=e,this.route=n}};bl=Symbol("INITIAL_VALUE");ia=class{constructor(e){this.segmentGroup=e||null}},Vl=class extends Error{constructor(e){super(),this.urlTree=e}};Ry=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return O(r);if(i.numberOfChildren>1||!i.children[F])return TL(e.redirectTo);i=i.children[F]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Vl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Pn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Z(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new R(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},My={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};xy=class{};kL=31,Ny=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Ry(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new R(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ab(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(L(n=>{let r=new na([],Object.freeze({}),Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,{},F,this.rootComponentType,null,{}),i=new nt(r,n),s=new Fl("",i),o=BF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,F).pipe(pn(r=>{if(r instanceof Vl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ia?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=ky(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(L(s=>s instanceof nt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return oe(i).pipe(Qr(s=>{let o=r.children[s],a=nL(n,s);return this.processSegmentGroup(e,a,o,s)}),qa((s,o)=>(s.push(...o),s)),gn(null),Ad(),De(s=>{if(s===null)return Gi(r);let o=Jb(s);return FL(o),O(o)}))}processSegment(e,n,r,i,s,o){return oe(n).pipe(Qr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(pn(c=>{if(c instanceof ia)return O(null);throw c}))),St(a=>!!a),pn(a=>{if(Yb(a))return PL(r,i,s)?O(new xy):Gi(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return NL(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Gi(i):Gi(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=Uy(n,i,s);if(!a)return Gi(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kL&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(De(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=bL(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Xe(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Xe(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new na(l,h,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,VL(r),Kt(r),r.component??r._loadedComponent??null,r,UL(r)),{segmentGroup:_,slicedSegments:E}=Ab(n,l,d,c);if(E.length===0&&_.hasChildren())return this.processChildren(u,c,_).pipe(L(A=>A===null?null:new nt(f,A)));if(c.length===0&&E.length===0)return O(new nt(f,[]));let T=Kt(r)===s;return this.processSegment(u,c,_,E,T?F:s,!0).pipe(L(A=>new nt(f,A instanceof nt?[A]:[])))}))):Gi(n)))}getChildConfig(e,n,r){return n.children?O({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?O({routes:n._loadedRoutes,injector:n._loadedInjector}):EL(e,n,r,this.urlSerializer).pipe(De(i=>i?this.configLoader.loadChildren(e,n).pipe(ge(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):CL(n))):O({routes:[],injector:e})}};e0=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===F);return i}getResolvedTitleForRoute(r){return r.data[sa]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>D(zL),providedIn:"root"});let t=e;return t})(),zL=(()=>{let e=class e extends e0{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(j(vE))},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jy=new U("",{providedIn:"root",factory:()=>({})}),By=new U(""),GL=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=D(tf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return O(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=kn(r.loadComponent()).pipe(L(t0),ge(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),ls(()=>{this.componentLoaders.delete(r)})),s=new jr(i,()=>new He).pipe(Ur());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return O({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=WL(i,this.compiler,r,this.onLoadEndListener).pipe(ls(()=>{this.childrenLoaders.delete(i)})),a=new jr(o,()=>new He).pipe(Ur());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();$y=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>D(QL),providedIn:"root"});let t=e;return t})(),QL=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),YL=new U(""),ZL=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new He,this.transitionAbortSubject=new He,this.configLoader=D(GL),this.environmentInjector=D(ot),this.urlSerializer=D(Oy),this.rootContexts=D(Ul),this.location=D(Ns),this.inputBindingEnabled=D(Ly,{optional:!0})!==null,this.titleStrategy=D(e0),this.options=D(jy,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=D($y),this.createViewTransition=D(YL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>O(void 0),this.rootComponentType=null;let r=s=>this.events.next(new yy(s)),i=s=>this.events.next(new vy(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(se(C(C({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Re({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qo,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rt(o=>o.id!==0),L(o=>se(C({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Xe(o=>{this.currentTransition=o;let a=!1,c=!1;return O(o).pipe(ge(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?se(C({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Xe(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Pr(u.id,this.urlSerializer.serialize(u.rawUrl),h,hy.IgnoredSameUrlNavigation)),u.resolve(null),Ge}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return O(u).pipe(Xe(h=>{let f=this.transitions?.getValue();return this.events.next(new Jo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Ge:Promise.resolve(h)}),jL(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ge(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=se(C({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Pl(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:_,restoredState:E,extras:T}=u,A=new Jo(h,this.urlSerializer.serialize(f),_,E);this.events.next(A);let ee=Hb(this.rootComponentType).snapshot;return this.currentTransition=o=se(C({},u),{targetSnapshot:ee,urlAfterRedirects:f,extras:se(C({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,O(o)}else{let h="";return this.events.next(new Pr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,hy.IgnoredByUrlHandlingStrategy)),u.resolve(null),Ge}}),ge(u=>{let l=new fy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),L(u=>(this.currentTransition=o=se(C({},u),{guards:iL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),pL(this.environmentInjector,u=>this.events.next(u)),ge(u=>{if(o.guardsResult=u.guardsResult,Zi(u.guardsResult))throw Wb(this.urlSerializer,u.guardsResult);let l=new py(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),rt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",ht.GuardRejected),!1)),oy(u=>{if(u.guards.canActivateChecks.length)return O(u).pipe(ge(l=>{let d=new gy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Xe(l=>{let d=!1;return O(l).pipe(BL(this.paramsInheritanceStrategy,this.environmentInjector),ge({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",ht.NoDataFromResolver)}}))}),ge(l=>{let d=new my(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),oy(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(ge(f=>{d.component=f}),L(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Va(l(u.targetSnapshot.root)).pipe(gn(null),Yt(1))}),oy(()=>this.afterPreactivation()),Xe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?oe(d).pipe(L(()=>o)):O(o)}),L(u=>{let l=YF(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=se(C({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ge(()=>{this.events.next(new ea)}),rL(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Yt(1),ge({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Nr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Rd(this.transitionAbortSubject.pipe(ge(u=>{throw u}))),ls(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",ht.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),pn(u=>{if(c=!0,Qb(u))this.events.next(new On(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),XF(u)?this.events.next(new ta(u.url)):o.resolve(!1);else{this.events.next(new Xo(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return Ge}))}))}cancelNavigationTransition(r,i,s){let o=new On(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();XL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>D(eV),providedIn:"root"});let t=e;return t})(),Py=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},eV=(()=>{let e=class e extends Py{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Fh(e)))(s||e)}})(),e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),n0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>D(tV),providedIn:"root"});let t=e;return t})(),tV=(()=>{let e=class e extends n0{constructor(){super(...arguments),this.location=D(Ns),this.urlSerializer=D(Oy),this.options=D(jy,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=D($y),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Pn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Hb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Jo)this.stateMemento=this.createStateMemento();else if(r instanceof Pr)this.rawUrlTree=i.initialUrl;else if(r instanceof Pl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof ea?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof On&&(r.code===ht.GuardRejected||r.code===ht.NoDataFromResolver)?this.restoreHistory(i):r instanceof Xo?this.restoreHistory(i,!0):r instanceof Nr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=C(C({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=C(C({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Fh(e)))(s||e)}})(),e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Wo||{});iV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},r0=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=D(Oc),this.stateManager=D(n0),this.options=D(jy,{optional:!0})||{},this.pendingTasks=D(Nc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=D(ZL),this.urlSerializer=D(Oy),this.location=D(Ns),this.urlHandlingStrategy=D($y),this._events=new He,this.errorHandler=this.options.errorHandler||rV,this.navigated=!1,this.routeReuseStrategy=D(XL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=D(By,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!D(Ly,{optional:!0}),this.eventsSubscription=new le,this.isNgZoneEnabled=D(te)instanceof te&&te.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof On&&i.code!==ht.Redirect&&i.code!==ht.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Nr)this.navigated=!0;else if(i instanceof ta){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||JL(s.source)};this.scheduleNavigation(a,Qo,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}aV(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=C({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Vy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=C(C({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=Ub(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return jb(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Zi(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Qo,null,i)}navigate(r,i={skipLocationChange:!1}){return oV(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=C({},iV):i===!1?s=C({},sV):s=i,Zi(r))return Tb(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Tb(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return nV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();cV=new U("");dV=new U("",{factory:()=>new He}),hV=new U("",{providedIn:"root",factory:()=>1}),fV=new U("")});var o0,a0=g(()=>{"use strict";o0=[]});var c0,u0=g(()=>{"use strict";ke();s0();a0();Gf();Tl();c0={providers:[i0(o0),Cc(KE(()=>QE({projectId:"edukoshka",appId:"1:414666822895:web:58499a7e3c6ff9f489f71a",databaseURL:"https://edukoshka-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"edukoshka.appspot.com",apiKey:"AIzaSyDS3PSpgDYJyEdpj7hawnmWuZSUVdf59Rs",authDomain:"edukoshka.firebaseapp.com",messagingSenderId:"414666822895"}))),Cc(mb(()=>_b()))]}});var pV=m0(l0=>{gf();IE();Db();u0();p(l0,null,function*(){let t=yield yE(c0),e=_E(Eb,{injector:t.injector});customElements.define("message-counter",e)})});export default pV();
